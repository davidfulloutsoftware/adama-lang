/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0");
    sb.append("YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhp");
    sb.append("biB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19r");
    sb.append("ZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYg");
    sb.append("PSBzdFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7");
    sb.append("IC8vIGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFy");
    sb.append("IG8gPSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBj");
    sb.append("b3B5IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwog");
    sb.append("ICAgICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEo");
    sb.append("dmopOyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAg");
    sb.append("IG8ucHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsi");
    sb.append("QG8iXSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMg");
    sb.append("d2UgcmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAg");
    sb.append("ICAgICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0");
    sb.append("LCBzbyByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAg");
    sb.append("ICAgIHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKysp");
    sb.append("IHsKICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRl");
    sb.append("bHRhW2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtl");
    sb.append("RGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3Qs");
    sb.append("IHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBm");
    sb.append("dW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGlu");
    sb.append("IHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsg");
    sb.append("aW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09");
    sb.append("ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQog");
    sb.append("ICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBp");
    sb.append("ZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBr");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVu");
    sb.append("IHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykg");
    sb.append("ewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNr");
    sb.append("LCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAg");
    sb.append("dmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAg");
    sb.append("YWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBp");
    sb.append("ZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1");
    sb.append("YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAg");
    sb.append("IHZhciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVl");
    sb.append("KTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8g");
    sb.append("ZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVu");
    sb.append("dHMoZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsK");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5z");
    sb.append("dWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9");
    sb.append("CiAgfTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBp");
    sb.append("ZCA9IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKCiAgdmFyIGRlZmF1bHRFbmRwb2ludCA9IC8qRU5EUE9J");
    sb.append("TlQ9WyovQWRhbWEuUHJvZHVjdGlvbi8qXSovOwoKICAvLyBvdmVycmlkZSBlbmRwb2ludCBiYXNlZCBv");
    sb.append("biB0aGUgcHJlc2VuY2Ugb2YgX19tZF9lbmRwb2ludAogIHZhciBtZE92ZXJyaWRlRW5kcG9pbnQgPSBs");
    sb.append("b2NhbFN0b3JhZ2UuZ2V0SXRlbSgibWRlYyIpOyAvLyBtdWx0aSBkb21haW4gZW5kcG9pbnQgY2hvaWNl");
    sb.append("CiAgaWYgKG1kT3ZlcnJpZGVFbmRwb2ludCAhPSBudWxsICYmICJiZXRhIiA9PSBtZE92ZXJyaWRlRW5k");
    sb.append("cG9pbnQpIHsKICAgIGRlZmF1bHRFbmRwb2ludCA9IEFkYW1hLkJldGE7CiAgfQoKICAvLyBUaGlzIHN0");
    sb.append("cmFuZ2UgZXNjYXBpbmcgaXMgZm9yIGRldmVsb3BlciBtb2RlIHRvIHByb3h5IHRvIGxvY2FsaG9zdC4K");
    sb.append("ICB2YXIgY29ubmVjdGlvbiA9IG5ldyBBZGFtYS5Db25uZWN0aW9uKGRlZmF1bHRFbmRwb2ludCk7CiAg");
    sb.append("dmFyIGNvbm5lY3Rpb25zID0ge307CiAgc2VsZi5jb25uZWN0aW9uID0gY29ubmVjdGlvbjsKICBzZWxm");
    sb.append("LmJ1bXAgPSBmdW5jdGlvbihtKSB7CiAgICBjb25uZWN0aW9uLmJ1bXAobSk7CiAgfTsKCiAgdmFyIGNv");
    sb.append("bm5lY3Rpb25Nb25pdG9yRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgY29ubmVj");
    sb.append("dGlvbi5vbnN0YXR1c2NoYW5nZSA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgIHZhciBpY29uID0gZnVu");
    sb.append("Y3Rpb24gKGNvbG9yKSB7IHJldHVybiAiPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAv");
    sb.append("c3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41");
    sb.append("XCIgc3Ryb2tlPVwiIiArIGNvbG9yICsgIlwiIHN0eWxlPVwid2lkdGg6MTZweDsgaGVpZ2h0OjE2cHhc");
    sb.append("Ij48cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBk");
    sb.append("PVwiTTguMjg4IDE1LjAzOGE1LjI1IDUuMjUgMCAwMTcuNDI0IDBNNS4xMDYgMTEuODU2YzMuODA3LTMu");
    sb.append("ODA4IDkuOTgtMy44MDggMTMuNzg4IDBNMS45MjQgOC42NzRjNS41NjUtNS41NjUgMTQuNTg3LTUuNTY1");
    sb.append("IDIwLjE1MiAwTTEyLjUzIDE4LjIybC0uNTMuNTMtLjUzLS41M2EuNzUuNzUgMCAwMTEuMDYgMHpcIiAv");
    sb.append("Pjwvc3ZnPlxuIjsgfTsKICAgIGlmICghc3RhdHVzKSB7CiAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9t");
    sb.append("LnRpdGxlID0gImRpc2Nvbm5lY3RlZCI7CiAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRN");
    sb.append("TCA9IGljb24oInJlZCIpOwogICAgICBjb25uZWN0aW9uLm9ucGluZyA9IGZ1bmN0aW9uIChfMSwgXzIp");
    sb.append("IHsgfTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbm5lY3Rpb24ub25waW5nID0gZnVuY3Rpb24gKF8sIGxh");
    sb.append("dGVuY3kpIHsKICAgICAgICBjb25uZWN0aW9uTW9uaXRvckRvbS50aXRsZSA9ICJjb25uZWN0ZWQ7IGxh");
    sb.append("dGVuY3k9IiArIGxhdGVuY3kgKyAibXMiOwogICAgICAgIGlmIChsYXRlbmN5ID49IDEwMCkgewogICAg");
    sb.append("ICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1MID0gaWNvbigib3JhbmdlIik7CiAgICAg");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRNTCA9IGljb24o");
    sb.append("ImdyZWVuIik7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH07CiAgY29ubmVjdGlvbk1vbml0b3JE");
    sb.append("b20uc3R5bGUgPSAicG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowcHg7IHJpZ2h0OjBweCI7CiAgY29ubmVj");
    sb.append("dGlvbk1vbml0b3JEb20uY2xhc3NOYW1lID0gImFkYW1hLWRlYnVnZ2VyIgogIGlmIChBZGFtYS5EZWJ1");
    sb.append("Z2dlcikgewogICAgY29ubmVjdGlvbk1vbml0b3JEb20ub25jbGljayA9IEFkYW1hLkRlYnVnZ2VyLnRv");
    sb.append("Z2dsZTsKICB9CiAgY29ubmVjdGlvbi5zdGFydCgpOwogIGNvbm5lY3Rpb24ua2VlcGFsaXZlKCk7Cgog");
    sb.append("IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB2YXIg");
    sb.append("cGF5bG9hZCA9IHt9OwogICAgcGF5bG9hZC5tZXNzYWdlID0gZXZlbnQubWVzc2FnZTsKICAgIHBheWxv");
    sb.append("YWQuZmlsZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIHBheWxvYWQubGluZW5vID0gZXZlbnQubGlu");
    sb.append("ZW5vOwogICAgcGF5bG9hZC5jb2xubyA9IGV2ZW50LmNvbG5vOwogICAgcGF5bG9hZC5maWxlbmFtZSA9");
    sb.append("IGV2ZW50LmZpbGVuYW1lOwogICAgY29ubmVjdGlvbi5sb2coIndpbmRvdy5lcnJvciIsIEpTT04uc3Ry");
    sb.append("aW5naWZ5KHBheWxvYWQpKTsKICAgIGNvbnNvbGUuZXJyb3IoIltlcnJvcl0iICsgZXZlbnQubWVzc2Fn");
    sb.append("ZSk7CiAgfSk7CgogIGNvbm5lY3Rpb24uYnVtcCgicnhodG1sIik7CgogIHZhciByb290UmVwbGFjZSA9");
    sb.append("ICIvIjsKICB2YXIgZml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICByZXR1cm4gcGF0aDsKICB9");
    sb.append("OwogIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuZW5kc1dpdGgoIi5hZGFtYS1wbGF0Zm9ybS5j");
    sb.append("b20iKSAmJiAhd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKCJpZGUuYWRhbWEtcGxhdGZv");
    sb.append("cm0uY29tIikpIHsKICAgIC8vIHRoaXMgZXhpc3RzIGlmIHNvbWVvbmUgaXMgdHJ5aW5nIHRvIHVzZSB0");
    sb.append("aGUgZ2xvYmFsIGRvbWFpbiBmb3IgdGhlaXIgc2l0ZQogICAgdmFyIHBhcnRzID0gd2luZG93LmxvY2F0");
    sb.append("aW9uLnBhdGhuYW1lLnNwbGl0KCIvIik7CiAgICByb290UmVwbGFjZSA9IFtwYXJ0c1swXSwgcGFydHNb");
    sb.append("MV0sIHBhcnRzWzJdLCAiIl0uam9pbigiLyIpOwogICAgdmFyIG9mZnNldCA9IHBhcnRzWzBdLmxlbmd0");
    sb.append("aCArIHBhcnRzWzFdLmxlbmd0aCArIHBhcnRzWzJdLmxlbmd0aCArIDI7CiAgICBmaXhQYXRoID0gZnVu");
    sb.append("Y3Rpb24gKHBhdGgpIHsKICAgICAgcmV0dXJuIHBhdGguc3Vic3RyaW5nKG9mZnNldCk7CiAgICB9Owog");
    sb.append("IH0KCiAgdmFyIGZpeEhyZWYgPSBmdW5jdGlvbiAoaHJlZikgewogICAgaWYgKCFocmVmKSB7CiAgICAg");
    sb.append("IHJldHVybiAiIyI7CiAgICB9CiAgICBpZiAoaHJlZi5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgcmV0");
    sb.append("dXJuIHJvb3RSZXBsYWNlICsgaHJlZi5zdWJzdHJpbmcoMSk7CiAgICB9CiAgICByZXR1cm4gaHJlZjsK");
    sb.append("ICB9OwoKICB2YXIgZ2V0X2Nvbm5lY3Rpb25fb2JqID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIGlmIChu");
    sb.append("YW1lIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHJldHVybiBjb25uZWN0aW9uc1tuYW1lXTsKICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBwdHI6IG51");
    sb.append("bGwsCiAgICAgICAgdHJlZTogbmV3IEFkYW1hVHJlZSgpLAogICAgICAgIG91dHN0YW5kaW5nOiB7fSwK");
    sb.append("ICAgICAgICBkZWNpc2lvbnM6IHt9LAogICAgICAgIGNob2ljZV9zdWJzOiB7fSwKICAgICAgICByZXNl");
    sb.append("dHM6IHt9LAogICAgICAgIGNvbm5lY3Rpb25fZXZlbnRzOiB7fSwKICAgICAgICBzeW5jX2V2ZW50czog");
    sb.append("e30sCiAgICAgICAgaWQ6IDAsCiAgICAgICAgY29ubmVjdGlvbl9zdGF0ZTogZmFsc2UsCiAgICAgICAg");
    sb.append("Y2hvaWNlczoge30sCiAgICAgICAgYm91bmQ6ICIiLAogICAgICAgIHZpZXdzdGF0ZV9zZW50OiB0cnVl");
    sb.append("LAogICAgICAgIHZpZXdzdGF0ZV9jbG9uZTogIiIsCiAgICAgICAgaGFzX2ZpbHRlcjogZmFsc2UsCiAg");
    sb.append("ICAgICAgc3luY2VkOiBmYWxzZSwKICAgICAgICBmaWx0ZXI6IHt9LAogICAgICAgIHZzc2VxOiAwLAog");
    sb.append("ICAgICAgIGRlYnVnZ2VyOiBmdW5jdGlvbiAoZGVsdGEpIHsgfSwKICAgICAgICByYXc6IGNvbm5lY3Rp");
    sb.append("b24KICAgICAgfTsKICAgICAgb2JqLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5jb25u");
    sb.append("ZWN0aW9uX2V2ZW50cyA9IHt9OwogICAgICAgIHRoaXMuc3luY19ldmVudHMgPSB7fTsKICAgICAgICB0");
    sb.append("aGlzLmNob2ljZV9zdWJzID0ge307CiAgICAgIH0uYmluZChvYmopOwogICAgICBpZiAoQWRhbWEuRGVi");
    sb.append("dWdnZXIpIHsKICAgICAgICBvYmouZGVidWdnZXIgPSBBZGFtYS5EZWJ1Z2dlci5yZWdpc3RlcihvYmop");
    sb.append("OwogICAgICB9CiAgICAgIG9iai5zeW5jID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBzeW5jZWQg");
    sb.append("PSB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgJiYgdGhpcy52aWV3c3RhdGVfc2VudDsKICAgICAgICBpZiAo");
    sb.append("dGhpcy5zeW5jZWQgPT0gc3luY2VkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAg");
    sb.append("IHRoaXMuc3luY2VkID0gc3luY2VkOwogICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZh");
    sb.append("ciBzdWIgaW4gb2JqLnN5bmNfZXZlbnRzKSB7CiAgICAgICAgICBpZiAoIShvYmouc3luY19ldmVudHNb");
    sb.append("c3ViXShzeW5jZWQpKSkgewogICAgICAgICAgICBheGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAg");
    sb.append("ICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAg");
    sb.append("ICAgZGVsZXRlIG9iai5zeW5jX2V2ZW50c1theGVba11dOwogICAgICAgIH0KICAgICAgfS5iaW5kKG9i");
    sb.append("aik7CiAgICAgIG9iai5zdWJzY3JpYmVfc3luYyA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAg");
    sb.append("IHZhciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLnN5bmNfZXZlbnRzW3NdID0gY2Fs");
    sb.append("bGJhY2s7CiAgICAgICAgY2FsbGJhY2sodGhpcy5zeW5jZWQpOwogICAgICAgIHJldHVybiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5zeW5jX2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH07CiAgICAgIG9iai5zZXRfY29ubmVjdGVkID0gZnVuY3Rpb24gKGNzKSB7CiAg");
    sb.append("ICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbl9zdGF0ZSA9PSBjcykgewogICAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICAgIH0KICAgICAgICB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgPSBjczsKICAgICAgICB2YXIgYXhl");
    sb.append("ID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5jb25uZWN0aW9uX2V2ZW50cykgewogICAg");
    sb.append("ICAgICAgaWYgKCEob2JqLmNvbm5lY3Rpb25fZXZlbnRzW3N1Yl0oY3MpKSkgewogICAgICAgICAgICBh");
    sb.append("eGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgZGVsZXRlIG9iai5jb25uZWN0aW9uX2V2ZW50");
    sb.append("c1theGVba11dOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmMoKTsKICAgICAgfS5iaW5kKG9iaik7");
    sb.append("CiAgICAgIG9iai5jb25uZWN0ZWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9");
    sb.append("ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX2V2ZW50c1tzXSA9IGNhbGxi");
    sb.append("YWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuY29ubmVjdGlvbl9zdGF0ZSk7CiAgICAgICAgcmV0dXJu");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbm5lY3Rpb25fZXZlbnRzW3NdOwog");
    sb.append("ICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVf");
    sb.append("YW55ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsr");
    sb.append("OwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNo");
    sb.append("YW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFubmVsICsgInwiICsgdGhpcy5pZCsr");
    sb.append("OwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlX3Jlc2V0ID0gZnVuY3Rp");
    sb.append("b24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGRyID0gInJlc2V0fCIgKyB0aGlzLmlkKys7CiAgICAg");
    sb.append("ICAgdGhpcy5yZXNldHNbZHJdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlc2V0c1tkcl07CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAg");
    sb.append("ICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZV9jaG9pY2UgPSBmdW5jdGlvbiAoY2hhbm5l");
    sb.append("bCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9IGNoYW5uZWwgKyAifCIgKyB0aGlzLmlkKys7CiAg");
    sb.append("ICAgICAgdGhpcy5jaG9pY2Vfc3Vic1tzXSA9IGNhbGxiYWNrOwogICAgICAgIHJldHVybiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5jaG9pY2Vfc3Vic1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmoub25jaG9pY2VzID0gZnVuY3Rpb24gKGNo");
    sb.append("YW5uZWwsIGNob2ljZSkgewogICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZhciBzdWIg");
    sb.append("aW4gb2JqLmNob2ljZV9zdWJzKSB7CiAgICAgICAgICBpZiAoc3ViLnN0YXJ0c1dpdGgoY2hhbm5lbCAr");
    sb.append("ICJ8IikpIHsKICAgICAgICAgICAgaWYgKCFvYmouY2hvaWNlX3N1YnNbc3ViXShjaG9pY2UpKSB7CiAg");
    sb.append("ICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAg");
    sb.append("ZGVsZXRlIG9iai5jaG9pY2Vfc3Vic1theGVba11dOwogICAgICAgIH0KICAgICAgfTsKICAgICAgb2Jq");
    sb.append("Lm9uZGVjaWRlID0gZnVuY3Rpb24gKG91dHN0YW5kaW5nKSB7CiAgICAgICAgdmFyIGF4ZVJlc2V0ID0g");
    sb.append("W107CiAgICAgICAgZm9yICh2YXIgZHIgaW4gb2JqLnJlc2V0cykgewogICAgICAgICAgdmFyIHIgPSBv");
    sb.append("YmoucmVzZXRzW2RyXTsKICAgICAgICAgIGlmICghKHIoKSkpIHsKICAgICAgICAgICAgYXhlUmVzZXQu");
    sb.append("cHVzaChkcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwg");
    sb.append("YXhlUmVzZXQubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmoucmVzZXRzW2F4ZVJlc2V0");
    sb.append("W2tdXTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4gb2JqLm91dHN0YW5kaW5nKSB7CiAg");
    sb.append("ICAgICAgICBvYmoub3V0c3RhbmRpbmdbY2hdID0geyBvcHRpb25zOiBbXSB9OwogICAgICAgIH0KICAg");
    sb.append("ICAgICB2YXIgbiA9IG91dHN0YW5kaW5nLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IG47IGsrKykgewogICAgICAgICAgdmFyIG8gPSBvdXRzdGFuZGluZ1trXTsKICAgICAgICAgIG9iai5v");
    sb.append("dXRzdGFuZGluZ1tvLmNoYW5uZWxdID0gbzsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4g");
    sb.append("b2JqLm91dHN0YW5kaW5nKSB7CiAgICAgICAgICB2YXIgb3V0ID0gb2JqLm91dHN0YW5kaW5nW2NoXTsK");
    sb.append("ICAgICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouZGVjaXNp");
    sb.append("b25zKSB7CiAgICAgICAgICAgIGlmIChzdWIuc3RhcnRzV2l0aChjaCArICJ8IikgfHwgc3ViLnN0YXJ0");
    sb.append("c1dpdGgoIi18IikpIHsKICAgICAgICAgICAgICBpZiAoIW9iai5kZWNpc2lvbnNbc3ViXShvdXQsIGNo");
    sb.append("KSkgewogICAgICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgICAgICAgIGRlbGV0ZSBvYmouZGVjaXNpb25zW2F4ZVtrXV07CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25uZWN0aW9uc1tuYW1lXSA9IG9iajsKICAgICAgcmV0");
    sb.append("dXJuIG9iajsKICAgIH0KICB9OwogIHNlbGYuZ2V0Q29ubmVjdGlvbkJ5TmFtZSA9IGdldF9jb25uZWN0");
    sb.append("aW9uX29iajsKCiAgc2VsZi5tYWtlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIG5ldyBBZGFtYVRy");
    sb.append("ZWUoKTsKICB9OwoKICAvLyBIRUxQRVIgfCBzdWJzY3JpYmUgdGhlIGdpdmVuICdzdWInIHRvIGNoYW5n");
    sb.append("ZXMgd2l0aGluIHN0YXRlIGZvciB0aGUgZ2l2ZW4gZmllbGQgbmFtZWQgbmFtZQogIHZhciBzdWJzY3Jp");
    sb.append("YmUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHN1YikgewogICAgdmFyIHNzID0gc2VsZi5wSShzdGF0");
    sb.append("ZSwgbmFtZSk7CiAgICB2YXIgcyA9IHNzW3NzLmN1cnJlbnRdOwogICAgaWYgKHMgPT0gbnVsbCkgewog");
    sb.append("ICAgICBjb25zb2xlLmVycm9yKHNzLmN1cnJlbnQgKyAiIGlzIG5vdCBhdmFpbGFibGU7IHVuYWJsZSB0");
    sb.append("byBzdWJzY3JpYmUuIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICgiQGUiIGluIHMuZGVsdGEp");
    sb.append("IHsKICAgICAgcy5kZWx0YVsiQGUiXS5wdXNoKHN1Yik7CiAgICB9IGVsc2UgewogICAgICBzLmRlbHRh");
    sb.append("WyJAZSJdID0gW3N1Yl07CiAgICB9CiAgfTsKICBzZWxmLnN1YnNjcmliZSA9IHN1YnNjcmliZTsKCiAg");
    sb.append("Ly8gSEVMUEVSIHwgY3JlYXRlIGZyZXNoIHN0YXRlCiAgdmFyIGZyZXNoID0gZnVuY3Rpb24gKHdoZXJl");
    sb.append("KSB7CiAgICByZXR1cm4gewogICAgICB0cmVlOiBuZXcgQWRhbWFUcmVlKCksCiAgICAgIGRlbHRhOiB7");
    sb.append("fSwKICAgICAgcGFyZW50OiBudWxsLAogICAgICBwYXRoOiBudWxsLAogICAgICB3aGVyZTogd2hlcmUK");
    sb.append("ICAgIH07CiAgfTsKICBzZWxmLmZyZXNoID0gZnJlc2g7CgogIC8vIEhFTFBFUjogcmVtb3ZlIHBvdGVu");
    sb.append("dGlhbGx5IHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBmcm9tIGFuIG9iamVjdAogIHZhciBzYWZlX2ZpbHRl");
    sb.append("ciA9IGZ1bmN0aW9uKG8pIHsKICAgIGlmICgncGFzc3dvcmQnIGluIG8pIHsKICAgICAgZGVsZXRlIG9b");
    sb.append("J3Bhc3N3b3JkJ107CiAgICB9CiAgICBpZiAoJ29uZV90aW1lX3Bhc3N3b3JkJyBpbiBvKSB7CiAgICAg");
    sb.append("IGRlbGV0ZSBvWydvbmVfdGltZV9wYXNzd29yZCddOwogICAgfQogICAgcmV0dXJuIG87CiAgfQoKICAv");
    sb.append("LyBIRUxQRVIgfCBjcmVhdGUgYSBuZXcgZGVsdGEgY29weSBmcm9tIHRoZSBnaXZlbiBzcGVjaWZpYyBz");
    sb.append("dGF0ZSAoaS5lLiBlaXRoZXIgZGF0YSBvciB2aWV3KQogIHZhciBuZXdfZGVsdGFfY29weSA9IGZ1bmN0");
    sb.append("aW9uIChzcykgewogICAgaWYgKHNzID09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAg");
    sb.append("ICB2YXIgcGFyZW50ID0gbnVsbDsKICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJl");
    sb.append("bnQgPSBuZXdfZGVsdGFfY29weShzcy5wYXJlbnQpOwogICAgfQogICAgdmFyIG5ld19kZWx0YSA9IHt9");
    sb.append("OwogICAgaWYgKHBhcmVudCAhPSBudWxsKSB7CiAgICAgIHBhcmVudC5kZWx0YVtzcy5wYXRoXSA9IG5l");
    sb.append("d19kZWx0YTsKICAgIH0KICAgIHJldHVybiB7IHRyZWU6IHNzLnRyZWUsIHBhcmVudDogcGFyZW50LCBk");
    sb.append("ZWx0YTogbmV3X2RlbHRhLCBwYXRoOiBzcy5wYXRoIH07CiAgfTsKICBzZWxmLm1ha2VEZWx0YUNvcHkg");
    sb.append("PSBuZXdfZGVsdGFfY29weTsKCiAgLy8gSEVMUEVSIHwgY29uc3RydWN0IGEgcGF0aCB0bwogIHZhciBw");
    sb.append("YXRoX3RvID0gZnVuY3Rpb24gKHNzLCBvYmopIHsKICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgewog");
    sb.append("ICAgICB2YXIgcGVlbCA9IHt9OwogICAgICBwZWVsW3NzLnBhdGhdID0gb2JqOwogICAgICByZXR1cm4g");
    sb.append("cGF0aF90byhzcy5wYXJlbnQsIHBlZWwpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAg");
    sb.append("IH0KICB9OwogIHNlbGYucGF0aFRvID0gcGF0aF90bzsKCiAgLy8gSEVMUEVSIHwgZ2V0IHRoZSByb290");
    sb.append("IG9mIHRoZSBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBlaXRoZXIgdGhlIGRhdGEncyByb290IG9yIHRoZSB2");
    sb.append("aWV3J3Mgcm9vdCkKICB2YXIgcm9vdF9vZiA9IGZ1bmN0aW9uIChzcykgewogICAgdmFyIHggPSBzczsK");
    sb.append("ICAgIHdoaWxlICh4LnBhcmVudCAhPSBudWxsKSB7CiAgICAgIHggPSB4LnBhcmVudDsKICAgIH0KICAg");
    sb.append("IHJldHVybiB4OwogIH07CiAgc2VsZi5yb290T2YgPSByb290X29mOwoKICAvLyBIRUxQRVIgfCByZW1v");
    sb.append("dmUgYWxsIHRoZSBjaGlsZHJlbiBmcm9tIHRoZSBnaXZlbiBET00gbm9kZQogIHZhciBudWtlID0gZnVu");
    sb.append("Y3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAgd2hpbGUg");
    sb.append("KGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0gcGFyZW50");
    sb.append("Lmxhc3RDaGlsZDsKICAgIH0KICB9OwogIHNlbGYubnVrZSA9IG51a2U7CgogIC8vIEhFTFBFUjogZGVi");
    sb.append("b3VuY2UgdGhlIGdpdmVuIGZ1bmN0aW9uYWwgd2hlbiByYXBpZCBmdW5jdGlvbiBzcHJlYWQgaXMgZXhw");
    sb.append("ZWN0ZWQKICB2YXIgZGVib3VuY2UgPSBmdW5jdGlvbiAobXMsIGZvbykgewogICAgdmFyIHN0YXR1cyA9");
    sb.append("IHsgaW5mbGlnaHQ6IGZhbHNlLCB0aW1lb3V0OiBudWxsIH07CiAgICBzdGF0dXMuaW5mbGlnaHQgPSBm");
    sb.append("YWxzZTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghc3RhdHVzLmluZmxpZ2h0KSB7");
    sb.append("CiAgICAgICAgc3RhdHVzLmluZmxpZ2h0ID0gdHJ1ZTsKICAgICAgICBzdGF0dXMudGltZW91dCA9IHdp");
    sb.append("bmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IGZh");
    sb.append("bHNlOwogICAgICAgICAgc3RhdHVzLnRpbWVvdXQgPSBudWxsOwogICAgICAgICAgZm9vKCk7CiAgICAg");
    sb.append("ICAgfSwgbXMgLyogbXMgKi8pOyAvLyBkZWJvdW5jZSB0aGUgcGFyYW1ldGVycwogICAgICB9CiAgICB9");
    sb.append("OwogIH07CiAgc2VsZi5kZWJvdW5jZSA9IGRlYm91bmNlOwoKICB2YXIgZGVsYXkgPSBmdW5jdGlvbiht");
    sb.append("cywgZm9vKSB7CiAgICB2YXIgc3RhdHVzID0geyBhdmFpbDogdHJ1ZSwgYWdhaW46ZmFsc2UsIHRpbWVv");
    sb.append("dXQ6IG51bGwgfTsKICAgIHN0YXR1cy5nbyA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoc3RhdHVzLmF2");
    sb.append("YWlsKSB7CiAgICAgICAgc3RhdHVzLmF2YWlsID0gZmFsc2U7CiAgICAgICAgc3RhdHVzLnRpbWVvdXQg");
    sb.append("PSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHN0YXR1cy5hdmFpbCA9IHRy");
    sb.append("dWU7CiAgICAgICAgICBpZiAoc3RhdHVzLmFnYWluKSB7CiAgICAgICAgICAgIGdvKCk7CiAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgfSk7CiAgICAgICAgZm9vKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdHVz");
    sb.append("LmFnYWluID0gdHJ1ZTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiBzdGF0dXMuZ287CiAgfTsKICBz");
    sb.append("ZWxmLmRlbGF5ID0gZGVsYXk7CgogIC8vIEhFTFBFUiB8IHByZXBhcmUgYSBmcmVlIHVuc3Vic2NyaWJl");
    sb.append("IG9iamVjdAogIHZhciBtYWtlX3Vuc3ViID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAg");
    sb.append("X19kYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgIH0sIF9fdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9");
    sb.append("CiAgICB9OwogIH07CgogIC8vIEhFTFBFUiB8IGF1Z21lbnQgYW4gZXhpc3Rpbmcgb2JqZWN0IHdpdGgg");
    sb.append("dW5zdWJzY3JpYmUgZGF0YQogIHZhciBhZGRfdW5zdWIgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBvYmou");
    sb.append("X19kYXRhID0gZnVuY3Rpb24gKCkgewogICAgfTsKICAgIG9iai5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICB9OwogIH07CgogIC8vIEhFTFBFUiB8IGZpcmUgdGhlIHVuc3Vic2NyaWJlIGNhbGxzIHdpdGhp");
    sb.append("biBhbiBvYmplY3QKICB2YXIgZmlyZV91bnN1YiA9IGZ1bmN0aW9uICh1bnN1YikgewogICAgdW5zdWIu");
    sb.append("X19kYXRhKCk7CiAgICB1bnN1Yi5fX3ZpZXcoKTsKICB9OwoKICB2YXIgaXNFbXB0eURlbHRhID0gZnVu");
    sb.append("Y3Rpb24oZGVsdGEpIHsKICAgIGlmICh0eXBlb2YoZGVsdGEpID09ICJmdW5jdGlvbiIpIHsKICAgICAg");
    sb.append("cmV0dXJuIGZhbHNlOwogICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlbHRhKSkgewogICAgICBm");
    sb.append("b3IgKHZhciBqID0gMDsgaiA8IGRlbHRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgaWYgKCFpc0VtcHR5");
    sb.append("RGVsdGEoZGVsdGFbal0pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZihkZWx0YSkgPT0gIm9iamVjdCIpIHsKICAgICAgZm9yICh2YXIg");
    sb.append("ayBpbiBkZWx0YSkgewogICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRhW2tdKSkgewogICAgICAg");
    sb.append("ICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7CiAg");
    sb.append("fQoKICAvLyBIRUxQRVIgfCBzdWJzY3JpYmUgdG8gc3RhdGUgYW5kIHBvcHVsYXRlIHVuc3Vic2NyaWJl");
    sb.append("IG9iamVjdAogIHZhciBzdWJzY3JpYmVfc3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIHVuc3ViKSB7CiAg");
    sb.append("ICAvLyAgJiYgIWlzRW1wdHlEZWx0YShzdGF0ZS5kYXRhKQogICAgdW5zdWIuX19kYXRhID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgfTsKICAgIHVuc3ViLl9fdmlldyA9IGZ1bmN0aW9uICgpIHsKICAgIH07CgogICAg");
    sb.append("aWYgKHN0YXRlLmRhdGEgIT0gbnVsbCkgewogICAgICB2YXIgZGVsdGEgPSByb290X29mKHN0YXRlLmRh");
    sb.append("dGEpLmRlbHRhOwogICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YSkpIHsKICAgICAgICB1bnN1Yi5f");
    sb.append("X2RhdGEgPSBzdGF0ZS5kYXRhLnRyZWUuc3Vic2NyaWJlKGRlbHRhKTsKICAgICAgfQogICAgfQogICAg");
    sb.append("Ly8gICYmICFpc0VtcHR5RGVsdGEoc3RhdGUudmlldykKICAgIGlmIChzdGF0ZS52aWV3ICE9IG51bGwp");
    sb.append("IHsKICAgICAgdmFyIGRlbHRhID0gcm9vdF9vZihzdGF0ZS52aWV3KS5kZWx0YTsKICAgICAgaWYgKCFp");
    sb.append("c0VtcHR5RGVsdGEoZGVsdGEpKSB7CiAgICAgICAgdW5zdWIuX192aWV3ID0gc3RhdGUudmlldy50cmVl");
    sb.append("LnN1YnNjcmliZShkZWx0YSk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBSVU5USU1FIHwgU3dpdGNo");
    sb.append("IHRvIHRoZSB2aWV3IG9iamVjdAogIHNlbGYucFYgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVy");
    sb.append("biB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZp");
    sb.append("ZXcsIGN1cnJlbnQ6ICJ2aWV3IiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZVZpZXdPZiA9IHNlbGYucFY7");
    sb.append("CgogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhlIGRhdGEgb2JqZWN0CiAgc2VsZi5wRCA9IGZ1bmN0");
    sb.append("aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3Rh");
    sb.append("dGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogImRhdGEiIH07CiAgfTsKICBzZWxmLm5l");
    sb.append("d1N0YXRlRGF0YU9mID0gc2VsZi5wRDsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgcm9vdCBv");
    sb.append("YmplY3QgLyAoUm9vdCkKICBzZWxmLnBSID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9");
    sb.append("IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmll");
    sb.append("dywgY3VycmVudDogc3RhdGUuY3VycmVudCB9OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJy");
    sb.append("ZW50XTsKICAgIHdoaWxlIChwcmlvciAhPSBudWxsKSB7CiAgICAgIG5leHRbc3RhdGUuY3VycmVudF0g");
    sb.append("PSBwcmlvcjsKICAgICAgcHJpb3IgPSBwcmlvci5wYXJlbnQ7CiAgICB9CiAgICByZXR1cm4gbmV4dDsK");
    sb.append("ICB9OwogIHNlbGYubmV3U3RhdGVSb290T2YgPSBzZWxmLnBSOwoKICAvLyBSVU5USU1FIHwgLi4vIChV");
    sb.append("cCkKICBzZWxmLnBVID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTog");
    sb.append("c3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDog");
    sb.append("c3RhdGUuY3VycmVudCB9OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsKICAgIGlm");
    sb.append("IChwcmlvci5wYXJlbnQgIT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3Iu");
    sb.append("cGFyZW50OwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0YXRlUGFyZW50T2Yg");
    sb.append("PSBzZWxmLnBVOwoKICAvLyBSVU5USU1FIHwgZGl2ZSBvbmUgbGV2ZWwgSW50byBwYXRoMS9wYXRoMi8u");
    sb.append("Li4uL3BhdGhOCiAgc2VsZi5wSSA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewogICAgdmFyIHByaW9y");
    sb.append("ID0gc3RhdGVbc3RhdGUuY3VycmVudF07CiAgICBpZiAocHJpb3IgPT0gbnVsbCkgewogICAgICBjb25z");
    sb.append("b2xlLmVycm9yKHN0YXRlLmN1cnJlbnQgKyAiIGlzIG5vdCBwcmVzZW50Iik7CiAgICAgIHJldHVybiBz");
    sb.append("dGF0ZTsKICAgIH0KICAgIGlmICghKG5hbWUgaW4gcHJpb3IuZGVsdGEpKSB7CiAgICAgIHByaW9yLmRl");
    sb.append("bHRhW25hbWVdID0ge307CiAgICB9CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2Vydmlj");
    sb.append("ZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3VycmVu");
    sb.append("dCB9OwogICAgbmV4dFtzdGF0ZS5jdXJyZW50XSA9IHsKICAgICAgdHJlZTogcHJpb3IudHJlZSwKICAg");
    sb.append("ICAgZGVsdGE6IHByaW9yLmRlbHRhW25hbWVdLAogICAgICBwYXJlbnQ6IHByaW9yLAogICAgICBwYXRo");
    sb.append("OiBuYW1lCiAgICB9OwogICAgaWYgKG5leHQuY3VycmVudCA9PSAiZGF0YSIpIHsKICAgICAgbmV4dC5k");
    sb.append("YXRhLmNvbm5lY3Rpb24gPSBwcmlvci5jb25uZWN0aW9uOwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAg");
    sb.append("fTsKICBzZWxmLm5ld1N0YXRlRGl2ZUludG8gPSBzZWxmLnBJOwoKICAvLyBSVU5USU1FIHwgZXh0ZW5k");
    sb.append("IHRoZSBnaXZlbiBzdGF0ZSB3aXRoIHRoZSB2aWV3IGhhdmluZyBhIHNlcGFyYXRlIGNoaWxkCiAgc2Vs");
    sb.append("Zi5wRVYgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIGlmICghKG5hbWUgaW4gc3RhdGUudmll");
    sb.append("dy5kZWx0YSkpIHsKICAgICAgc3RhdGUudmlldy5kZWx0YVtuYW1lXSA9IHt9OwogICAgfQogICAgcmV0");
    sb.append("dXJuIHsKICAgICAgc2VydmljZTogc3RhdGUuc2VydmljZSwKICAgICAgZGF0YTogc3RhdGUuZGF0YSwK");
    sb.append("ICAgICAgdmlldzogewogICAgICAgIHRyZWU6IHN0YXRlLnZpZXcudHJlZSwKICAgICAgICBkZWx0YTog");
    sb.append("c3RhdGUudmlldy5kZWx0YVtuYW1lXSwKICAgICAgICBwYXJlbnQ6IHN0YXRlLnZpZXcsCiAgICAgICAg");
    sb.append("cGF0aDogbmFtZQogICAgICB9LAogICAgICBjdXJyZW50OiBzdGF0ZS5jdXJyZW50CiAgICB9OwogIH07");
    sb.append("CiAgc2VsZi5uZXdTdGF0ZUNyZWF0ZVZpZXdDaGlsZCA9IHNlbGYucEVWOwoKICBzZWxmLnBJRSA9IGZ1");
    sb.append("bmN0aW9uIChzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldykgewogICAgdmFyIG5leHQgPSBzZWxmLnBJKHN0");
    sb.append("YXRlLCBuYW1lKTsKICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgIHJldHVybiBzZWxmLnBFVihuZXh0");
    sb.append("LCBuYW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXh0OwogICAgfQogIH07CgogIHZhciBm");
    sb.append("b3JrID0gZnVuY3Rpb24gKHByaW9yU3RhdGUpIHsKICAgIHZhciBzdGF0ZSA9IHsKICAgICAgc2Vydmlj");
    sb.append("ZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICBkYXRhOiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRl");
    sb.append("LmRhdGEpLAogICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICBj");
    sb.append("dXJyZW50OiBwcmlvclN0YXRlLmN1cnJlbnQKICAgIH07CiAgICBpZiAoc3RhdGUuZGF0YSAhPSBudWxs");
    sb.append("KSB7CiAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbiA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9u");
    sb.append("OwogICAgfQogICAgcmV0dXJuIHN0YXRlOwogIH07CgogIC8vIFJVTlRJTUUgfCBzdWJzY3JpYmUgYmV0");
    sb.append("d2VlbiB0aGUgc3RhdGUgYW5kIHRoZSBvYmplY3QuCiAgLy8gV2hlbiB0aGUgbWVtYmVyIGZpZWxkIHdp");
    sb.append("dGhpbiBzdGF0ZSBvZiBuYW1lIGNoYW5nZXMsIGNvcHkgdGhhdCB2YWx1ZSBpbnRvIHRoZSBvYmogYW5k");
    sb.append("IHJ1biByZWNvbXB1dGUoKQogIHNlbGYuWSA9IGZ1bmN0aW9uIChzdGF0ZSwgb2JqLCBuYW1lLCByZWNv");
    sb.append("bXB1dGUpIHsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgb2JqW25hbWVdID0g");
    sb.append("dmFsdWU7CiAgICAgIHJlY29tcHV0ZSgpOwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwg");
    sb.append("c3ViKTsKICB9OwoKICBzZWxmLlkyID0gZnVuY3Rpb24gKHN0YXRlLCByLCBrZXksIG5hbWUsIHJlY29t");
    sb.append("cHV0ZSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgb2JqID0gci5f");
    sb.append("W2tleV07CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICByZWNvbXB1dGUob2JqKTsKICAgICAg");
    sb.append("cmV0dXJuIHRydWU7CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07Cgog");
    sb.append("IC8vIFJVTlRJTUU6IGJ1aWxkIGFuIHJ4b2JqCiAgc2VsZi5SWCA9IGZ1bmN0aW9uICh2YXJzKSB7CiAg");
    sb.append("ICB2YXIgbyA9IHt9OwogICAgby5fID0ge307CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHZhcnMubGVu");
    sb.append("Z3RoOyBrKyspIHsKICAgICAgby5fW3ZhcnNba11dID0ge307CiAgICB9CiAgICBvLl9fID0gZnVuY3Rp");
    sb.append("b24oKSB7fTsKICAgIHJldHVybiBvOwogIH07CgogIC8vIFJVTlRJTUUgfCBKdXN0IHN1YnNjcmliZWUg");
    sb.append("dmFsdWUgdG8gdGhlIG9iamVjdCBmaWVsZCBvZiBuYW1lIChuby1yZWNvbXB1dGUpCiAgc2VsZi5ZUyA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSwgb2JqLCBuYW1lKSB7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVl");
    sb.append("KSB7CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgICBz");
    sb.append("dWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElNRSB8ICJUZXh0IgogIHNl");
    sb.append("bGYuVCA9IGZ1bmN0aW9uICh0eCkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHR4");
    sb.append("KTsKICB9OwoKICAvLyBjb252ZXJ0IGEgdmFsdWUgaW50byBhIGJvb2xlYW4KICBzZWxmLkIgPSBmdW5j");
    sb.append("dGlvbih2YWwpIHsKICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9");
    sb.append("CiAgICByZXR1cm4gdmFsID09ICJ0cnVlIjsKICB9OwoKICAvLyBSVU5USU1FIHwgPHZpZXctd3JpdGUg");
    sb.append("bmFtZT0iIiB2YWx1ZT0iIj4KICBzZWxmLlZXID0gZnVuY3Rpb24oc3RhdGUsIG5hbWUsIHJ4T2JqKSB7");
    sb.append("CiAgICByeE9iai5fXyA9IGRlYm91bmNlKDUwLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9iaiA9IHt9");
    sb.append("OwogICAgICB2YXIgdmFsdWUgPSByeE9iai52YWx1ZTsKICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09");
    sb.append("ICJmdW5jdGlvbiIpIHsKICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZSgpOwogICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICB9CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8o");
    sb.append("c3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9");
    sb.append("KTsKICB9OwoKICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLj4KICBzZWxmLkwgPSBmdW5jdGlv");
    sb.append("biAoc3RhdGUsIG5hbWUpIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7");
    sb.append("CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRvbS5ub2RlVmFsdWUgPSB2YWx1");
    sb.append("ZTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4gZG9tOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUUgfCA8bG9va3VwIHBhdGg9Li4uIHRyYW5zZm9ybT0iJHRyYW5zZm9ybSIg");
    sb.append("Lz4KICBzZWxmLkxUID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHZhciBk");
    sb.append("b20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZh");
    sb.append("bHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9tLm5vZGVWYWx1ZSA9IHRy");
    sb.append("YW5zZm9ybSh2YWx1ZSk7CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1");
    sb.append("Yik7CiAgICByZXR1cm4gZG9tOwogIH07CgogIHNlbGYuTGggPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUp");
    sb.append("IHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB2YXIgc3Vi");
    sb.append("ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9t");
    sb.append("LmlubmVySFRNTCA9IHZhbHVlOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1l");
    sb.append("LCBzdWIpOwogICAgcmV0dXJuIGRvbTsKICB9OwoKICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4u");
    sb.append("LiB0cmFuc2Zvcm09IiR0cmFuc2Zvcm0iIC8+CiAgc2VsZi5MVGRUID0gZnVuY3Rpb24gKHN0YXRlLCBu");
    sb.append("YW1lLCB0cmFuc2Zvcm0sIGZyZXEpIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9k");
    sb.append("ZSgiIik7CiAgICAvLyBjcmVhdGUgdGhlIG5leHVzIG9iamVjdAogICAgdmFyIG9iaiA9IHt9OwogICAg");
    sb.append("b2JqLmZyZXEgPSBmcmVxOwogICAgb2JqLnZhbHVlID0gIiI7CgogICAgLy8gdXBkYXRlIHdpbGwgZXhl");
    sb.append("Y3V0ZSB0aGUgdHJhbnNmb3JtIG9uIHRoZSB2YWx1ZQogICAgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKCkg");
    sb.append("ewogICAgICBkb20ubm9kZVZhbHVlID0gdHJhbnNmb3JtKHRoaXMudmFsdWUpOwogICAgfS5iaW5kKG9i");
    sb.append("aik7CgogICAgLy8gc3Vic2NyaXB0aW9uIHdpbGwgc3luYyB0aGUgdmFsdWUKICAgIHZhciBzdWIgPSBm");
    sb.append("dW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICB0aGlzLnZh");
    sb.append("bHVlID0gdmFsdWU7CiAgICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgfQogICAgfS5iaW5kKG9iaik7");
    sb.append("CgogICAgLy8gcmVmcmVzaCB3aWxsIHJlLWV4ZWN1dGUgdGhlIHVwZGF0ZSAoYW5kIHRodXMgdGhlIHRy");
    sb.append("YW5zZm9ybSkKICAgIG9iai5yZWZyZXNoID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudXBkYXRlKCk7");
    sb.append("CiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsgLy8gd2lsbCBydW4gc28gbG9u");
    sb.append("ZyBhcyB0aGUgRE9NIGNvbnRhaW5zIHRoZSBub2RlIHdlIG1hbmlwdWxhdGVkCiAgICAgICAgd2luZG93");
    sb.append("LnNldFRpbWVvdXQodGhpcy5yZWZyZXNoLCB0aGlzLmZyZXEpOwogICAgICB9CiAgICB9LmJpbmQob2Jq");
    sb.append("KTsKICAgIC8vIGtpY2sgb2ZmIHRoZSBhdXRvIHRyYW5zZm9ybQogICAgd2luZG93LnNldFRpbWVvdXQo");
    sb.append("b2JqLnJlZnJlc2gsIGZyZXEpOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0");
    sb.append("dXJuIGRvbTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZz4KICBzZWxmLkUgPSBmdW5jdGlvbiAodGFn");
    sb.append("LCBucykgewogICAgaWYgKG5zID09IHVuZGVmaW5lZCB8fCBucyA9PSBudWxsKSB7CiAgICAgIHZhciBk");
    sb.append("b20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7CiAgICAgIGlmICh0YWcgPT0gInNlbGVjdCIp");
    sb.append("IHsKICAgICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7IGRvbS5y");
    sb.append("eHZhbHVlID0gZG9tLnZhbHVlOyB9KTsKICAgICAgfQogICAgICByZXR1cm4gZG9tOwogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgdmFyIHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgdGFnKTsKICAg");
    sb.append("ICAgcmVzdWx0LnNldEF0dHJpYnV0ZSgieG1sbnMiLCBucyk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAg");
    sb.append("ICB9CiAgfTsKCiAgc2VsZi5DU3QgPSBmdW5jdGlvbiAocGFyZW50LCBzdGF0ZSwgY2hpbGRNYWtlckNv");
    sb.append("bm5lY3RlZCwgY2hpbGRNYWtlckRpc2Nvbm5lY3RlZCkgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1");
    sb.append("YigpOwogICAgaWYgKCFzdGF0ZS5kYXRhLmNvbm5lY3Rpb24pIHsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNvbm5lY3RlZChmdW5jdGlvbihjcykgewogICAgICBpZiAo");
    sb.append("dGhpcy5wcmlvciA9PSBjcykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBudWtlKHBhcmVu");
    sb.append("dCk7CiAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICB0aGlzLnByaW9yID0gY3M7CiAgICAgIHZh");
    sb.append("ciBuZXdTdGF0ZSA9IGZvcmsoc3RhdGUpOwogICAgICBpZiAoY3MpIHsKICAgICAgICBjaGlsZE1ha2Vy");
    sb.append("Q29ubmVjdGVkKHBhcmVudCwgbmV3U3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGNoaWxkTWFr");
    sb.append("ZXJEaXNjb25uZWN0ZWQocGFyZW50LCBuZXdTdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0");
    sb.append("YXRlKG5ld1N0YXRlLCB1bnN1Yik7CiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHBh");
    sb.append("cmVudCk7CiAgICB9LmJpbmQoe3ByaW9yOm51bGx9KSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb2Nh");
    sb.append("bC1zdG9yYWdlLXBvbGwga2V5PSRrZXkgW21zPSRtc10+CiAgc2VsZi5Mb1N0UG8gPSBmdW5jdGlvbihw");
    sb.append("YXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyRm91bmQsIGNoaWxkTWFrZXJOb3RGb3Vu");
    sb.append("ZCkgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgdmFyIHNtID0ge307CiAgICBzbS5r");
    sb.append("ZXkgPSBudWxsOwogICAgc20ubXMgPSA1MDAwOwogICAgc20ubGFzdCA9ICIhIjsKICAgIHNtLnAgPSBm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMua2V5ID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgIH0KICAgICAgdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5rZXkpOwogICAg");
    sb.append("ICBpZiAodmFsdWUgPT0gdGhpcy5sYXN0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRo");
    sb.append("aXMubGFzdCA9IHZhbHVlOwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgbnVrZShwYXJlbnQp");
    sb.append("OwogICAgICB2YXIgdHJlZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgICAgdmFyIHN0YXRlID0gewogICAg");
    sb.append("ICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246");
    sb.append("IHByaW9yU3RhdGUuY29ubmVjdGlvbiwgdHJlZTogdHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGws");
    sb.append("IHBhdGg6IG51bGwgfSwKICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcp");
    sb.append("LAogICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAgICB9OwogICAgICBpZiAodmFsdWUgPT0gbnVsbCkg");
    sb.append("ewogICAgICAgIGNoaWxkTWFrZXJOb3RGb3VuZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICBzdWJzY3Jp");
    sb.append("YmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlsZE1ha2VyRm91");
    sb.append("bmQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAg");
    sb.append("ICAgICAgdHJlZS51cGRhdGUodHJlZS5NYWtlRGVsdGEoSlNPTi5wYXJzZSh2YWx1ZSkpKTsKICAgICAg");
    sb.append("fQoKICAgIH0uYmluZChzbSk7CiAgICByeE9iai5fXyA9IGRlYm91bmNlKDUwLCBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIGlmICgna2V5JyBpbiByeE9iaikgewogICAgICAgIHRoaXMua2V5ID0gcnhPYmoua2V5Owog");
    sb.append("ICAgICB9CiAgICAgIGlmICgnbXMnIGluIHJ4T2JqKSB7CiAgICAgICAgdGhpcy5tcyA9IHBhcnNlSW50");
    sb.append("KHJ4T2JqLm1zKTsKICAgICAgICBpZiAoaXNOYU4odGhpcy5tcykpIHsKICAgICAgICAgIHRoaXMubXMg");
    sb.append("PSA1MDAwOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnAoKTsKICAgIH0uYmluZChzbSkpOwoK");
    sb.append("ICAgIHNtLnRpbWVvdXQgPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFp");
    sb.append("bnMocGFyZW50KSkgewogICAgICAgIHRoaXMucCgpOwogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRo");
    sb.append("aXMudGltZW91dCwgdGhpcy5tcyk7CiAgICAgIH0KICAgIH0uYmluZChzbSk7CiAgICB3aW5kb3cuc2V0");
    sb.append("VGltZW91dChzbS50aW1lb3V0LCA1MCk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxkb2N1bWVudC1nZXQg");
    sb.append("c3BhY2U9IiRzcGFjZSIga2V5PSIka2V5IiB1cmw9IiRwYXRoIiBzZWFyY2g6eD0iLi4uIiAuLi4+CiAg");
    sb.append("c2VsZi5EY0cgPSBmdW5jdGlvbihwYXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyRmV0");
    sb.append("Y2hlZCwgY2hpbGRNYWtlckZhaWxlZCkgewogICAgLy8gVE9ETwogIH07CgogIC8vIFJVTlRJTUUgfCA8");
    sb.append("ZG9tYWluLWdldCB1cmw9InBhdGgiIHNlYXJjaDp4PSIuLi4iIC4uLj4KICBzZWxmLkRHID0gZnVuY3Rp");
    sb.append("b24ocGFyZW50LCBwcmlvclN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZldGNoZWQsIGNoaWxkTWFrZXJG");
    sb.append("YWlsZWQsIGRlbGF5TGltaXQpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHZhciBk");
    sb.append("ZWxheVRvVXNlID0gdHlwZW9mKGRlbGF5TGltaXQpID09ICJudW1iZXIiID8gZGVsYXlMaW1pdCA6IDI1");
    sb.append("MDsKICAgIHJ4T2JqLl9fID0gZGVib3VuY2UoNTAsIGRlbGF5KGRlbGF5VG9Vc2UsIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgaWYgKCEoJ3VybCcgaW4gcnhPYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAg");
    sb.append("ICAgIHZhciBhcmdzID0gW107CiAgICAgIHZhciBpZGVudGl0eSA9IG51bGw7CiAgICAgIGZvciAodmFy");
    sb.append("IGFyZyBpbiByeE9iaikgewogICAgICAgIHZhciB2YWwgPSByeE9ialthcmddOwogICAgICAgIHN3aXRj");
    sb.append("aCAoYXJnKSB7CiAgICAgICAgICBjYXNlICJfXyI6CiAgICAgICAgICBjYXNlICJfIjoKICAgICAgICAg");
    sb.append("IGNhc2UgInVybCI6CiAgICAgICAgICBjYXNlICJyZWRpcmVjdCI6CiAgICAgICAgICAgIGJyZWFrOwog");
    sb.append("ICAgICAgICAgY2FzZSAiaWRlbnRpdHkiOgogICAgICAgICAgICBpZiAodHlwZW9mKHZhbCkgPT0gInN0");
    sb.append("cmluZyIpIHsKICAgICAgICAgICAgICBpZGVudGl0eSA9IHJ4T2JqW2FyZ107CiAgICAgICAgICAgIH0K");
    sb.append("ICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBhcmdzLnB1c2go");
    sb.append("YXJnICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkpOwogICAgICAgIH0KICAgICAgfQogICAg");
    sb.append("ICB2YXIgdXJsID0gcnhPYmoudXJsICsgKGFyZ3MubGVuZ3RoID4gMCA/ICI/IiArIGFyZ3Muam9pbigi");
    sb.append("JiIpIDogIiIpOwogICAgICB0aGlzLmdlbiArKzsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2");
    sb.append("YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hh");
    sb.append("bmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLnhodHRwLnJlYWR5U3RhdGUgPT0gNCAm");
    sb.append("JiB0aGlzLmdlbiA9PSBzZWxmLmdlbikgewogICAgICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAg");
    sb.append("ICAgICBudWtlKHBhcmVudCk7CiAgICAgICAgICB2YXIgdHJlZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAg");
    sb.append("ICAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNl");
    sb.append("LAogICAgICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29ubmVjdGlvbiwgdHJl");
    sb.append("ZTogdHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgICAgICAg");
    sb.append("dmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICAgICAgY3VycmVudDog");
    sb.append("ImRhdGEiCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmICh0aGlzLnhodHRwLnN0YXR1cyA9PSAyMDAp");
    sb.append("IHsKICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnhodHRwLmdldFJlc3BvbnNlSGVhZGVyKCJDb250");
    sb.append("ZW50LVR5cGUiKTsKICAgICAgICAgICAgaWYgKHR5cGUgPT0gImFwcGxpY2F0aW9uL2pzb24iKSB7CiAg");
    sb.append("ICAgICAgICAgICAgdmFyIHRvUHVzaCA9IHRyZWUuTWFrZURlbHRhKEpTT04ucGFyc2UodGhpcy54aHR0");
    sb.append("cC5yZXNwb25zZVRleHQpKTsKICAgICAgICAgICAgICBjaGlsZE1ha2VyRmV0Y2hlZChwYXJlbnQsIHN0");
    sb.append("YXRlKTsKICAgICAgICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgICAgICAg");
    sb.append("ICAgICB0cmVlLnVwZGF0ZSh0b1B1c2gpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg");
    sb.append("IGNoaWxkTWFrZXJGYWlsZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgICAgc3Vic2NyaWJlX3N0");
    sb.append("YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg");
    sb.append("ICAgIGNoaWxkTWFrZXJGYWlsZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgIHN1YnNjcmliZV9z");
    sb.append("dGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfS5iaW5kKHtnZW46");
    sb.append("c2VsZi5nZW4sIHhodHRwOnhodHRwfSk7CiAgICAgIHhodHRwLm9wZW4oIkdFVCIsICBzZWxmLmJhc2Ug");
    sb.append("KyAiL35kIiArIHVybCwgdHJ1ZSk7CiAgICAgIGlmIChpZGVudGl0eSAhPSBudWxsKSB7CiAgICAgICAg");
    sb.append("eGh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQXV0aG9yaXphdGlvbiIsICJCZWFyZXIgIiArIGlkZW50aXR5");
    sb.append("KTsKICAgICAgfQogICAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgICB4aHR0cC5z");
    sb.append("ZW5kKCk7CiAgICB9LmJpbmQoe3VybDoiIiwgZ2VuOjAsIGJhc2U6c2VsZi5wcm90b2NvbCArICIvLyIg");
    sb.append("KyBzZWxmLmhvc3R9KSkpOwogICAgcnhPYmouX18oKTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHBpY2sg");
    sb.append("bmFtZT0uLi4+CiAgc2VsZi5QID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgcnhPYmosIGNo");
    sb.append("aWxkTWFrZXJDb25uZWN0ZWQsIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQsIGtlZXBPcGVuKSB7CiAgICB2");
    sb.append("YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICByeE9iai5fXyA9IGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("aWYgKCEoJ25hbWUnIGluIHJ4T2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAo");
    sb.append("dGhpcy5uYW1lID09IHJ4T2JqLm5hbWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFy");
    sb.append("IGNvID0gZ2V0X2Nvbm5lY3Rpb25fb2JqKHJ4T2JqLm5hbWUpOwogICAgICB0aGlzLm5hbWUgPSByeE9i");
    sb.append("ai5uYW1lOwogICAgICBjby5jb25uZWN0ZWQoZnVuY3Rpb24gKGNzKSB7CiAgICAgICAgaWYgKHRoaXMu");
    sb.append("cmVuZGVyZWQgJiYga2VlcE9wZW4pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAg");
    sb.append("bnVrZShwYXJlbnQpOwogICAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICAgIHZhciBzdGF0ZSA9");
    sb.append("IHsKICAgICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICAgIGRhdGE6IHsg");
    sb.append("Y29ubmVjdGlvbjogY28sIHRyZWU6IGNvLnRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRo");
    sb.append("OiBudWxsIH0sCiAgICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAog");
    sb.append("ICAgICAgICAgY3VycmVudDogImRhdGEiCiAgICAgICAgfTsKICAgICAgICBpZiAoY3MpIHsKICAgICAg");
    sb.append("ICAgIHRoaXMucmVuZGVyZWQgPSB0cnVlOwogICAgICAgICAgY2hpbGRNYWtlckNvbm5lY3RlZChwYXJl");
    sb.append("bnQsIHN0YXRlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2hpbGRNYWtlckRpc2Nvbm5lY3Rl");
    sb.append("ZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1");
    sb.append("bnN1Yik7CiAgICAgICAgLy8gVE9ETzogcmV0dXJuIGZhbHNlIHRvIHVuc3ViCiAgICAgICAgcmV0dXJu");
    sb.append("IHRydWU7CiAgICAgIH0uYmluZCh0aGlzKSk7CiAgICB9LmJpbmQoeyBuYW1lOiAiIiwgcmVuZGVyZWQ6");
    sb.append("ZmFsc2UgfSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0ZW1wbGF0ZSBuYW1lPSIuLi4iPgogIHNlbGYu");
    sb.append("VFAgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICB0ZW1wbGF0ZXNbbmFtZV0gPSBmb287CiAgfTsK");
    sb.append("CiAgLy8gUlVOVElNRSB8IDx0YWcgcng6dGVtcGxhdGU9JG5hbWU+CiAgc2VsZi5VVCA9IGZ1bmN0aW9u");
    sb.append("IChwYXJlbnQsIHN0YXRlLCBuYW1lLCBjaGlsZF9tYWtlcikgewogICAgdmFyIGZvbyA9IHRlbXBsYXRl");
    sb.append("c1tuYW1lXTsKICAgIGlmICh0eXBlb2YoZm9vKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIGZvbyhwYXJl");
    sb.append("bnQsIHN0YXRlLCBjaGlsZF9tYWtlcik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKCJm");
    sb.append("YWlsZWQgdG8gZmluZCB0ZW1wbGF0ZTogIiArIG5hbWUpOwogICAgfQogIH07CgogIC8vIFJVTlRJTUUg");
    sb.append("fCA8dGFnIHJ4OnN3aXRjaD1wYXRoIC4uPgogIHNlbGYuU1cgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCBuYW1lLCBjaGlsZHJlbk1ha2VyKSB7CiAgICB2YXIgc3dzdCA9IHsgcHJpb3I6IG51bGwg");
    sb.append("fTsKICAgIGFkZF91bnN1Yihzd3N0KTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAg");
    sb.append("ICAgaWYgKHZhbHVlID09IHRoaXMucHJpb3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAg");
    sb.append("dGhpcy5wcmlvciA9IHZhbHVlOwogICAgICBmaXJlX3Vuc3ViKHRoaXMpOwogICAgICBudWtlKHBhcmVu");
    sb.append("dCk7CiAgICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGNoaWxkcmVuTWFrZXIo");
    sb.append("cGFyZW50LCBzZWxmLnBEKHN0YXRlKSwgIiIgKyB2YWx1ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShz");
    sb.append("dGF0ZSwgdGhpcyk7CiAgICB9LmJpbmQoc3dzdCk7CiAgICBzdWJzY3JpYmUocHJpb3JTdGF0ZSwgbmFt");
    sb.append("ZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZyByeDppdGVyYXRlPXBhdGggLi4uPgogIHNl");
    sb.append("bGYuSVQgPSBmdW5jdGlvbiAocGFyZW50RG9tLCBzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldywgbWFrZXIp");
    sb.append("IHsKICAgIHZhciBpdF9zdGF0ZSA9IHNlbGYucElFKHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3KTsKICAg");
    sb.append("IHZhciBkb21CeUtleSA9IHt9OwogICAgdmFyIHZpZXdVblN1YkJ5S2V5ID0ge307CiAgICB2YXIga2ls");
    sb.append("bCA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHZpZXdVblN1YkJ5S2V5KSB7CiAg");
    sb.append("ICAgICAgZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICBkZWxldGUgdmlld1Vu");
    sb.append("U3ViQnlLZXlba2V5XTsKICAgICAgfQogICAgICBmb3IgKHZhciBrZXkgaW4gZG9tQnlLZXkpIHsKICAg");
    sb.append("ICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgc3ViID0gewog");
    sb.append("ICAgICAiKyI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgbmV3X3N0YXRlID0gZm9yayhzZWxm");
    sb.append("LnBJRShpdF9zdGF0ZSwga2V5LCBleHBhbmRWaWV3KSk7CiAgICAgICAgdmFyIHVuc3ViID0gbWFrZV91");
    sb.append("bnN1YigpOwogICAgICAgIHZhciBkb20gPSBtYWtlcihuZXdfc3RhdGUpOwogICAgICAgIGRvbUJ5S2V5");
    sb.append("W2tleV0gPSBkb207CiAgICAgICAgdmlld1VuU3ViQnlLZXlba2V5XSA9IHVuc3ViOwogICAgICAgIHBh");
    sb.append("cmVudERvbS5hcHBlbmQoZG9tKTsKICAgICAgICB2YXIgaXRlbV9kZWx0YSA9IG5ld19zdGF0ZS5kYXRh");
    sb.append("LmRlbHRhOwogICAgICAgIG5ld19zdGF0ZS5kYXRhLmRlbHRhID0ge307CiAgICAgICAgc3Vic2NyaWJl");
    sb.append("X3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgICAg");
    sb.append("ICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGtleSI6IGtl");
    sb.append("eX0pKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBpdGVtX2RlbHRhOwogICAgICB9LAogICAgICAi");
    sb.append("LSI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoa2V5IGluIGRvbUJ5S2V5KSB7CiAgICAgICAg");
    sb.append("ICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQoZG9tQnlLZXlba2V5XSk7CiAgICAgICAgICBkZWxldGUgZG9t");
    sb.append("QnlLZXlba2V5XTsKICAgICAgICB9CiAgICAgICAgaWYgKGtleSBpbiB2aWV3VW5TdWJCeUtleSkgewog");
    sb.append("ICAgICAgICAgZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICAgIGRlbGV0ZSB2");
    sb.append("aWV3VW5TdWJCeUtleVtrZXldOwogICAgICAgIH0KICAgICAgfSwKICAgICAgIn4iOiBmdW5jdGlvbiAo");
    sb.append("b3JkKSB7CiAgICAgICAgdmFyIHZhbHVlVG9TZXQgPSBmYWxzZTsKICAgICAgICAvLyB0aGUgdmFsdWVz");
    sb.append("IGFyZSBmaWxsaW5nIHVwIEFGVEVyIHRoZSB2YWx1ZSB3YXMgc2V0LAogICAgICAgIC8vIHNvIGRldGVj");
    sb.append("dCB0aGUgYWJzZW5jZSBvZiBhIHZhbHVlIGFsb25nIHdpdGggdGhlIGV4aXN0ZW5jZSBvZiBhIHZhbHVl");
    sb.append("CiAgICAgICAgaWYgKCFwYXJlbnREb20udmFsdWUgJiYgcGFyZW50RG9tLnJ4dmFsdWUgIT0gIiIpIHsK");
    sb.append("ICAgICAgICAgIHZhbHVlVG9TZXQgPSBwYXJlbnREb20ucnh2YWx1ZTsKICAgICAgICAgIC8vIHRoaXMg");
    sb.append("dmFsdWUsIHdlIHdhbnQgdG8gcmVzdG9yZSBvbmNlCiAgICAgICAgfQogICAgICAgIG51a2UocGFyZW50");
    sb.append("RG9tKTsKICAgICAgICBpZiAob3JkID09IG51bGwpIHsKICAgICAgICAgIGtpbGwoKTsKICAgICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvcmQubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgICAgIHBhcmVudERvbS5hcHBlbmQoZG9tQnlLZXlbb3JkW2tdXSk7CiAgICAgICAg");
    sb.append("fQogICAgICAgIGlmICh2YWx1ZVRvU2V0KSB7CiAgICAgICAgICBwYXJlbnREb20udmFsdWUgPSB2YWx1");
    sb.append("ZVRvU2V0OwogICAgICAgIH0KICAgICAgICBwYXJlbnREb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQo");
    sb.append("Im9yZGVyZWQiKSk7CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7");
    sb.append("CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLi4gcng6bW9uaXRvcj0ic3RhdGUtcGF0aCIgcng6cmlz");
    sb.append("ZT0iY29tbWFuZHMuLi4iIHJ4OmZhbGw9ImNvbW1hbmRzLi4uIgogIHNlbGYuTU4gPSBmdW5jdGlvbiAo");
    sb.append("ZG9tLCBzdGF0ZSwgbmFtZSwgc2tpcEZpcnN0LCBkZWxheSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9u");
    sb.append("ICh2YWx1ZSkgewogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB2YXIg");
    sb.append("biA9IDA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVy");
    sb.append("JyA/IHZhbHVlIDogcGFyc2VJbnQodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGZhaWxlZFBhcnNpbmdO");
    sb.append("KSB7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmZpcnN0KSB7CiAgICAgICAgICB0aGlzLmF0ID0g");
    sb.append("bjsKICAgICAgICAgIHRoaXMuZmlyc3QgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9");
    sb.append("CiAgICAgICAgaWYgKHRoaXMuYXQgPCBuKSB7CiAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudCgicmlz");
    sb.append("ZSIpOwogICAgICAgICAgZG9tLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlz");
    sb.append("LmF0ID4gbikgewogICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoImZhbGwiKTsKICAgICAgICAgIGRv");
    sb.append("bS5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAgIH0KICAgICAgICB0aGlzLmF0ID0gbjsKICAgICAgfS5i");
    sb.append("aW5kKHRoaXMpLCB0aGlzLmRlbGF5KTsKICAgIH0uYmluZCh7YXQ6LTEsIGZpcnN0OnNraXBGaXJzdCwg");
    sb.append("ZGVsYXk6ZGVsYXkgPyBkZWxheSA6IDEwfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7");
    sb.append("CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLi4gcng6cmVwZWF0PSQ+CiAgc2VsZi5SUCA9IGZ1bmN0");
    sb.append("aW9uIChwYXJlbnREb20sIHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3LCBtYWtlcikgewogICAgdmFyIGl0");
    sb.append("X3N0YXRlID0gc2VsZi5wSUUoc3RhdGUsICIkIiArIG5hbWUsIGV4cGFuZFZpZXcpOwogICAgdmFyIHN1");
    sb.append("YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgbiA9IDA7CiAgICAgIHRyeSB7CiAgICAgICAg");
    sb.append("biA9IHR5cGVvZiAodmFsdWUpID09ICdudW1iZXInID8gdmFsdWUgOiBwYXJzZUludCh2YWx1ZSk7CiAg");
    sb.append("ICAgIH0gY2F0Y2ggKGZhaWxlZFBhcnNpbmdOKSB7CiAgICAgIH0KICAgICAgd2hpbGUgKHRoaXMuYXQg");
    sb.append("PCBuIC0gMSkgewogICAgICAgIHRoaXMuYXQgKys7CiAgICAgICAgdGhpcy50cmFjayArKzsKICAgICAg");
    sb.append("ICB2YXIgbmV3X3N0YXRlID0gZm9yayhzZWxmLnBJRShpdF9zdGF0ZSwgdGhpcy50cmFjayArICIiLCBl");
    sb.append("eHBhbmRWaWV3KSk7CiAgICAgICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgICAgIHZhciBk");
    sb.append("b20gPSBtYWtlcihzZWxmLnBEKG5ld19zdGF0ZSkpOwogICAgICAgIHRoaXMuaXRlbXNbdGhpcy5hdF0g");
    sb.append("PSB7dW5zdWI6dW5zdWIsIGRvbTpkb219OwogICAgICAgIHBhcmVudERvbS5hcHBlbmQoZG9tKTsKICAg");
    sb.append("ICAgICBpZiAoZXhwYW5kVmlldykgewogICAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXRo");
    sb.append("X3RvKG5ld19zdGF0ZS52aWV3LCB7IiRpbmRleCI6IHRoaXMudHJhY2t9KSk7CiAgICAgICAgfQogICAg");
    sb.append("ICAgIHN1YnNjcmliZV9zdGF0ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAgfQogICAgICB3aGlsZSAo");
    sb.append("dGhpcy5hdCA+PSBuICYmIHRoaXMuYXQgPj0gMCkgewogICAgICAgIGZpcmVfdW5zdWIodGhpcy5pdGVt");
    sb.append("c1t0aGlzLmF0XS51bnN1Yik7CiAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNb");
    sb.append("dGhpcy5hdF0uZG9tKTsKICAgICAgICB0aGlzLml0ZW1zW3RoaXMuYXRdID0gbnVsbDsKICAgICAgICBk");
    sb.append("ZWxldGUgdGhpcy5pdGVtc1t0aGlzLmF0XTsKICAgICAgICB0aGlzLmF0LS07CiAgICAgIH0KICAgIH0u");
    sb.append("YmluZCh7aXRlbXM6W10sIGF0Oi0xLCB0cmFjazowfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUs");
    sb.append("IHN1Yik7CiAgfQogIHZhciBmaW5kID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsLCBrZXksIHZhbHVl");
    sb.append("KSB7CiAgICBpZiAoY2hhbm5lbCBpbiBzdGF0ZVsiZGF0YSJdLmNvbm5lY3Rpb24ub3V0c3RhbmRpbmcp");
    sb.append("IHsKICAgICAgdmFyIGFyciA9IHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFu");
    sb.append("bmVsXS5vcHRpb25zOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5sZW5ndGg7IGsrKykgewog");
    sb.append("ICAgICAgIHZhciBzID0gYXJyW2tdOwogICAgICAgIGlmIChrZXkgaW4gcyAmJiBzW2tleV0gPT0gdmFs");
    sb.append("dWUpIHsKICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVs");
    sb.append("bDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH07CgogIHZhciBjdXN0b21z");
    sb.append("ID0ge307CgogIHNlbGYuUFJDVUFDID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgY3VzdG9tc1tu");
    sb.append("YW1lXSA9IGZvbzsKICB9OwoKICBzZWxmLmV4Q0MgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwg");
    sb.append("Y3VzdG9tQ29tbWFuZE5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIGlmIChjdXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgY3Vz");
    sb.append("dG9tc1tjdXN0b21Db21tYW5kTmFtZV0oc3RhdGUsIGRvbSk7CiAgICAgIH0KICAgIH0pOwogIH07Cgog");
    sb.append("IC8vIGN1c3RvbSBldmVudCBvbiBmb3Jtczsgcng6c3VjY2Vzcz0iLi4uIgogIHZhciBmaXJlX3N1Y2Nl");
    sb.append("c3MgPSBmdW5jdGlvbiAoZm9ybSkgewogICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3Vj");
    sb.append("Y2VzcyIpKTsKICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICB9");
    sb.append("OwogIHNlbGYuZmlyZV9zdWNjZXNzID0gZmlyZV9zdWNjZXNzOwoKICAvLyBjdXN0b20gZXZlbnQgb24g");
    sb.append("Zm9ybXM7IHJ4OmZhaWxlZD0iLi4uIgogIHZhciBmaXJlX2ZhaWx1cmUgPSBmdW5jdGlvbiAoZG9tLCBt");
    sb.append("c2cpIHsKICAgIHZhciBlID0gbmV3IEV2ZW50KCJmYWlsdXJlIik7CiAgICBlLm1lc3NhZ2UgPSBtc2c7");
    sb.append("CiAgICBjb25zb2xlLmVycm9yKG1zZyk7CiAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICB9OwogIHNl");
    sb.append("bGYuZmlyZV9mYWlsdXJlID0gZmlyZV9mYWlsdXJlOwoKICBzZWxmLmFDQyA9IGZ1bmN0aW9uIChmb3Jt");
    sb.append("LCBzdGF0ZSwgY3VzdG9tQ29tbWFuZE5hbWUpIHsKICAgIHZhciBzaWduYWwgPSBmdW5jdGlvbiAobXNn");
    sb.append("KSB7CiAgICAgIGlmIChzaWduYWwgPT0gbnVsbCkgewogICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsK");
    sb.append("ICAgICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgbXNnKTsKICAgICAgfQogICAg");
    sb.append("fTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAg");
    sb.append("ICBpZiAoY3VzdG9tQ29tbWFuZE5hbWUgaW4gY3VzdG9tcykgewogICAgICAgIGV2dC5wcmV2ZW50RGVm");
    sb.append("YXVsdCgpOwogICAgICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgICAgY3VzdG9t");
    sb.append("c1tjdXN0b21Db21tYW5kTmFtZV0ob2JqLCBzdGF0ZSwgc2lnbmFsLCBzZWxmKTsKICAgICAgICBmaXJl");
    sb.append("X3N1Y2Nlc3MoZm9ybSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJG");
    sb.append("YWlsZWQgdG8gZmluZCAnIiArIGN1c3RvbUNvbW1hbmROYW1lICsgIiciKTsKICAgICAgfQogICAgfSwg");
    sb.append("dHJ1ZSk7CiAgfTsKCiAgdmFyIG1ha2VfY2hvaWNlX2FycmF5ID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFu");
    sb.append("bmVsKSB7CiAgICB2YXIgY2hvaWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAg");
    sb.append("aWYgKCEoY2hhbm5lbCBpbiBjaG9pY2VzKSkgewogICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAg");
    sb.append("ICB9CiAgICB2YXIgY2hvaWNlID0gY2hvaWNlc1tjaGFubmVsXTsKICAgIHZhciBhcnIgPSBbXTsKICAg");
    sb.append("IGZvciAodmFyIGlkIGluIGNob2ljZSkgewogICAgICBhcnIucHVzaChjaG9pY2VbaWRdKTsKICAgIH0K");
    sb.append("ICAgIHJldHVybiBhcnI7CiAgfQoKICBzZWxmLmV4RklOID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3Rh");
    sb.append("dGUsIGNoYW5uZWwpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIHZhciBhcnIgPSBtYWtlX2Nob2ljZV9hcnJheShzdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZh");
    sb.append("ciBjbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxldGUgc3RhdGUuZGF0YS5jb25uZWN0aW9u");
    sb.append("LmNob2ljZXNbY2hhbm5lbF07CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhj");
    sb.append("aGFubmVsLCB7fSk7CiAgICAgIH07CiAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5wdHIuc2VuZChj");
    sb.append("aGFubmVsLCBhcnIsIHsKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAg");
    sb.append("ICBjbGVhcigpOwogICAgICAgICAgY29uc29sZS5sb2coImZhaWxlZDoiICsgcmVhc29uKTsKICAgICAg");
    sb.append("ICB9LAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBjbGVhcigp");
    sb.append("OwogICAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQuc2VxKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgc2VsZi5GSU4gPSBmdW5jdGlvbiAocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCBjaGFubmVsLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7");
    sb.append("CiAgICB2YXIgZmluYWxpemUgPSB7CiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxz");
    sb.append("ZQogICAgfTsKICAgIGFkZF91bnN1YihmaW5hbGl6ZSk7CgogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9u");
    sb.append("IChzaG93KSB7CiAgICAgIGZpcmVfdW5zdWIoZmluYWxpemUpOwogICAgICBudWtlKHBhcmVudCk7CiAg");
    sb.append("ICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRC");
    sb.append("ZSkgewogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAg");
    sb.append("ICBtYWtlckZhbHNlKHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShz");
    sb.append("dGF0ZSwgZmluYWxpemUpOwogICAgfTsKCiAgICBmaW5hbGl6ZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFu");
    sb.append("bmVsXTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJuOwogICAgICB2YXIgYXJyID0gbWFrZV9jaG9pY2Vf");
    sb.append("YXJyYXkocHJpb3JTdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciByZXN1bHQgPSAoJ21pbicgaW4gb3V0");
    sb.append("ICYmICdtYXgnIGluIG91dCkgPyAob3V0Lm1pbiA8PSBhcnIubGVuZ3RoICYmIGFyci5sZW5ndGggPD0g");
    sb.append("b3V0Lm1heCkgOiB0cnVlOwogICAgICBpZiAoZmluYWxpemUuZXZhbCAhPSByZXN1bHQpIHsKICAgICAg");
    sb.append("ICBmaW5hbGl6ZS5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShmaW5hbGl6ZS5ldmFsKTsKICAg");
    sb.append("ICAgfQogICAgfTsKCiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfY2hvaWNl");
    sb.append("KGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgZmluYWxpemUudXBkYXRlKCk7CiAgICAgIC8vIFRP");
    sb.append("RE86IHJldHVybiB3aGV0aGVyIG9yIG5vdCB0aGlzIG5lZWRzIHRvIGJlIGF4ZWQKICAgICAgcmV0dXJu");
    sb.append("IHRydWU7CiAgICB9KTsKICB9OwoKICB2YXIgZm9ybV9vZiA9IGZ1bmN0aW9uKGRvbSkgewogICAgdmFy");
    sb.append("IG5leHQgPSBkb207CiAgICB3aGlsZSAobmV4dCAhPSBudWxsKSB7CiAgICAgIGlmIChuZXh0LnRhZ05h");
    sb.append("bWUudG9VcHBlckNhc2UoKSA9PSAiRk9STSIpIHsKICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgfQog");
    sb.append("ICAgICBuZXh0ID0gbmV4dC5wYXJlbnRFbGVtZW50OwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoK");
    sb.append("ICB2YXIgcmVnX2V2ZW50ID0gZnVuY3Rpb24gKHN0YXRlLCBkb20sIHR5cGUsIHJ1bm5hYmxlKSB7CiAg");
    sb.append("ICAvLyBUT0RPOiBjb25uZWN0ZWQvZGlzY29ubmVjdGVkIGFzIHNwZWNpYWwgZXZlbnRzIHRvIGNvbnNp");
    sb.append("ZGVyCiAgICBpZiAodHlwZSA9PSAiY2hlY2siIHx8IHR5cGUgPT0gInVuY2hlY2siKSB7CiAgICAgIGRv");
    sb.append("bS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAodGhpcy50");
    sb.append("eXBlID09ICJjaGVjayIgJiYgZG9tLmNoZWNrZWQpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT0gInVuY2hlY2siICYmICFkb20uY2hlY2tlZCkgewogICAg");
    sb.append("ICAgICAgcnVubmFibGUoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh7dHlwZTp0eXBlfSkpOwogICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlID09ICJsb2FkIikgewogICAgICB3aW5kb3cuc2V0VGltZW91dChydW5uYWJs");
    sb.append("ZSwgMSk7CiAgICB9IGVsc2UgaWYgKHR5cGU9PSJzdWJtaXQiIHx8IHR5cGU9PSJzdWJtaXR0ZWQiKSB7");
    sb.append("CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBmb3JtID0gZm9y");
    sb.append("bV9vZihkb20pOwogICAgICAgIGlmIChmb3JtKSB7CiAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVu");
    sb.append("ZXIodHlwZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlu");
    sb.append("cyhkb20pKSB7CiAgICAgICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAg");
    sb.append("fSk7CiAgICAgICAgfQogICAgICB9LCAxKTsKICAgIH0gZWxzZSBpZiAodHlwZS5zdGFydHNXaXRoKCJk");
    sb.append("ZWxheToiKSkgewogICAgICAvLyBkZWxheSB3aWxsIHJ1biBhZnRlciAkZGVsYXlUaW1lTVMgSUYgdGhl");
    sb.append("IGRvbSBlbGVtZW50IGlzIHN0aWxsIHZpc2libGUgdG8gdGhlIGRvY3VtZW50CiAgICAgIHZhciBkZWxh");
    sb.append("eVRpbWVNUyA9IHBhcnNlSW50KHR5cGUuc3Vic3RyaW5nKDYpKTsKICAgICAgd2luZG93LnNldFRpbWVv");
    sb.append("dXQoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsK");
    sb.append("ICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfQogICAgICB9LCBkZWxheVRpbWVNUyk7CiAgICB9");
    sb.append("IGVsc2UgaWYgKHR5cGUgPT0gInNldHRsZSIpIHsKICAgICAgc3RhdGUuZGF0YS50cmVlLmFkZF9vbl9z");
    sb.append("ZXR0bGUoZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gaWYgdGhlIERPTSBoYXMgYmVlbiBhZGRlZCB0byB0");
    sb.append("aGUgYm9keSwgdGhlbiBydW4gdGhlIGNvZGUKICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlu");
    sb.append("cyhkb20pKSB7CiAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg");
    sb.append("ICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0g");
    sb.append("InNldHRsZS1vbmNlIikgewogICAgICBzdGF0ZS5kYXRhLnRyZWUuYWRkX29uX3NldHRsZShmdW5jdGlv");
    sb.append("bigpIHsKICAgICAgICAvLyBpZiB0aGUgRE9NIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LCB0aGVu");
    sb.append("IHJ1biB0aGUgY29kZQogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAg");
    sb.append("ICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7");
    sb.append("CiAgICB9IGVsc2UgewogICAgICBpZiAodHlwZSA9PSAiY2xpY2siKSB7CiAgICAgICAgZG9tLmFkZEV2");
    sb.append("ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIHZhciBmaXJlID0gdHJ1");
    sb.append("ZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBlbCA9IGV2ZW50LnRhcmdldDsKICAgICAg");
    sb.append("ICAgICAgd2hpbGUgKGVsICYmIGZpcmUpIHsKICAgICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRl");
    sb.append("KCdwcmV2ZW50OmNsaWNrJykpIHsKICAgICAgICAgICAgICAgIGZpcmUgPSBmYWxzZTsKICAgICAgICAg");
    sb.append("ICAgICB9CiAgICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGNhdGNoIChleCkgewogICAgICAgICAgfQogICAgICAgICAgaWYgKGZpcmUpIHsKICAg");
    sb.append("ICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBydW5uYWJsZSk7CiAgICAgIH0KICAgIH0K");
    sb.append("ICB9CgoKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHNldDpuYW1lPXZhbHVlIC4u");
    sb.append("LiI+CiAgc2VsZi5iUyA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCB2YWx1ZSkgewogICAgaWYg");
    sb.append("KHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBydW46");
    sb.append("IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgYSBzaW1wbGUgbWVyZ2UKICAgICAg");
    sb.append("ICBtZXJnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgICBvYmpb");
    sb.append("bmFtZV0gPSB2YWx1ZSgpOwogICAgICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBv");
    sb.append("YmopOwogICAgICAgICAgcmV0dXJuIGRlbHRhOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgdmFyIGRlbHRh");
    sb.append("ID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICByZXR1cm4gewogICAgICAgIHJ1bjogZnVu");
    sb.append("Y3Rpb24oKSB7fSwgLy8gZG8gbm90aGluZywgdGhpcyBpcyBhIHNpbXBsZSBtZXJnZQogICAgICAgIG1l");
    sb.append("cmdlOiBmdW5jdGlvbigpIHsgcmV0dXJuIGRlbHRhOyB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIg");
    sb.append("bWVyZ2VfZGVsdGEgPSBmdW5jdGlvbihhLCBiKSB7CiAgICBpZiAodHlwZW9mKGEpID09ICJvYmplY3Qi");
    sb.append("ICYmIHR5cGVvZihiKSA9PSAib2JqZWN0IikgewogICAgICB2YXIgcmVzdWx0ID0ge307CiAgICAgIGZv");
    sb.append("ciAodmFyIGsgaW4gYSkgewogICAgICAgIGlmIChrIGluIGIpIHsKICAgICAgICAgIHJlc3VsdFtrXSA9");
    sb.append("IG1lcmdlX2RlbHRhKGFba10sIGJba10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHRb");
    sb.append("a10gPSBhW2tdOwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IodmFyIGsgaW4gYikgewogICAgICAg");
    sb.append("IGlmICghKGsgaW4gYSkpIHsKICAgICAgICAgIHJlc3VsdFtrXSA9IGJba107CiAgICAgICAgfQogICAg");
    sb.append("ICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICByZXR1cm4gYTsKICB9OwogIHNlbGYuTUQg");
    sb.append("PSBtZXJnZV9kZWx0YTsKCiAgc2VsZi5vbkIgPSBmdW5jdGlvbihkb20sIHR5cGUsIHN0YXRlLCBhcnIp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIHN1");
    sb.append("bSA9IHt9OwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5sZW5ndGg7IGsrKykgewogICAgICAg");
    sb.append("IHZhciBjbWQgPSBhcnJba107CiAgICAgICAgY21kLnJ1bigpOwogICAgICAgIHZhciB0b01lcmdlID0g");
    sb.append("Y21kLm1lcmdlKCkKICAgICAgICBzdW0gPSBtZXJnZV9kZWx0YShzdW0sIHRvTWVyZ2UpOwogICAgICB9");
    sb.append("CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoc3VtKTsKICAgIH0pOwogIH07CgogIC8vIGNob29z");
    sb.append("ZQogIHNlbGYuZXhDSCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCBjaGFubmVsLCBr");
    sb.append("ZXkpIHsKICAgIHZhciBkZWNpZGUgPSB7IHZhbHVlOiBudWxsIH07CiAgICByZWdfZXZlbnQoc3RhdGUs");
    sb.append("IGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzdWx0ID0gZmluZChzdGF0ZSwgY2hh");
    sb.append("bm5lbCwga2V5LCBkZWNpZGUudmFsdWUpOwogICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHsKICAgICAg");
    sb.append("ICB2YXIgY2hvaWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgICAgIGlmICgh");
    sb.append("KGNoYW5uZWwgaW4gY2hvaWNlcykpIHsKICAgICAgICAgIGNob2ljZXNbY2hhbm5lbF0gPSB7fTsKICAg");
    sb.append("ICAgICB9CiAgICAgICAgdmFyIGNob2ljZSA9IGNob2ljZXNbY2hhbm5lbF07CiAgICAgICAgdmFyIHZh");
    sb.append("bEtleSA9IHJlc3VsdFtrZXldOwogICAgICAgIGlmICh2YWxLZXkgaW4gY2hvaWNlKSB7CiAgICAgICAg");
    sb.append("ICBkZWxldGUgY2hvaWNlW3ZhbEtleV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNob2ljZVt2");
    sb.append("YWxLZXldID0gcmVzdWx0OwogICAgICAgIH0KICAgICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ub25j");
    sb.append("aG9pY2VzKGNoYW5uZWwsIGNob2ljZSk7CiAgICAgIH0KICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRl");
    sb.append("LCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0gdmFsdWU7CiAgICB9");
    sb.append("KTsKICB9OwoKICAvLyBkZWNpZGUKICBzZWxmLmV4RCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRl");
    sb.append("LCBuYW1lLCBjaGFubmVsLCBrZXkpIHsKICAgIHZhciBkZWNpZGUgPSB7IHZhbHVlOiBudWxsIH07CiAg");
    sb.append("ICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzdWx0");
    sb.append("ID0gZmluZChzdGF0ZSwgY2hhbm5lbCwga2V5LCBkZWNpZGUudmFsdWUpOwogICAgICBpZiAocmVzdWx0");
    sb.append("ICE9IG51bGwpIHsKICAgICAgICBsZXQgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBz");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwgcmVzdWx0LCB7CiAgICAgICAgICBm");
    sb.append("YWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CgogICAgICAgICAgfSwKICAgICAgICAgIHN1Y2Nlc3M6");
    sb.append("IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTdWNjZXNzfCIgKyBw");
    sb.append("YXlsb2FkLnNlcSArICI7bGF0ZW5jeT0iICsgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpKTsKICAg");
    sb.append("ICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5h");
    sb.append("bWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBkZWNpZGUudmFsdWUgPSB2YWx1ZTsKICAgIH0pOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBmaXJlOmNoYW5uZWwgLi4uIiAu");
    sb.append("Li4+CiAgc2VsZi5vbkZSID0gZnVuY3Rpb24gKHN0YXRlLCBkb20sIHR5cGUsIGNoYW5uZWwpIHsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHN0YXRlLmRhdGEu");
    sb.append("Y29ubmVjdGlvbi5wdHIuc2VuZChjaGFubmVsLCB7fSwgewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJTRU5UICciICsgY2hhbm5lbCArICInIik7CiAgICAg");
    sb.append("ICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjb25zb2xl");
    sb.append("LmxvZygiRkFJTEVEIFRPIEZJUkUgJyIgKyBjaGFubmVsICsgIicgRFVFOiIgKyByZWFzb24pOyAnJwog");
    sb.append("ICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZl");
    sb.append("bnQ9Ii4uLiBmb3JjZS1hdXRoPW5hbWUsdG9rZW4gLi4uIj4KICBzZWxmLm9uRk9SQ0VfQVVUSCA9IGZ1");
    sb.append("bmN0aW9uIChkb20sIHR5cGUsIGlkZW50aXR5TmFtZSwgaWRlbnRpdHkpIHsKICAgIHJlZ19ldmVudChu");
    sb.append("dWxsLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVd");
    sb.append("ID0gaWRlbnRpdHk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRp");
    sb.append("dHlOYW1lLCBpZGVudGl0eSk7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2");
    sb.append("ZW50PSIuLi4gc2V0Om5hbWU9dmFsdWUgLi4uIj4KICBzZWxmLm9uUyA9IGZ1bmN0aW9uIChkb20sIHR5");
    sb.append("cGUsIHN0YXRlLCBuYW1lLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBpZiAodHlwZW9mICh2YWx1ZSkgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIG9ialtuYW1lXSA9IHZhbHVlKCk7CiAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIH0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhz");
    sb.append("dGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0");
    sb.append("YSk7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gdGU6bmFt");
    sb.append("ZSAuLi4iPgogIHNlbGYub25UTSA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCBveCwg");
    sb.append("b3kpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAg");
    sb.append("ICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSB7CiAgICAgICAgeDpldmVudC5jbGllbnRY");
    sb.append("ICsgd2luZG93LnNjcm9sbFggKyBveCwKICAgICAgICB5OmV2ZW50LmNsaWVudFkgKyB3aW5kb3cuc2Ny");
    sb.append("b2xsWSArIG95CiAgICAgIH07CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2Jq");
    sb.append("KTsKICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRlOm5hbWUgLi4uIj4KICBzZWxm");
    sb.append("Lm9uVEUgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSkgewogICAgcmVnX2V2ZW50KHN0");
    sb.append("YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgb2JqID0ge307CiAgICAg");
    sb.append("IG9ialtuYW1lXSA9IGV2ZW50Lm1lc3NhZ2U7CiAgICAgIGlmIChldmVudC5tZXNzYWdlKSB7CiAgICAg");
    sb.append("ICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICAgIHN0YXRlW3N0YXRl");
    sb.append("LmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gUlVO");
    sb.append("VElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHJlc2V0IC4uLiI+CiAgc2VsZi5vUlNUID0gZnVuY3Rp");
    sb.append("b24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5j");
    sb.append("dGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGYgPSBmb3JtX29mKGRvbSk7CiAgICAgIGlmIChmICE9IG51");
    sb.append("bGwpIHsKICAgICAgICBmLnJlc2V0KCk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6");
    sb.append("IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiByZXNldCAuLi4iPgogIHNlbGYub1JMRCA9IGZ1bmN0aW9uIChk");
    sb.append("b20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24g");
    sb.append("KGV2ZW50KSB7CiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RTogPHRhZyAuLiByeDpldmVudD0iLi4uIHN1Ym1pdCAuLi4iPgogIHNlbGYub1NCTVQgPSBmdW5jdGlv");
    sb.append("biAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0");
    sb.append("aW9uIChldmVudCkgewogICAgICB2YXIgZiA9IGZvcm1fb2YoZG9tKTsKICAgICAgaWYgKGYgIT0gbnVs");
    sb.append("bCkgewogICAgICAgIHZhciBlID0gbmV3IFN1Ym1pdEV2ZW50KCdzdWJtaXQnLCB7CiAgICAgICAgICAn");
    sb.append("YnViYmxlcycgICAgOiB0cnVlLAogICAgICAgICAgJ2NhbmNlbGFibGUnIDogdHJ1ZQogICAgICAgIH0p");
    sb.append("OwogICAgICAgIGYuZGlzcGF0Y2hFdmVudChlKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgc2VsZi5v");
    sb.append("TksgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20s");
    sb.append("IHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgY3VyID0gZG9tOwogICAgICB3aGlsZSAo");
    sb.append("Y3VyLnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPSAiTlVDTEVBUiIpIHsKICAgICAgICBjdXIgPSBjdXIu");
    sb.append("cGFyZW50RWxlbWVudDsKICAgICAgfQogICAgICBpZiAoY3VyICE9IG51bGwpIHsKICAgICAgICBudWtl");
    sb.append("KGN1cik7CiAgICAgIH0KICAgIH0pOwogIH07CgoKICBzZWxmLm9VQ0sgPSBmdW5jdGlvbiAoZG9tLCB0");
    sb.append("eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBkb20uY2hlY2tlZCA9IGZhbHNlOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTog");
    sb.append("PHRhZyAuLiByeDpldmVudD0iLi4uIGdvdG86dXJpIC4uLiI+CiAgc2VsZi5vbkdPID0gZnVuY3Rpb24g");
    sb.append("KGRvbSwgdHlwZSwgc3RhdGUsIHZhbHVlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwg");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICB2YXIgdXJpID0gKHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIp");
    sb.append("ID8gdmFsdWUoKSA6IHZhbHVlOwogICAgICBzZWxmLmdvdG8odXJpLCBmYWxzZSk7CiAgICB9KTsKICB9");
    sb.append("OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gdG9nZ2xlOm5hbWUgLi4uIj4KICBz");
    sb.append("ZWxmLm9uVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lKSB7CiAgICB2YXIgY2FwdHVy");
    sb.append("ZWQgPSB7IHZhbHVlOiBmYWxzZSB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSAhY2FwdHVyZWQudmFs");
    sb.append("dWU7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGUu");
    sb.append("dmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwg");
    sb.append("ZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWUgPT0gdHJ1ZTsKICAg");
    sb.append("IH0pOwogIH07CgogIHZhciBvcmRlcl90b2dnbGUgPSBmdW5jdGlvbihwcmlvciwgdmFsKSB7CiAgICB2");
    sb.append("YXIgcGFydHMgPSBwcmlvci5zcGxpdCgiLCIpOwogICAgdmFyIHByZWZpeCA9ICcnOwogICAgdmFyIG5l");
    sb.append("eHQgPSBbIiJdOwogICAgZm9yICh2YXIgayA9IDA7IGsgPCBwYXJ0cy5sZW5ndGg7IGsrKykgewogICAg");
    sb.append("ICBpZiAocGFydHNba10gPT0gIiIpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIGlmICh2");
    sb.append("YWwgPT0gcGFydHNba10pIHsKICAgICAgICBwcmVmaXggPSAnLSc7CiAgICAgIH0gZWxzZSBpZiAoIi0i");
    sb.append("ICsgdmFsID09cGFydHNba10pIHsKICAgICAgICBwcmVmaXggPSAnJzsKICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICBuZXh0LnB1c2gocGFydHNba10pOwogICAgICB9CiAgICB9CiAgICBuZXh0WzBdID0gcHJlZml4");
    sb.append("ICsgdmFsOwogICAgcmV0dXJuIG5leHQuam9pbigiLCIpOwogIH0KCiAgLy8gUlVOVElNRTogPHRhZyAu");
    sb.append("LiByeDpldmVudD0iLi4uIG9yZGVyLXRvZ2dsZTpuYW1lPXZhbCAuLi4iPgogIHNlbGYub25PVCA9IGZ1");
    sb.append("bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCB2YWwpIHsKICAgIHZhciBjYXB0dXJlZCA9IHsg");
    sb.append("dmFsdWU6ICIiIH07CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IG9yZGVyX3RvZ2dsZShjYXB0dXJlZC52");
    sb.append("YWx1ZSwgdmFsKTsKICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAg");
    sb.append("ICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICAgIHN1YnNj");
    sb.append("cmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGNhcHR1cmVkLnZhbHVlID0g");
    sb.append("dmFsdWU7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZGVs");
    sb.append("dGE6bmFtZT1kaWZmIiAuLi4iPgogIHNlbGYub25EID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUs");
    sb.append("IG5hbWUsIGRpZmYpIHsKICAgIHZhciBjYXB0dXJlZCA9IHsgdmFsdWU6IDAgfTsKICAgIHJlZ19ldmVu");
    sb.append("dChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAg");
    sb.append("b2JqW25hbWVdID0gY2FwdHVyZWQudmFsdWUgKyBkaWZmOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3Rv");
    sb.append("KHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRl");
    sb.append("bHRhKTsKICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsK");
    sb.append("ICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09ICJudW1iZXIiKSB7CiAgICAgICAgY2FwdHVyZWQudmFs");
    sb.append("dWUgPSB2YWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdmFsID0gcGFyc2VGbG9hdCh2YWx1");
    sb.append("ZSk7CiAgICAgICAgaWYgKCFpc05hTih2YWwpKSB7CiAgICAgICAgICBjYXB0dXJlZC52YWx1ZSA9IHZh");
    sb.append("bDsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH07CiAgc2VsZi5DU0VOID0gZnVuY3Rpb24gKHBh");
    sb.append("cmVudCwgcHJpb3JTdGF0ZSwgZXZhbFN0YXRlLCBjaGFubmVsLCBrZXksIG5hbWUsIHNob3VsZEJlLCBf");
    sb.append("ZXhwYW5kLCBtYWtlclRydWUsIG1ha2VyRmFsc2UpIHsKICAgIHZhciBjaG9zZW4gPSB7CiAgICAgIHZh");
    sb.append("bHVlOiAiIiwKICAgICAgb3duZXI6IHBhcmVudCwKICAgICAgc2hvd246IGZhbHNlLAogICAgICBldmFs");
    sb.append("OiBudWxsCiAgICB9OwogICAgYWRkX3Vuc3ViKGNob3Nlbik7CiAgICB2YXIgY2hhbmdlID0gZnVuY3Rp");
    sb.append("b24gKHNob3cpIHsKICAgICAgZmlyZV91bnN1YihjaG9zZW4pOwogICAgICBudWtlKHBhcmVudCk7CiAg");
    sb.append("ICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRC");
    sb.append("ZSkgewogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAg");
    sb.append("ICBtYWtlckZhbHNlKHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShz");
    sb.append("dGF0ZSwgY2hvc2VuKTsKICAgIH07CgogICAgY2hvc2VuLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgdmFyIG91dCA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLm91dHN0YW5kaW5nW2NoYW5uZWxd");
    sb.append("OwogICAgICBpZiAoIShvdXQpKSByZXR1cm47CgogICAgICB2YXIgY2hvaWNlcyA9IHByaW9yU3RhdGUu");
    sb.append("ZGF0YS5jb25uZWN0aW9uLmNob2ljZXM7CiAgICAgIGlmICghKGNoYW5uZWwgaW4gY2hvaWNlcykpIHsK");
    sb.append("ICAgICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICAgIH0KICAgICAgdmFyIGNob2ljZSA9IGNo");
    sb.append("b2ljZXNbY2hhbm5lbF07CiAgICAgIHZhciByZXN1bHQgPSBjaG9zZW4udmFsdWUgaW4gY2hvaWNlOwog");
    sb.append("ICAgICBpZiAoY2hvc2VuLmV2YWwgIT0gcmVzdWx0KSB7CiAgICAgICAgY2hvc2VuLmV2YWwgPSByZXN1");
    sb.append("bHQ7CiAgICAgICAgY2hhbmdlKGNob3Nlbi5ldmFsKTsKICAgICAgfQogICAgfTsKCiAgICBwcmlvclN0");
    sb.append("YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfY2hvaWNlKGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgY2hvc2VuLnVwZGF0ZSgpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwoKICAgIHN1YnNj");
    sb.append("cmliZShldmFsU3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjaG9zZW4udmFsdWUg");
    sb.append("PSB2YWx1ZTsKICAgICAgY2hvc2VuLnVwZGF0ZSgpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5ERSA9IGZ1");
    sb.append("bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIGV2YWxTdGF0ZSwgY2hhbm5lbCwga2V5LCBuYW1lLCBz");
    sb.append("aG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgZGVjaWRlID0g");
    sb.append("ewogICAgICB2YWx1ZTogIiIsCiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZSwK");
    sb.append("ICAgICAgZXZhbDogbnVsbAogICAgfTsKICAgIGFkZF91bnN1YihkZWNpZGUpOwogICAgdmFyIGNoYW5n");
    sb.append("ZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAgIGZpcmVfdW5zdWIoZGVjaWRlKTsKICAgICAgbnVrZShw");
    sb.append("YXJlbnQpOwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAoc2hvdyA9");
    sb.append("PT0gc2hvdWxkQmUpIHsKICAgICAgICBtYWtlclRydWUocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3Jp");
    sb.append("YmVfc3RhdGUoc3RhdGUsIGRlY2lkZSk7CiAgICB9OwoKICAgIGRlY2lkZS51cGRhdGUgPSBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIHZhciByZXN1bHQgPSBmaW5kKHByaW9yU3RhdGUsIGNoYW5uZWwsIGtleSwgZGVj");
    sb.append("aWRlLnZhbHVlKSAhPSBudWxsOwogICAgICBpZiAoZGVjaWRlLmV2YWwgIT0gcmVzdWx0KSB7CiAgICAg");
    sb.append("ICAgZGVjaWRlLmV2YWwgPSByZXN1bHQ7CiAgICAgICAgY2hhbmdlKGRlY2lkZS5ldmFsKTsKICAgICAg");
    sb.append("fQogICAgfTsKCiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmUoY2hhbm5lbCwg");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICBkZWNpZGUudXBkYXRlKCk7CiAgICAgIC8vIFRPRE86IHJldHVybiB3");
    sb.append("aGV0aGVyIG9yIG5vdCB0aGlzIG5lZWRzIHRvIGJlIGF4ZWQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9");
    sb.append("KTsKCiAgICBzdWJzY3JpYmUoZXZhbFN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAg");
    sb.append("ZGVjaWRlLnZhbHVlID0gdmFsdWU7CiAgICAgIGRlY2lkZS51cGRhdGUoKTsKICAgIH0pOwogIH07Cgog");
    sb.append("IHZhciBjb21tb25JZiA9IGZ1bmN0aW9uKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4");
    sb.append("cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsKICAgIHZhciB1bnN1");
    sb.append("YiA9IG1ha2VfdW5zdWIoKTsKICAgIGlmIChmb3JjZUhpZGluZykgewogICAgICBwYXJlbnQuc3R5bGUu");
    sb.append("ZGlzcGxheSA9ICJub25lIjsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAg");
    sb.append("dmFyIHNob3cgPSAodmFsdWUgPyB0cnVlIDogZmFsc2UpID09PSBzaG91bGRCZTsKICAgICAgaWYgKHRo");
    sb.append("aXMuc2hvd24gPT0gc2hvdykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnNob3du");
    sb.append("ID0gc2hvdzsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAg");
    sb.append("dmFyIG5leHQgPSBzZWxmLnBEKGZvcmsob3JpZ2luYWxTdGF0ZSkpOwogICAgICBpZiAoc2hvdykgewog");
    sb.append("ICAgICAgIGlmIChmb3JjZUhpZGluZykgewogICAgICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAi");
    sb.append("IjsKICAgICAgICB9CiAgICAgICAgbWFrZXJUcnVlKHBhcmVudCwgbmV4dCk7CiAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgaWYgKGZvcmNlSGlkaW5nKSB7CiAgICAgICAgICBwYXJlbnQuc3R5bGUuZGlzcGxheSA9");
    sb.append("ICJub25lIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIG5leHQp");
    sb.append("OwogICAgICAgIH0KICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUobmV4dCwgdW5zdWIpOwogICAg");
    sb.append("fS5iaW5kKHsgc2hvd246ICdubycgfSk7CiAgfQoKICAvLyBSVU5USU1FIHwgcng6aWYgLyByeDppZm5v");
    sb.append("dCA9ICJwYXRoMT1wYXRoMiIKICBzZWxmLklGZXEgPSBmdW5jdGlvbiAocGFyZW50LCBvcmlnaW5hbFN0");
    sb.append("YXRlLCBxdWVyeVN0YXRlTGVmdCwgbmFtZUxlZnQsIHF1ZXJ5U3RhdGVSaWdodCwgbmFtZVJpZ2h0LCBz");
    sb.append("aG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZykgewog");
    sb.append("ICAgdmFyIGNvbW1vbiA9IHtsZWZ0OmZhbHNlLCByaWdodDp0cnVlfTsKICAgIGNvbW1vbi5zID0gY29t");
    sb.append("bW9uSWYocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVl");
    sb.append("LCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZyk7CiAgICBjb21tb24uayA9IGRlYm91bmNlKDUsIGZ1bmN0");
    sb.append("aW9uKCkgewogICAgICB0aGlzLnModGhpcy5sZWZ0ID09IHRoaXMucmlnaHQpOwogICAgfS5iaW5kKGNv");
    sb.append("bW1vbikpOwogICAgc3Vic2NyaWJlKHF1ZXJ5U3RhdGVMZWZ0LCBuYW1lTGVmdCwgZnVuY3Rpb24gKGxl");
    sb.append("ZnQpIHsKICAgICAgdGhpcy5sZWZ0ID0gbGVmdDsKICAgICAgdGhpcy5rKCk7CiAgICB9LmJpbmQoY29t");
    sb.append("bW9uKSkKICAgIHN1YnNjcmliZShxdWVyeVN0YXRlUmlnaHQsIG5hbWVSaWdodCwgZnVuY3Rpb24gKHJp");
    sb.append("Z2h0KSB7CiAgICAgIHRoaXMucmlnaHQgPSByaWdodDsKICAgICAgdGhpcy5rKCk7CiAgICB9LmJpbmQo");
    sb.append("Y29tbW9uKSk7CiAgfTsKCiAgLyoqIHRoZSBhYm92ZSBzcGVha3MgdG8gYSBkZWVwIHBhdHRlcm4uIFdl");
    sb.append("IGNvdWxkIHRha2UgYW55IGV4cHJlc3Npb24gYW5kIHRoZW4gbGluZWFyaXplIGl0IGludG8gcmVhY3Rp");
    sb.append("dmUgcGFydHMsIGFuZCB0aGVuIGFzc2VtYmxlIGEgc3RhdGVtZW50IHN0YXRlbWVudCBvbiB0aGUgZmx5");
    sb.append("LiBXZSBzaG91bGQgbG9vayBpbnRvIHVzaW5nIHRoZSBjb25kaXRpb24gbGFuZ3VhZ2UgZm9yIHRoaXMg");
    sb.append("Ki8KCiAgLy8gUlVOVElNRSB8IHJ4OmlmIC8gcng6aWZub3QgPSAicGF0aCIKICBzZWxmLklGID0gZnVu");
    sb.append("Y3Rpb24gKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgcXVlcnlTdGF0ZSwgbmFtZSwgc2hvdWxkQmUsIGV4");
    sb.append("cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsKICAgIHN1YnNjcmli");
    sb.append("ZShxdWVyeVN0YXRlLCBuYW1lLCBjb21tb25JZihwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHNob3VsZEJl");
    sb.append("LCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSk7CiAgfTsKCiAg");
    sb.append("Ly8vIFJVTlRJTUUgfCByeDphY3Rpb249Y29weTpwYXRoCiAgc2VsZi5hQ1AgPSBmdW5jdGlvbiAoZm9y");
    sb.append("bSwgc3RhdGUsIG5hbWUpIHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rp");
    sb.append("b24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIG9iaiA9IGdldF9m");
    sb.append("b3JtKGZvcm0sIHt9KTsKICAgICAgaWYgKG5hbWUgIT0gIi4iICYmIG5hbWUgIT0gIiIpIHsKICAgICAg");
    sb.append("ICB2YXIgbm8gPSB7fTsKICAgICAgICBub1tuYW1lXSA9IG9iajsKICAgICAgICBvYmogPSBubzsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRl");
    sb.append("LnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICB9LCB0");
    sb.append("cnVlKTsKICB9OwoKICBzZWxmLlZTUCA9IGZ1bmN0aW9uKHN0YXRlLCB2YXJzKSB7CiAgICB2YXIgc20g");
    sb.append("PSB7fTsKICAgIHNtLnZhcnMgPSB2YXJzOwogICAgc20ubGFzdCA9IHt9OwogICAgc20ucGFyYW1zID0g");
    sb.append("IiI7CiAgICBzbS5tb2RlID0gInJlcGxhY2UiOwogICAgc20ucGluZyA9IGRlYm91bmNlKDUwMCwgZnVu");
    sb.append("Y3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhp");
    sb.append("cy52YXJzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIGFyZyA9IHRoaXMudmFyc1trXTsKICAgICAg");
    sb.append("ICBpZiAoYXJnIGluIHRoaXMubGFzdCkgewogICAgICAgICAgYXJncy5wdXNoKGFyZyArICI9IiArIHRo");
    sb.append("aXMubGFzdFthcmddKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHJlc3VsdCA9ICI/IiArYXJn");
    sb.append("cy5qb2luKCImIik7CiAgICAgIGlmIChyZXN1bHQgIT0gIj8iICYmIHdpbmRvdy5sb2NhdGlvbi5zZWFy");
    sb.append("Y2ggIT09IHJlc3VsdCkgewogICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICBvYmoudmlld2VyX3Nl");
    sb.append("YXJjaF9xdWVyeSA9IHJlc3VsdDsKICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcs");
    sb.append("IG9iaik7CiAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgICAgdHJ5IHsK");
    sb.append("ICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgIiIsIGZpeEhyZWYod2luZG93");
    sb.append("LmxvY2F0aW9uLnBhdGhuYW1lICsgcmVzdWx0KSk7CiAgICAgICAgfSBjYXRjaChmYWlsZWRUb1JlcGxh");
    sb.append("Y2VTdGF0ZSkgewoKICAgICAgICB9CiAgICAgIH0KICAgIH0uYmluZChzbSkpOwogICAgc3RhdGUudmll");
    sb.append("dy50cmVlLnN1YnNjcmliZShmdW5jdGlvbihzKSB7CiAgICAgIHRoaXMubGFzdCA9IHM7CiAgICAgIHRo");
    sb.append("aXMucGluZygpOwogICAgfS5iaW5kKHNtKSk7CiAgfTsKCiAgc2VsZi5GID0gZnVuY3Rpb24obyxrKSB7");
    sb.append("CiAgICBpZiAoayBpbiBvKSB7CiAgICAgIHJldHVybiBvW2tdOwogICAgfQogICAgcmV0dXJuICIiOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUUgfCA8aW5wdXQgLi4uIHJ4OnN5bmM9cGF0aCAuLi4+CiAgc2VsZi5TWSA9");
    sb.append("IGZ1bmN0aW9uIChlbCwgc3RhdGUsIG5hbWUsIG1zKSB7CiAgICB2YXIgdHlwZSA9ICgidHlwZSIgaW4g");
    sb.append("ZWwpID8gZWwudHlwZS50b1VwcGVyQ2FzZSgpIDogInRleHQiOwogICAgdmFyIHNpZ25hbCA9IGZ1bmN0");
    sb.append("aW9uICh2YWx1ZSkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwog");
    sb.append("ICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcu");
    sb.append("dHJlZS51cGRhdGUoZGVsdGEpOwogICAgICBpZiAodGhpcy5kZWR1cGUgIT0gdmFsdWUpIHsKICAgICAg");
    sb.append("ICB0aGlzLmRlZHVwZSA9IHZhbHVlOwogICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJh");
    sb.append("ZnRlcnN5bmMiKSk7CiAgICAgIH0KICAgIH0uYmluZCh7ZGVkdXBlOiIifSk7CiAgICBpZiAodHlwZSA9");
    sb.append("PSAiQ0hFQ0tCT1giKSB7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGRlYm91bmNl");
    sb.append("KG1zLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2Up");
    sb.append("OwogICAgICB9KSk7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBz");
    sb.append("aWduYWwoZWwuY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIGlm");
    sb.append("ICh0eXBlID09ICJSQURJTyIpIHsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZGVi");
    sb.append("b3VuY2UobXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAg");
    sb.append("c2lnbmFsKGVsLnZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0gZWxzZSB7CiAgICAgIHZh");
    sb.append("ciBmID0gZGVib3VuY2UobXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwudmFsdWUpOwog");
    sb.append("ICAgICB9KTsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZik7CiAgICAgIGVsLmFk");
    sb.append("ZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZikKICAgICAgZWwub25rZXl1cCA9IGVsLm9uY2hhbmdlOwog");
    sb.append("ICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLnZhbHVl");
    sb.append("KTsKICAgICAgfSwgNSk7CiAgICB9CiAgfTsKCiAgdmFyIGZpcnN0T2NjdXIgPSBmdW5jdGlvbihhLCBi");
    sb.append("KSB7CiAgICBpZiAoYSA+IDAgJiYgYiA+IDApIHsKICAgICAgcmV0dXJuIE1hdGgubWluKGEsIGIpOwog");
    sb.append("ICAgfQogICAgaWYgKGEgPiAwKSB7CiAgICAgIHJldHVybiBhOwogICAgfSBlbHNlIHsKICAgICAgcmV0");
    sb.append("dXJuIGI7CiAgICB9CiAgfTsKICAvLyBIRUxQRVIgfCBleHRyYWN0IGFsbCB0aGUgaW5wdXRzIGZyb20g");
    sb.append("dGhlIGdpdmVuIGVsZW1lbnQgYW5kIGJ1aWxkIGFuIG9iamVjdAogIHZhciBidWlsZF9vYmogPSBmdW5j");
    sb.append("dGlvbiAoZWwsIG9ialRvSW5zZXJ0SW50bywgcGFzc3dvcmRzLCBpc1Jvb3QpIHsKICAgIGlmIChlbC50");
    sb.append("YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIkZPUk0iICYmICFpc1Jvb3QpIHsKICAgICAgLy8gZG9uJ3Qg");
    sb.append("Y2FyZSBhYm91dCBuZXN0ZWQgZm9ybXMKICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIHVwcGVyVGFn");
    sb.append("ID0gZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpOwogICAgdmFyIGp1c3RTZXQgPSB1cHBlclRhZyA9PSAi");
    sb.append("VEVYVEFSRUEiIHx8IHVwcGVyVGFnID09ICJTRUxFQ1QiOwogICAgdmFyIGlzSW5wdXRCb3ggPSB1cHBl");
    sb.append("clRhZyA9PSAiSU5QVVQiOwogICAgdmFyIGlzRmllbGRTZXQgPSB1cHBlclRhZyA9PSAiRklFTERTRVQi");
    sb.append("OwogICAgdmFyIGlzUHVsbCA9IHVwcGVyVGFnID09ICJQVUxMVkFMVUUiOwogICAgdmFyIGhhc05hbWUg");
    sb.append("PSAibmFtZSIgaW4gZWw7CiAgICB2YXIgaW5zZXJ0QXQgPSBvYmpUb0luc2VydEludG87CiAgICAvLyB0");
    sb.append("aGUgYXBwbHkgZnVuY3Rpb24gaXMgaG93IHdlIGluamVjdCB0aGUgdmFsdWUgaW50byB0aGUgb2JqZWN0");
    sb.append("CiAgICB2YXIgYXBwbHkgPSBmdW5jdGlvbiAodmFsKSB7IH07CgogICAgdmFyIG5hbWUgPSAiIjsKICAg");
    sb.append("IGlmIChoYXNOYW1lICYmIChqdXN0U2V0IHx8IGlzSW5wdXRCb3ggfHwgaXNGaWVsZFNldCB8fCBpc1B1");
    sb.append("bGwpKSB7CiAgICAgIG5hbWUgPSBlbC5uYW1lOwogICAgICBpZiAobmFtZSA9PSAiIikgeyAvLyB0aGlz");
    sb.append("IGlzIGEgc3BlY2lhbCBuYW1lIGZvciB0aGluZ3MgdGhhdCBkb24ndCBnZXQgcGlja2VkIHVwCiAgICAg");
    sb.append("ICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5p");
    sb.append("bmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgd2hpbGUgKGtEb3RPclNsYXNoID4g");
    sb.append("MCkgewogICAgICAgIHZhciBwYXIgPSBuYW1lLnN1YnN0cmluZygwLCBrRG90T3JTbGFzaCk7CiAgICAg");
    sb.append("ICAgaWYgKCEocGFyIGluIGluc2VydEF0KSkgewogICAgICAgICAgaW5zZXJ0QXRbcGFyXSA9IHt9Owog");
    sb.append("ICAgICAgIH0KICAgICAgICBpbnNlcnRBdCA9IGluc2VydEF0W3Bhcl07CiAgICAgICAgbmFtZSA9IG5h");
    sb.append("bWUuc3Vic3RyaW5nKGtEb3RPclNsYXNoICsgMSk7CiAgICAgICAga0RvdE9yU2xhc2ggPSBmaXJzdE9j");
    sb.append("Y3VyKG5hbWUuaW5kZXhPZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIH0KCiAgICAgIGlm");
    sb.append("IChuYW1lLmVuZHNXaXRoKCIrIikpIHsKICAgICAgICAvLyBoZXJlLCB3ZSBwdXNoIHRoZSB2YWx1ZSBp");
    sb.append("bnRvIHRoZSBhcnJheQogICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCBuYW1lLmxlbmd0aCAt");
    sb.append("IDEpOwogICAgICAgIGFwcGx5ID0gZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIGlmICghKG5hbWUgaW4g");
    sb.append("aW5zZXJ0QXQpKSB7CiAgICAgICAgICAgIGluc2VydEF0W25hbWVdID0gW3ZdOwogICAgICAgICAgfSBl");
    sb.append("bHNlIHsKICAgICAgICAgICAgaW5zZXJ0QXRbbmFtZV0ucHVzaCh2KTsKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9OwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGhlcmUgd2Ugc2V0IHRoZSBvYmplY3QKICAgICAg");
    sb.append("ICBhcHBseSA9IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICBpbnNlcnRBdFtuYW1lXSA9IHY7CiAgICAg");
    sb.append("ICAgfTsKICAgICAgfQogICAgfQoKICAgIGlmIChpc1B1bGwpIHsKICAgICAgYXBwbHkoZWwucHVsbCgp");
    sb.append("KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmIChqdXN0U2V0KSB7CiAgICAgIGFwcGx5KGVsLnZh");
    sb.append("bHVlKTsKICAgIH0gZWxzZSBpZiAoaXNGaWVsZFNldCkgewogICAgICB2YXIgbmV4dE9iamVjdCA9IHt9");
    sb.append("OwogICAgICBpZiAoImNoaWxkcmVuIiBpbiBlbCkgewogICAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJl");
    sb.append("bjsKICAgICAgICB2YXIgbiA9IGFyci5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBu");
    sb.append("OyBrKyspIHsKICAgICAgICAgIHZhciBjaCA9IGVsLmNoaWxkcmVuW2tdOwogICAgICAgICAgYnVpbGRf");
    sb.append("b2JqKGNoLCBuZXh0T2JqZWN0LCBwYXNzd29yZHMsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAg");
    sb.append("ICAgYXBwbHkobmV4dE9iamVjdCk7CiAgICB9IGVsc2UgaWYgKGlzSW5wdXRCb3gpIHsKICAgICAgdmFy");
    sb.append("IHR5cGUgPSAoInR5cGUiIGluIGVsKSA/IGVsLnR5cGUudG9VcHBlckNhc2UoKSA6ICJURVhUIjsKICAg");
    sb.append("ICAgaWYgKHR5cGUgPT0gIlNVQk1JVCIgfHwgdHlwZSA9PSAiUkVTRVQiKSByZXR1cm47CiAgICAgIGlm");
    sb.append("ICgodHlwZSA9PSAiUEFTU1dPUkQiIHx8IG5hbWUgPT0gInBhc3N3b3JkIiB8fCBuYW1lID09ICJjb25m");
    sb.append("aXJtLXBhc3N3b3JkIiB8fCBuYW1lID09ICJuZXdfcGFzc3dvcmQiIHx8IG5hbWUgPT0gImNvbmZpcm0t");
    sb.append("bmV3X3Bhc3N3b3JkIikpIHsKICAgICAgICBwYXNzd29yZHNbbmFtZV0gPSBlbC52YWx1ZTsKICAgICAg");
    sb.append("ICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT0gIkNIRUNLQk9YIikgewogICAgICAgIGFw");
    sb.append("cGx5KGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJB");
    sb.append("RElPIikgewogICAgICAgIGlmIChlbC5jaGVja2VkKSB7CiAgICAgICAgICBhcHBseShlbC52YWx1ZSk7");
    sb.append("CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFwcGx5KGVsLnZhbHVlKTsKICAgICAgfQog");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgaWYgKCJjaGlsZHJlbiIgaW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0g");
    sb.append("ZWwuY2hpbGRyZW47CiAgICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAg");
    sb.append("ICAgIGJ1aWxkX29iaihjaCwgb2JqVG9JbnNlcnRJbnRvLCBwYXNzd29yZHMsIGZhbHNlKTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLkJ1aWxkRm9ybU9iamVjdCA9IGZ1bmN0aW9uKGZv");
    sb.append("cm0pIHsKICAgIHZhciBvYmogPSB7fTsKICAgIGJ1aWxkX29iaihmb3JtLCBvYmosIGZhbHNlLCB0cnVl");
    sb.append("KTsKICAgIHJldHVybiBvYmo7CiAgfTsKCiAgLy8gSEVMUEVSIHwgcmV0dXJuIGFuIG9iamVjdCBvZiBh");
    sb.append("bGwgdGhlIGlucHV0cyBvZiB0aGUgZ2l2ZW4gZm9ybSBlbGVtZW50CiAgdmFyIGdldF9mb3JtID0gZnVu");
    sb.append("Y3Rpb24gKGZvcm0sIHBhc3N3b3JkcykgewogICAgdmFyIG9iaiA9IHt9OwogICAgYnVpbGRfb2JqKGZv");
    sb.append("cm0sIG9iaiwgcGFzc3dvcmRzLCB0cnVlKTsKICAgIHJldHVybiBvYmo7CiAgfTsKCiAgLy8gPC4uLiBy");
    sb.append("eDp3cmFwPWNvbnN0ID4KICB2YXIgY3VzdG9tc19jb21wb25lbnRzID0ge307CiAgc2VsZi5wcm92aWRl");
    sb.append("Q3VzdG9tQ29tcG9uZW50ID0gZnVuY3Rpb24obmFtZSwgZm9vKSB7CiAgICBjdXN0b21zX2NvbXBvbmVu");
    sb.append("dHNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgLi4uIHJ4OmN1c3RvbT0iPyIg");
    sb.append("cG9ydDokbmFtZT0kb3V0cHV0IC4uLiA+Li4uPC90YWc+IHwgYXNzZW1ibGUgYSB3cml0ZXIgb2JqZWN0");
    sb.append("CiAgc2VsZi5XWCA9IGZ1bmN0aW9uKGluc3RydWN0aW9ucykgewogICAgdmFyIHdyaXRlciA9IHt9Owog");
    sb.append("ICAgZm9yICh2YXIgayA9IDA7IGsgKyAyIDwgaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaysrKSB7CiAgICAg");
    sb.append("IHZhciBvYmogPSB7fTsKICAgICAgd3JpdGVyW2luc3RydWN0aW9uc1trXV0gPSBmdW5jdGlvbih2YWx1");
    sb.append("ZSkgewogICAgICAgIHZhciBzID0gdGhpczsKICAgICAgICBzLndbcy5rXSA9IHZhbHVlOwogICAgICAg");
    sb.append("IHMudC51cGRhdGUocy5kKTsKICAgICAgfS5iaW5kKHsKICAgICAgICBkOnBhdGhfdG8oaW5zdHJ1Y3Rp");
    sb.append("b25zWzFdLnZpZXcsIG9iaiksCiAgICAgICAgdzogb2JqLAogICAgICAgIGs6IGluc3RydWN0aW9uc1sy");
    sb.append("XSwKICAgICAgICB0OiBpbnN0cnVjdGlvbnNbMV0udmlldy50cmVlCiAgICAgIH0pOwogICAgfQogICAg");
    sb.append("cmV0dXJuIHdyaXRlcjsKICB9OwogIHNlbGYuQyA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCBy");
    sb.append("eG9iaiwgd3JpdGVyLCBjaGlsZE1ha2VyV2l0aENhc2UpIHsKICAgIHZhciBvYmogPSB7CiAgICAgIGRv");
    sb.append("bTogZG9tLAogICAgICBzdGF0ZTogc3RhdGUsCiAgICAgIGlucHV0czogcnhvYmosCiAgICAgIG91dHB1");
    sb.append("dHM6IHdyaXRlciwKICAgICAgbWFrZXI6IGNoaWxkTWFrZXJXaXRoQ2FzZSwKICAgICAgZnJhbWV3b3Jr");
    sb.append("OiBzZWxmCiAgICB9OwogICAgaWYgKG5hbWUgaW4gY3VzdG9tc19jb21wb25lbnRzKSB7CiAgICAgIGN1");
    sb.append("c3RvbXNfY29tcG9uZW50c1tuYW1lXShvYmopOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5lcnJv");
    sb.append("cigiZmFpbGVkIHRvIGZpbmQgY3VzdG9tIGNvbXBvbmVudDogJyIgKyBuYW1lICsgIiciKTsKICAgIH0K");
    sb.append("ICB9OwoKICB2YXIgd3JhcHBlcnMgPSB7fTsKICB2YXIgd3JhcHBlcnNfb25sb2FkID0ge307IC8vIFRP");
    sb.append("RE86IHN0dWR5IGlmIHRoaXMgY2FuIGJlIHJlbW92ZWQKICBzZWxmLlBSV1AgPSBmdW5jdGlvbiAobmFt");
    sb.append("ZSwgZm9vKSB7CiAgICB3cmFwcGVyc1tuYW1lXSA9IGZvbzsKICAgIGlmIChuYW1lIGluIHdyYXBwZXJz");
    sb.append("X29ubG9hZCkgewogICAgICB2YXIgdG9sb2FkID0gd3JhcHBlcnNfb25sb2FkW25hbWVdOwogICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IHRvbG9hZC5sZW5ndGg7IGsrKykgewogICAgICAgIHRvbG9hZFtrXSgp");
    sb.append("OwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0ID4KICBzZWxmLldQID0g");
    sb.append("ZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UpIHsKICAg");
    sb.append("IGlmIChuYW1lIGluIHdyYXBwZXJzKSB7CiAgICAgIHdyYXBwZXJzW25hbWVdKGRvbSwgc3RhdGUsIHJ4");
    sb.append("b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UsIHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGxvYWRl");
    sb.append("ciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3cmFwcGVyc1tuYW1lXShkb20sIHN0YXRlLCByeG9iaiwg");
    sb.append("Y2hpbGRNYWtlcldpdGhDYXNlLCBzZWxmKTsKICAgICAgfTsKICAgICAgaWYgKG5hbWUgaW4gd3JhcHBl");
    sb.append("cnNfb25sb2FkKSB7CiAgICAgICAgd3JhcHBlcnNfb25sb2FkW25hbWVdLnB1c2gobG9hZGVyKTsKICAg");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgICB3cmFwcGVyc19vbmxvYWRbbmFtZV0gPSBbbG9hZGVyXTsKICAgICAg");
    sb.append("fQogICAgfQogIH07CgogIHZhciBiZWhhdmlvcnMgPSB7fTsKICBzZWxmLmRlZmluZUJlaGF2aW9yID0g");
    sb.append("ZnVuY3Rpb24obmFtZSwgYmVoYXZpb3IpIHsKICAgIGlmICh0eXBlb2YoYmVoYXZpb3IpID09ICdmdW5j");
    sb.append("dGlvbicpIHsKICAgICAgYmVoYXZpb3JzW25hbWVdID0gYmVoYXZpb3I7CiAgICB9IGVsc2UgewogICAg");
    sb.append("ICB0aHJvdyBuZXcgRXJyb3IoImRlZmluaW5nIGJlaGF2aW9yICciICsgbmFtZSArICInIGZhaWxlZCBk");
    sb.append("dWUgdG8gbm90IGEgZnVuY3Rpb24iKQogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCByeDpiZWhhdmlv");
    sb.append("cj0kbmFtZQogIHNlbGYuQkhWID0gZnVuY3Rpb24oZG9tLCBuYW1lKSB7CiAgICBpZiAobmFtZSBpbiBi");
    sb.append("ZWhhdmlvcnMpIHsKICAgICAgYmVoYXZpb3JzW25hbWVdOwogICAgfSBlbHNlIHsKICAgICAgY29uc29s");
    sb.append("ZS5sb2coImNvdWxkbid0IGZpbmQgYmVoYXZpb3I6IiArIG5hbWUpOwogICAgfQogIH07CgogIC8vIFJV");
    sb.append("TlRJTUUgfCByZWdpc3RlciB0aGUgcGFnZSBmb3IgdGhlIHVyaSB0byB0aGUgZ2l2ZW4gZm9vKCkuCiAg");
    sb.append("c2VsZi5QRyA9IGZ1bmN0aW9uICh1cmksIGZvbykgewogICAgdmFyIGhlYWQgPSByb3V0ZXI7CiAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IHVyaS5sZW5ndGg7IGsrKykgewogICAgICB2YXIgcGFydCA9IHVyaVtr");
    sb.append("XTsKICAgICAgaWYgKCEocGFydCBpbiBoZWFkKSkgewogICAgICAgIGhlYWRbcGFydF0gPSB7fTsKICAg");
    sb.append("ICAgfQogICAgICBoZWFkID0gaGVhZFtwYXJ0XTsKICAgIH0KICAgIGhlYWRbIkAiXSA9IGZvbzsKICB9");
    sb.append("OwoKICB2YXIgcm91dGUgPSBmdW5jdGlvbiAocGFydHMsIGF0LCBoZWFkLCB2aWV3KSB7CiAgICBpZiAo");
    sb.append("YXQgPCBwYXJ0cy5sZW5ndGgpIHsKICAgICAgaWYgKCJudW1iZXIiIGluIGhlYWQpIHsKICAgICAgICB2");
    sb.append("YXIgbmVjayA9IGhlYWRbIm51bWJlciJdOwogICAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KHBhcnRz");
    sb.append("W2F0XSk7CiAgICAgICAgaWYgKCFpc05hTih2YWwpKSB7CiAgICAgICAgICBmb3IgKHZhciBicmFuY2gg");
    sb.append("aW4gbmVjaykgewogICAgICAgICAgICB2aWV3W2JyYW5jaF0gPSB2YWw7CiAgICAgICAgICAgIHZhciBj");
    sb.append("YW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAg");
    sb.append("ICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0");
    sb.append("ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWxldGUgdmlld1ticmFuY2hdOwogICAgICAgICAg");
    sb.append("fQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoInRleHQiIGluIGhlYWQpIHsKICAgICAgICB2YXIg");
    sb.append("bmVjayA9IGhlYWRbInRleHQiXTsKICAgICAgICB2YXIgdmFsID0gcGFydHNbYXRdOwogICAgICAgIGZv");
    sb.append("ciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICB2aWV3W2JyYW5jaF0gPSB2YWw7CiAgICAg");
    sb.append("ICAgICB2YXIgY2FuZGlkYXRlID0gcm91dGUocGFydHMsIGF0ICsgMSwgbmVja1ticmFuY2hdLCB2aWV3");
    sb.append("KTsKICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGNh");
    sb.append("bmRpZGF0ZTsKICAgICAgICAgIH0KICAgICAgICAgIGRlbGV0ZSB2aWV3W2JyYW5jaF07CiAgICAgICAg");
    sb.append("fQogICAgICB9CiAgICAgIGlmICgiZml4ZWQiIGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhl");
    sb.append("YWRbImZpeGVkIl07CiAgICAgICAgZm9yICh2YXIgYnJhbmNoIGluIG5lY2spIHsKICAgICAgICAgIGlm");
    sb.append("IChicmFuY2ggPT0gcGFydHNbYXRdKSB7CiAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShw");
    sb.append("YXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAgICAgICBpZiAoY2FuZGlkYXRl");
    sb.append("ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJAIiBpbiBo");
    sb.append("ZWFkKSB7CiAgICAgICAgcmV0dXJuIGhlYWRbIkAiXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51");
    sb.append("bGw7CiAgfTsKCgogIHNlbGYucmVzdW1lX3VyaSA9ICIvIjsKICBzZWxmLmdhdGVzID0gW107CiAgLyoq");
    sb.append("IFJVTlRJTUUgfCA8Z2F0ZS1leGl0IGd1YXJkPSJyZWFkIiBzZXQ9IiI+ICovCiAgc2VsZi5JRyA9IGZ1");
    sb.append("bmN0aW9uKHN0YXRlUmVhZCwgcmVhZCwgc3RhdGVXcml0ZSwgd3JpdGUpIHsKICAgIHZhciBzbSA9IHsK");
    sb.append("ICAgICAgdmFsdWU6IGZhbHNlLAogICAgICBydW46IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh0aGlz");
    sb.append("LnZhbHVlKSB7CiAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgICBvYmpbd3JpdGVdID0gdHJ1");
    sb.append("ZTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGVXcml0ZS52aWV3LCBvYmopOwogICAg");
    sb.append("ICAgICAgc3RhdGVXcml0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgICAgIHJldHVybiB0");
    sb.append("cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0sCiAgICB9OwogICAgc3Vi");
    sb.append("c2NyaWJlKHN0YXRlUmVhZCwgcmVhZCwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgc20udmFsdWUgPSB2");
    sb.append("YWx1ZTsKICAgIH0pOwogICAgc2VsZi5nYXRlcy5wdXNoKHNtKTsKICB9OwogIHNlbGYuZ290byA9IGZ1");
    sb.append("bmN0aW9uICh1cmksIG5vdykgewogICAgc2VsZi5yZXN1bWVfdXJpID0gdXJpOwogICAgdmFyIGJsb2Nr");
    sb.append("ZWQgPSBmYWxzZTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2VsZi5nYXRlcy5sZW5ndGg7IGsrKykg");
    sb.append("ewogICAgICBpZiAoc2VsZi5nYXRlc1trXS5ydW4oKSkgewogICAgICAgIGJsb2NrZWQgPSB0cnVlOwog");
    sb.append("ICAgICB9CiAgICB9CiAgICBpZiAoYmxvY2tlZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAo");
    sb.append("bm93KSB7CiAgICAgIHNlbGYuZ290b19ub3codXJpKTsKICAgIH0gZWxzZSB7CiAgICAgIHdpbmRvdy5z");
    sb.append("ZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmdvdG9fbm93KHVyaSk7CiAgICAgIH0s");
    sb.append("IDEpOwogICAgfQogIH07CiAgLy8gUlVOVElNRTogPHRhZyAuLi4gcng6ZXZlbnQ9Ii4uLiByZXN1bWUg");
    sb.append("Li4uIj4uLgogIHNlbGYuYlIgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bjogZnVu");
    sb.append("Y3Rpb24oKSB7CiAgICAgICAgc2VsZi5nYXRlcyA9IFtdOwogICAgICAgIHNlbGYuZ290byhzZWxmLnJl");
    sb.append("c3VtZV91cmksIGZhbHNlKTsKICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkge30KICAgIH07");
    sb.append("CiAgfTsKICBzZWxmLmdvdG9fbm93ID0gZnVuY3Rpb24odXJpKSB7CiAgICBpZiAodXJpLnN0YXJ0c1dp");
    sb.append("dGgoIi8iKSkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCB1cmksIHRydWUpOwogICAgfSBl");
    sb.append("bHNlIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmaXhIcmVmKHVyaSk7CiAgICB9CiAgfTsK");
    sb.append("CiAgdmFyIHVybEJhc2U2NFRvVWludDhBcnJheSA9IGZ1bmN0aW9uKGJhc2U2NCkgewogICAgdmFyIHJh");
    sb.append("d0RhdGEgPSB3aW5kb3cuYXRvYihiYXNlNjQpOwogICAgdmFyIG91dHB1dEFycmF5ID0gbmV3IFVpbnQ4");
    sb.append("QXJyYXkocmF3RGF0YS5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXdEYXRhLmxlbmd0");
    sb.append("aDsgKytpKSB7CiAgICAgIG91dHB1dEFycmF5W2ldID0gcmF3RGF0YS5jaGFyQ29kZUF0KGkpOwogICAg");
    sb.append("fQogICAgcmV0dXJuIG91dHB1dEFycmF5OwogIH0KCiAgc2VsZi5jdXJyZW50UHVzaEV2ZW50ID0gZnVu");
    sb.append("Y3Rpb24oKSB7fTsKCiAgdmFyIGdldFdlYlB1c2hTdGF0dXMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBy");
    sb.append("ZXN1bHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgid2VicHVzaF9zdGF0dXMiKTsKICAgIGlmIChyZXN1");
    sb.append("bHQgJiYgdHlwZW9mKHJlc3VsdCkgPT0gInN0cmluZyIpIHsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAg");
    sb.append("IH0KICAgIHJldHVybiAidW5rbm93biI7CiAgfQoKICB2YXIgc2V0UHVzaFN0YXR1cyA9IGZ1bmN0aW9u");
    sb.append("KHN0YXR1cykgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgc3RhdHVz");
    sb.append("KTsKICAgIHNlbGYuY3VycmVudFB1c2hFdmVudCgpOwogIH07CiAgc2VsZi5zZXRQdXNoU3RhdHVzID0g");
    sb.append("c2V0UHVzaFN0YXR1czsKCiAgdmFyIHNldFB1c2hFdmVudCA9IGZ1bmN0aW9uKGZvbykgewogICAgc2Vs");
    sb.append("Zi5jdXJyZW50UHVzaEV2ZW50ID0gZm9vOwogIH07CgogIHZhciBzZXR1cFN1YnNjcmlwdGlvbiA9IGZ1");
    sb.append("bmN0aW9uIChyZWdpc3RyYXRpb24sIHZhcGlkUHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1l");
    sb.append("LCB2ZXJzaW9uKSB7CiAgICBjb25uZWN0aW9uLmJ1bXAoIndwcyIpOwogICAgdmFyIHB1c2hLZXlMb2Nh");
    sb.append("bCA9ICJwdXNoX2VuZHBvaW50XyIgKyBpZGVudGl0eU5hbWU7CiAgICByZWdpc3RyYXRpb24ucHVzaE1h");
    sb.append("bmFnZXIKICAgIC5nZXRTdWJzY3JpcHRpb24oKS50aGVuKGFzeW5jIGZ1bmN0aW9uIChzdWJzY3JpcHRp");
    sb.append("b24pIHsKICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0");
    sb.append("aW9uOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb252ZXJ0ZWRWYXBpZEtleSA9IHVybEJhc2U2NFRv");
    sb.append("VWludDhBcnJheSh2YXBpZFB1YmxpY0tleSk7CiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5wdXNo");
    sb.append("TWFuYWdlci5zdWJzY3JpYmUoewogICAgICAgICAgdXNlclZpc2libGVPbmx5OiB0cnVlLAogICAgICAg");
    sb.append("ICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IGNvbnZlcnRlZFZhcGlkS2V5CiAgICAgICAgfSk7CiAgICB9");
    sb.append("KS50aGVuKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAgICAgLy8gbWFrZSBzdXJlIHdlIGhhdmUg");
    sb.append("YW4gZW5kcG9pbnQgc2F2ZWQgcmVsYXRlZCB0byB0aGUgcmlnaHQgdmVyc2lvbgogICAgICBjb25uZWN0");
    sb.append("aW9uLklkZW50aXR5SGFzaChpZGVudGl0eSwgewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3Vs");
    sb.append("dCkgewogICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9u");
    sb.append("IikgIT0gdmVyc2lvbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibGFzdF9pZGVudGl0eV91c2VkIikg");
    sb.append("IT0gcmVzdWx0LmlkZW50aXR5SGFzaCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRl");
    sb.append("bShwdXNoS2V5TG9jYWwpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicHVzaF93b3Jr");
    sb.append("ZXJfdmVyc2lvbiIsIHZlcnNpb24pOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibGFz");
    sb.append("dF9pZGVudGl0eV91c2VkIiwgcmVzdWx0LmlkZW50aXR5SGFzaCk7CiAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICB2YXIgc3ViID0gc3Vic2NyaXB0aW9uLnRvSlNPTigpOwogICAgICAgICAgdmFyIHZhbCA9IGxvY2Fs");
    sb.append("U3RvcmFnZS5nZXRJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgICAgICBpZiAodmFsICYmIHZhbCA9PSBz");
    sb.append("dWIuZW5kcG9pbnQpIHsKICAgICAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGEiKTsKICAgICAgICAg");
    sb.append("ICAgc2V0UHVzaFN0YXR1cygic3VjY2VzcyIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICBzdWJbJ0BtZXRob2QnXSA9ICd3ZWJwdXNoJzsKICAgICAgICAgIHN1YlsnQHRpbWUn");
    sb.append("XSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgdmFyIGRldmljZSA9IHt9OwogICAgICAg");
    sb.append("ICAgZGV2aWNlLm1vZGUgPSAnd2ViJwogICAgICAgICAgaWYgKHdpbmRvdyAmJiB3aW5kb3cubmF2aWdh");
    sb.append("dG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSB7CiAgICAgICAgICAgIGRldmljZS51YSA9");
    sb.append("IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OwogICAgICAgICAgfQogICAgICAgICAgY29ubmVjdGlv");
    sb.append("bi5QdXNoUmVnaXN0ZXIoaWRlbnRpdHksIHNlbGYuZG9tYWluLCBzdWIsIGRldmljZSwgewogICAgICAg");
    sb.append("ICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRl");
    sb.append("bShwdXNoS2V5TG9jYWwsIHN1Yi5lbmRwb2ludCk7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNl");
    sb.append("dEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICBzZXRQdXNoU3Rh");
    sb.append("dHVzKCJzdWNjZXNzIik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3BmIik7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24oKSB7CiAgICAgICAg");
    sb.append("ICBjb25uZWN0aW9uLmJ1bXAoIndwZiIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCBmdW5jdGlv");
    sb.append("bihlcnIpIHsKICAgICAgc2V0UHVzaFN0YXR1cygiZmFpbGVkIik7CiAgICAgIGxvY2FsU3RvcmFnZS5y");
    sb.append("ZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJsYXN0");
    sb.append("X2lkZW50aXR5X3VzZWQiKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInB1c2hfd29ya2Vy");
    sb.append("X3ZlcnNpb24iKTsKICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGQiKTsKICAgICAgY29ubmVjdGlvbi5s");
    sb.append("b2coInB1c2hzZXR1cCIsICIiICsgZXJyKTsKICAgIH0pOwogIH0KCiAgdmFyIHNldHVwUHVzaCA9IGZ1");
    sb.append("bmN0aW9uKHBhdGgsIHZhcGlkUHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9u");
    sb.append("KSB7CiAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpIHsKICAgICAgdHJ5IHsKICAgICAgICBu");
    sb.append("YXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRSZWdpc3RyYXRpb25zKCkudGhlbihmdW5jdGlvbiAocmVn");
    sb.append("aXN0cmF0aW9ucykgewogICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICBmb3IgKGxl");
    sb.append("dCByZWdpc3RyYXRpb24gb2YgcmVnaXN0cmF0aW9ucykgewogICAgICAgICAgICBpZiAocmVnaXN0cmF0");
    sb.append("aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAgIGlmICghcmVnaXN0cmF0aW9uLmFjdGl2ZS5zY3JpcHRV");
    sb.append("UkwuZW5kc1dpdGgocGF0aCkpIHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi51bnJlZ2lzdGVy");
    sb.append("KCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAg");
    sb.append("ICAgICAgICAgICAgIHNldHVwU3Vic2NyaXB0aW9uKHJlZ2lzdHJhdGlvbiwgdmFwaWRQdWJsaWNLZXks");
    sb.append("IGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pOwogICAgICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgICBuYXZpZ2F0");
    sb.append("b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihwYXRoKTsKICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZp");
    sb.append("Y2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7CiAgICAgICAgICAgICAg");
    sb.append("c2V0dXBTdWJzY3JpcHRpb24ocmVnaXN0cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlk");
    sb.append("ZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0s");
    sb.append("IGZ1bmN0aW9uKGV4KSB7CiAgICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndwaTMiKTsKICAgICAgICAg");
    sb.append("IGNvbm5lY3Rpb24ubG9nKCJ3b3JrZXItZmluZCIsICIiICsgZXgpOwogICAgICAgIH0pOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byByZWdpc3RlciBzZXJ2");
    sb.append("aWNlIHdvcmtlciIsIGV4KTsKICAgICAgICBzZXRQdXNoU3RhdHVzKCJpbXBvc3NpYmxlIik7CiAgICAg");
    sb.append("ICAgY29ubmVjdGlvbi5idW1wKCJ3cGkyIik7CiAgICAgICAgY29ubmVjdGlvbi5sb2coIndvcmtlci1p");
    sb.append("bnN0YWxsIiwgIiIgKyBleCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJu");
    sb.append("byBzZXJ2aWNlIHdvcmtlciBhdmFpbGFibGUiKTsKICAgICAgc2V0UHVzaFN0YXR1cygiaW1wb3NzaWJs");
    sb.append("ZSIpOwogICAgICBjb25uZWN0aW9uLmJ1bXAoIndwaTEiKTsKICAgIH0KICB9CgogIHNlbGYud29ya2Vy");
    sb.append("ID0gZnVuY3Rpb24oaWRlbnRpdHlOYW1lLCBwYXRoLCB2ZXJzaW9uKSB7CiAgICB0cnkgewogICAgICBh");
    sb.append("ZnRlckhhdmVJZGVudGl0eShpZGVudGl0eU5hbWUsIGZ1bmN0aW9uKGlkZW50aXR5KSB7CiAgICAgICAg");
    sb.append("Y29ubmVjdGlvbi5Eb21haW5HZXRWYXBpZFB1YmxpY0tleShpZGVudGl0eSwgc2VsZi5kb21haW4sIHsK");
    sb.append("ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHNldHVwUHVz");
    sb.append("aChwYXRoLCByZXNwb25zZS5wdWJsaWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24p");
    sb.append("OwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAg");
    sb.append("ICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGdldCBwdWJsaWMta2V5OiIgKyByZWFzb24pOwog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgY29u");
    sb.append("c29sZS5lcnJvcigiZmFpbGVkIHRvIGluaXRpYWxpemUgd29ya2VyIiwgZXgpOwogICAgfQogIH07Cgog");
    sb.append("IHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBh");
    sb.append("dGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRv");
    sb.append("dy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbiAo");
    sb.append("cCkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCBmaXhQYXRoKHdpbmRvdy5sb2NhdGlvbi5w");
    sb.append("YXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaCksIGZh");
    sb.append("bHNlKTsKICAgIH07CiAgfTsKCiAgdmFyIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnMgPSB7fTsKICB2YXIg");
    sb.append("cmVtb3ZlQWxsTWVzc2FnZUhhbmRsZXJzID0gZnVuY3Rpb24oKSB7CiAgICBmb3IgKHZhciBrIGluIGN1");
    sb.append("cnJlbnRNZXNzYWdlSGFuZGxlcnMpIHsKICAgICAgZGVsZXRlIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnNb");
    sb.append("a107CiAgICB9CiAgfTsKCiAgc2VsZi5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyID0gZnVuY3Rpb24oY2hh");
    sb.append("bm5lbCwgaGFuZGxlcikgewogICAgaWYgKGNoYW5uZWwgaW4gY3VycmVudE1lc3NhZ2VIYW5kbGVycykg");
    sb.append("ewogICAgICBjdXJyZW50TWVzc2FnZUhhbmRsZXJzW2NoYW5uZWxdLnB1c2goaGFuZGxlcik7CiAgICB9");
    sb.append("IGVsc2UgewogICAgICBjdXJyZW50TWVzc2FnZUhhbmRsZXJzW2NoYW5uZWxdID0gW2hhbmRsZXJdOwog");
    sb.append("ICAgfQogIH07CgogIHZhciByb3V0ZU1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgewogICAgdHJ5IHsK");
    sb.append("ICAgICAgaWYgKCEoJ2RhdGEnIGluIGV2ZW50KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAg");
    sb.append("ICBpZiAodHlwZW9mIChldmVudC5kYXRhKSAhPSAnb2JqZWN0JykgewogICAgICAgIHJldHVybjsKICAg");
    sb.append("ICAgfQogICAgICBpZiAoISgnY2hhbm5lbCcgaW4gZXZlbnQuZGF0YSkpIHsKICAgICAgICByZXR1cm47");
    sb.append("CiAgICAgIH0KICAgICAgdmFyIGNoYW5uZWwgPSBldmVudC5kYXRhLmNoYW5uZWw7CiAgICAgIHZhciBs");
    sb.append("aXN0ID0gY3VycmVudE1lc3NhZ2VIYW5kbGVyc1tjaGFubmVsXTsKICAgICAgaWYgKGxpc3QgIT09IG51");
    sb.append("bGwpIHsKICAgICAgICB2YXIgbiA9IGxpc3QubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBr");
    sb.append("IDwgbjsgaysrKSB7CiAgICAgICAgICBsaXN0W2tdKGV2ZW50LmRhdGEsIGV2ZW50KTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgIH0gY2F0Y2ggKHdlbGxNYXliZVRoZUVycm9yRG9lc250QmVsb25nVG9NZSkgewog");
    sb.append("ICAgICAvLyA6c2hydWc6CiAgICB9CiAgfTsKCiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7");
    sb.append("CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIHJvdXRlTWVzc2FnZSwgZmFsc2Up");
    sb.append("OwogIH0gZWxzZSBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7CiAgICB3aW5kb3cuYXR0YWNoRXZlbnQo");
    sb.append("Im9ubWVzc2FnZSIsIHJvdXRlTWVzc2FnZSwgZmFsc2UpOwogIH0KCiAgc2VsZi5jdXJyZW50Vmlld2Vy");
    sb.append("SWQgPSAwOwogIC8vIEFQSSB8IFJ1biB0aGUgcGFnZSBpbiB0aGUgZ2l2ZW4gcGxhY2UKICBzZWxmLnJ1");
    sb.append("biA9IGZ1bmN0aW9uICh3aGVyZSwgcmF3UGF0aCwgcHVzaCkgewogICAgcmVtb3ZlQWxsTWVzc2FnZUhh");
    sb.append("bmRsZXJzKCk7CiAgICB2YXIgcGF0aCA9IHJhd1BhdGg7CiAgICB3aGlsZSAocGF0aC5lbmRzV2l0aCgi");
    sb.append("LyIpICYmIHBhdGggIT0gIi8iKSB7CiAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxl");
    sb.append("bmd0aCAtIDEpOwogICAgfQogICAgZm9yIChjb25LZXkgaW4gY29ubmVjdGlvbnMpIHsKICAgICAgY29u");
    sb.append("bmVjdGlvbnNbY29uS2V5XS50cmVlLm51a2UoKTsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS5udWtl");
    sb.append("KCk7CiAgICB9CiAgICB2YXIgc2VhcmNoID0gIiI7CiAgICB2YXIga1F1ZXN0aW9uID0gcGF0aC5pbmRl");
    sb.append("eE9mKCc/Jyk7CiAgICBpZiAoa1F1ZXN0aW9uID4gMCkgewogICAgICBzZWFyY2ggPSBwYXRoLnN1YnN0");
    sb.append("cmluZyhrUXVlc3Rpb24pOwogICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwga1F1ZXN0aW9uKTsK");
    sb.append("ICAgIH0KICAgIHZhciBwYXJ0cyA9IChwYXRoLnN0YXJ0c1dpdGgoIi8iKSA/IHBhdGguc3Vic3RyaW5n");
    sb.append("KDEpIDogcGF0aCkuc3BsaXQoIi8iKTsKICAgIHZhciBpbml0ID0ge307CiAgICBzZWxmLmN1cnJlbnRW");
    sb.append("aWV3ZXJJZCsrOwogICAgaW5pdC52aWV3ZXJfY3VycmVudF9wYWdlX2lkID0gc2VsZi5jdXJyZW50Vmll");
    sb.append("d2VySWQ7CiAgICB0cnkgewogICAgICBpbml0LnZpZXdlcl90aW1lem9uZSA9IEludGwuRGF0ZVRpbWVG");
    sb.append("b3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTsKICAgICAgaW5pdC52aWV3ZXJfbGFuZ3Vh");
    sb.append("Z2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2U7CiAgICB9IGNhdGNoIChicm93c2VyQmFkKSB7CiAgICAgIC8v");
    sb.append("IHdlIGp1c3QgZG9uJ3Qgc2VlIHRoZSB2aWV3c3RhdGUgaWYgd2UgZG9uJ3QgaGF2ZSB0aGVzZSBhdmFp");
    sb.append("bGFibGUKICAgIH0KICAgIGluaXQudmlld2VyX3NlYXJjaF9xdWVyeSA9ICIiOwogICAgaW5pdC52aWV3");
    sb.append("ZXJfd2ViX3B1c2hfc3RhdHVzID0gZ2V0V2ViUHVzaFN0YXR1cygpOwogICAgaWYgKHNlYXJjaCAhPSAi");
    sb.append("PyIpIHsKICAgICAgaW5pdC52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gc2VhcmNoOwogICAgICBjb25zdCBw");
    sb.append("YXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaC5zdWJzdHJpbmcoMSkpOwogICAgICB2YXIg");
    sb.append("a0l0ID0gcGFyYW1zLmtleXMoKTsKICAgICAgdmFyIHAgPSBrSXQubmV4dCgpOwogICAgICB3aGlsZSAo");
    sb.append("IXAuZG9uZSkgewogICAgICAgIGluaXRbcC52YWx1ZV0gPSBwYXJhbXMuZ2V0KHAudmFsdWUpOwogICAg");
    sb.append("ICAgIHAgPSBrSXQubmV4dCgpOwogICAgICB9CiAgICB9CiAgICB2YXIgZm9vID0gcm91dGUocGFydHMs");
    sb.append("IDAsIHJvdXRlciwgaW5pdCk7CiAgICBudWtlKHdoZXJlKTsKICAgIGlmIChmb28gIT0gbnVsbCkgewog");
    sb.append("ICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgICAgIHZhciBzdGF0ZSA9IHsgc2VydmljZTogY29u");
    sb.append("bmVjdGlvbiwgZGF0YTogbnVsbCwgdmlldzogZnJlc2god2hlcmUpLCBjdXJyZW50OiAidmlldyIgfTsK");
    sb.append("ICAgICAgc2VsZi5fX2N1cnJlbnQgPSBzdGF0ZTsKCiAgICAgIGNvbnN0IHZpZXdzdGF0ZSA9IGxvY2Fs");
    sb.append("U3RvcmFnZS5nZXRJdGVtKCdyeHZpZXdzdGF0ZScpOwogICAgICBpZiAobnVsbCAhPT0gdmlld3N0YXRl");
    sb.append("KSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3J4dmlld3N0YXRlJyk7CiAgICAgICAg");
    sb.append("aW5pdCA9IE9iamVjdC5hc3NpZ24oe30sIGluaXQsIEpTT04ucGFyc2Uodmlld3N0YXRlKSk7CiAgICAg");
    sb.append("IH0KCiAgICAgIHN0YXRlLnZpZXcuaW5pdCA9IGluaXQ7CiAgICAgIHNlbGYuZ2F0ZXMgPSBbXTsKICAg");
    sb.append("ICAgc2VsZi5yZXN1bWVfdXJpID0gcGF0aDsKICAgICAgZm9vKHdoZXJlLCBzdGF0ZSk7CiAgICAgIHN0");
    sb.append("YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoc3RhdGUudmlldy5kZWx0YSk7CiAgICAgIHN0YXRlLnZpZXcu");
    sb.append("dHJlZS51cGRhdGUoaW5pdCk7CiAgICAgIGlmIChwdXNoKSB7CiAgICAgICAgd2luZG93Lmhpc3Rvcnku");
    sb.append("cHVzaFN0YXRlKHttZXJnZTpmYWxzZX0sICIiLCBmaXhIcmVmKHBhdGgpICsgc2VhcmNoKTsKICAgICAg");
    sb.append("fQogICAgICBzZXRQdXNoRXZlbnQoZnVuY3Rpb24oKSB7CiAgICAgICAgc3RhdGUudmlldy50cmVlLnVw");
    sb.append("ZGF0ZSh7IHZpZXdlcl93ZWJfcHVzaF9zdGF0dXM6IGdldFdlYlB1c2hTdGF0dXMoKX0pOwogICAgICB9");
    sb.append("KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChwYXRoICE9ICIvNDA0IikgewogICAgICAgIHNlbGYucnVu");
    sb.append("KHdoZXJlLCAiLzQwNCIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGRlZmF1bHQgNDA0CiAgICAg");
    sb.append("IH0KICAgIH0KICAgIHdoZXJlLmFwcGVuZENoaWxkKGNvbm5lY3Rpb25Nb25pdG9yRG9tKTsKICB9OwoK");
    sb.append("ICB2YXIgaWRlbnRpdGllcyA9IHt9OwoKICBzZWxmLlNJR05PVVQgPSBmdW5jdGlvbiAoKSB7CiAgICBp");
    sb.append("ZGVudGl0aWVzID0ge307CiAgICBmb3IgKHZhciBpZGVudGl0eU5hbWUgaW4gaWRlbnRpdGllcykgewog");
    sb.append("ICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSk7CiAg");
    sb.append("ICB9CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIpOwogICAgdmFy");
    sb.append("IGF4ZSA9IFtdOwogICAgZm9yICh2YXIgY2lkIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHZhciBjbyA9");
    sb.append("IGNvbm5lY3Rpb25zW2NpZF07CiAgICAgIGlmIChjby5wdHIgIT0gbnVsbCkgewogICAgICAgIGNvLnB0");
    sb.append("ci5lbmQoeyBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7IH0sIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHsgfSB9");
    sb.append("KTsKICAgICAgfQogICAgICBheGUucHVzaChjaWQpOwogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsg");
    sb.append("PCBheGUubGVuZ3RoOyBrKyspIHsKICAgICAgZGVsZXRlIGNvbm5lY3Rpb25zW2F4ZVtrXV07CiAgICB9");
    sb.append("CiAgfTsKCiAgc2VsZi5HT09HTEVfU0lHTl9PTiA9IGZ1bmN0aW9uIChhY2Nlc3NUb2tlbikgewogICAg");
    sb.append("Y29ubmVjdGlvbi5Jbml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHsKICAgICAgc3VjY2Vz");
    sb.append("czogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICBpZGVudGl0aWVzWyJkZWZhdWx0Il0gPSBwYXls");
    sb.append("b2FkLmlkZW50aXR5OwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV9kZWZhdWx0");
    sb.append("IiwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgc2VsZi5nb3RvKCIvIiwgZmFsc2UpOwogICAgICB9");
    sb.append("LAogICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY29uc29sZS5sb2coIkdv");
    sb.append("b2dsZSBmYWlsdXJlOiAiICsgcmVhc29uKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLyoqIFJVTlRJ");
    sb.append("TUUgfCByZWRpcmVjdCB0byBhIHBhZ2Ugd2l0aCBzdGF0ZSAqLwogIHNlbGYuYVJEcCA9IGZ1bmN0aW9u");
    sb.append("IChzdGF0ZSwgcHVsbGVyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdXJpID0g");
    sb.append("cHVsbGVyKHN0YXRlLnZpZXcuaW5pdCk7CiAgICAgIHJldHVybiB1cmk7CiAgICB9OwogIH07CgogIC8q");
    sb.append("KiBSVU5USU1FIHwgcmVkaXJlY3QgdG8gYSBzdGF0aWMgcGFnZSAqLwogIHNlbGYuYVJEeiA9IGZ1bmN0");
    sb.append("aW9uIChyYXcpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiByYXc7CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIGlkZW50aXR5RXZlbnRzID0ge307CiAgdmFyIGFmdGVySGF2ZUlkZW50aXR5ID0g");
    sb.append("ZnVuY3Rpb24oaWRlbnRpdHlOYW1lLCBjYWxsYmFjaykgewogICAgaWRlbnRpdHlFdmVudHNbaWRlbnRp");
    sb.append("dHlOYW1lXSA9IGNhbGxiYWNrOwogIH07CiAgc2VsZi5hZnRlckhhdmVJZGVudGl0eSA9IGFmdGVySGF2");
    sb.append("ZUlkZW50aXR5OwoKICAvKiogZm9yIGN1c3RvbSBlbGVtZW50cyB0byBsZWFybiBvZiB0aGUgaWRlbnRp");
    sb.append("dHkgKi8KICBzZWxmLklEID0gZnVuY3Rpb24gKGlkZW50aXR5TmFtZSwgcmVkaXJlY3RUb0Z1bmMpIHsK");
    sb.append("ICAgIGlmIChpZGVudGl0eU5hbWUgPT09IHRydWUpIHsKICAgICAgaWRlbnRpdHlOYW1lID0gImRlZmF1");
    sb.append("bHQiOwogICAgfQogICAgLy8gSUYgaWRlbnRpdHkgY29udGFpbnMgZG90cwogICAgdmFyIGlkZW50aXR5");
    sb.append("ID0gbnVsbDsKICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgfTsKCiAgICB2YXIgdmFs");
    sb.append("ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgaWYg");
    sb.append("KHZhbCkgewogICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSB2YWw7CiAgICB9CgogICAgaWYg");
    sb.append("KGlkZW50aXR5TmFtZS5zdGFydHNXaXRoKCJkaXJlY3Q6IikpIHsKICAgICAgLy8gVXNlLCBhcyBpcwog");
    sb.append("ICAgICBpZGVudGl0eSA9IGlkZW50aXR5TmFtZS5zdWJzdHJpbmcoNyk7CiAgICB9IGVsc2UgaWYgKGlk");
    sb.append("ZW50aXR5TmFtZSBpbiBpZGVudGl0aWVzKSB7CiAgICAgIGlkZW50aXR5ID0gaWRlbnRpdGllc1tpZGVu");
    sb.append("dGl0eU5hbWVdOwogICAgICBjbGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZSBpZGVu");
    sb.append("dGl0aWVzW2lkZW50aXR5TmFtZV07CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50");
    sb.append("aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgICAgIHNlbGYuZ290byhyZWRpcmVjdFRvRnVuYygpLCBm");
    sb.append("YWxzZSk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICAvLyB3aGF0ZXZlciBwYWdlIHdlIGFyZSwg");
    sb.append("bmVlZHMgdG8gZGllIHdoaWNoIG1lYW5zIHdlIG5lZWQgdG8gbnVrZSBldmVyeXRoaW5nIQogICAgICB3");
    sb.append("aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5nb3RvKHJlZGlyZWN0VG9G");
    sb.append("dW5jKCksIGZhbHNlKTsKICAgICAgfSwgMTApOwogICAgICByZXR1cm4geyBhYm9ydDogdHJ1ZSB9Owog");
    sb.append("ICAgfQogICAgaWYgKGlkZW50aXR5TmFtZSBpbiBpZGVudGl0eUV2ZW50cykgewogICAgICBpZGVudGl0");
    sb.append("eUV2ZW50c1tpZGVudGl0eU5hbWVdKGlkZW50aXR5KTsKICAgICAgZGVsZXRlIGlkZW50aXR5RXZlbnRz");
    sb.append("W2lkZW50aXR5TmFtZV07CiAgICB9CiAgICByZXR1cm4geyBhYm9ydDogZmFsc2UsIGNsZWFudXA6IGNs");
    sb.append("ZWFudXAsIGlkZW50aXR5OiBpZGVudGl0eSB9OwogIH07CgogIC8qIEZvciBjdXN0b20gY2FsbGJhY2tz");
    sb.append("IHRvIHJlZGlyZWN0IGFuZCBpbnZhbGlkYXRlIElEIGZhaWx1cmVzICovCiAgc2VsZi5GSURDTCA9IGZ1");
    sb.append("bmN0aW9uIChjYWxsYmFjaywgbG9va3VwKSB7CiAgICByZXR1cm4gewogICAgICBzdWNjZXNzOiBmdW5j");
    sb.append("dGlvbiAocmVzdWx0KSB7CiAgICAgICAgY2FsbGJhY2suc3VjY2VzcyhyZXN1bHQpOwogICAgICB9LAog");
    sb.append("ICAgICBuZXh0OiBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGNhbGxiYWNrLm5leHQoaXRlbSk7CiAg");
    sb.append("ICAgIH0sCiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2FsbGJhY2suY29tcGxl");
    sb.append("dGUoKTsKICAgICAgfSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNh");
    sb.append("bGxiYWNrLmZhaWx1cmUocmVhc29uKTsKICAgICAgICBpZiAocmVhc29uID09IDQwMzQwMyB8fCByZWFz");
    sb.append("b24gPT0gNDAzNTAwIHx8IHJlYXNvbiA9PSAxODQzMzMpIHsKICAgICAgICAgIGxvb2t1cC5jbGVhbnVw");
    sb.append("KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH07CgogIHZhciBjdXN0b21EYXRhU291cmNlcyA9");
    sb.append("IHt9OwoKICAvKiogcHJvdmlkZSBjdXN0b20gZGF0YSAqLwogIHNlbGYuUFJDVURBID0gZnVuY3Rpb24g");
    sb.append("KG5hbWUsIGZvbykgewogICAgY3VzdG9tRGF0YVNvdXJjZXNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8g");
    sb.append("PGN1c3RvbWRhdGEgc3JjPXNyYyAocGFyYW1ldGVyOng9eSkqID4KICBzZWxmLkNVREEgPSBmdW5jdGlv");
    sb.append("biAocGFyZW50LCBwcmlvclN0YXRlLCBzcmMsIHJ4b2JqLCByZWRpcmVjdFRvLCBjaGlsZE1ha2VyKSB7");
    sb.append("CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDEwLCBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICBudWtlKHBhcmVudCk7CiAg");
    sb.append("ICAgIHZhciBjdXN0b21UcmVlID0gZmFsc2U7CiAgICAgIGlmIChzcmMgaW4gY3VzdG9tRGF0YVNvdXJj");
    sb.append("ZXMpIHsKICAgICAgICB2YXIgY29ucyA9IGN1c3RvbURhdGFTb3VyY2VzW3NyY107CiAgICAgICAgaWYg");
    sb.append("KHR5cGVvZiAoY29ucykgPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgY3VzdG9tVHJlZSA9IGNvbnMo");
    sb.append("cnhvYmosIHByaW9yU3RhdGUsIHJlZGlyZWN0VG8sIHNlbGYpOwogICAgICAgIH0KICAgICAgfQogICAg");
    sb.append("ICBpZiAoIWN1c3RvbVRyZWUpIHsKICAgICAgICBjdXN0b21UcmVlID0gbmV3IEFkYW1hVHJlZSgpOwog");
    sb.append("ICAgICB9CiAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZp");
    sb.append("Y2UsCiAgICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRyZWU6");
    sb.append("IGN1c3RvbVRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgICAg");
    sb.append("dmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICBjdXJyZW50OiAiZGF0");
    sb.append("YSIKICAgICAgfTsKICAgICAgY2hpbGRNYWtlcihzdGF0ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShz");
    sb.append("dGF0ZSwgdW5zdWIpOwogICAgfSk7CiAgfTsKCiAgLy8gPHRpdGxlIHZhbHVlPSIuLi4iIC8+CiAgc2Vs");
    sb.append("Zi5TVCA9IGZ1bmN0aW9uIChyeG9iaikgewogICAgaWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgIGRvY3Vt");
    sb.append("ZW50LnRpdGxlID0gcnhvYmoudmFsdWU7CiAgICB9CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgaWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgICAgZG9jdW1lbnQudGl0bGUg");
    sb.append("PSByeG9iai52YWx1ZTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gPHZpZXdzeW5jPgogIHNlbGYu");
    sb.append("VlN5ID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgYXZhaWwsIG5vdGF2YWlsKSB7CiAgICB2");
    sb.append("YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJz");
    sb.append("Y3JpYmVfc3luYyhmdW5jdGlvbiAoc3luY2VkKSB7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmly");
    sb.append("ZV91bnN1Yih1bnN1Yik7CiAgICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlm");
    sb.append("IChzeW5jZWQpIHsKICAgICAgICBhdmFpbChwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICBub3RhdmFpbChwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUo");
    sb.append("c3RhdGUsIHVuc3ViKTsKICAgICAgLy8gVE9ETzogcmV0dXJuIGZhbHNlIHRvIHVuc3ViCiAgICAgIHJl");
    sb.append("dHVybiB0cnVlOwogICAgfSk7CiAgfTsKCiAgdmFyIGJpbmRfcmVzcG9uZGVyID0gZnVuY3Rpb24gKGNv");
    sb.append("LCBjbGVhbnVwLCByZXRyeV9zbSkgewogICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAwOwog");
    sb.append("ICAgcmV0cnlfc20uYmFja29mZiA9IDE7CiAgICByZXR1cm4gewogICAgICBuZXh0OiBmdW5jdGlvbiAo");
    sb.append("cGF5bG9hZCkgewogICAgICAgIGNvLmRlYnVnZ2VyKHBheWxvYWQpOwogICAgICAgIGNvLnNldF9jb25u");
    sb.append("ZWN0ZWQodHJ1ZSk7CiAgICAgICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAwOwogICAgICAg");
    sb.append("IHJldHJ5X3NtLmJhY2tvZmYgPSAxOwogICAgICAgIGlmICgiZGF0YSIgaW4gcGF5bG9hZC5kZWx0YSkg");
    sb.append("ewogICAgICAgICAgY28udHJlZS51cGRhdGUocGF5bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgICB9CiAg");
    sb.append("ICAgICAgaWYgKCJvdXRzdGFuZGluZyIgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY28ub25k");
    sb.append("ZWNpZGUocGF5bG9hZC5kZWx0YS5vdXRzdGFuZGluZyk7CiAgICAgICAgfQogICAgICAgIGlmICgndmll");
    sb.append("d3N0YXRlJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjby52aWV3c3RhdGV0cmVlLnVwZGF0");
    sb.append("ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIGlmICgnbG9nJyBpbiBw");
    sb.append("YXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkLmRlbHRhLmxvZyk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmICgncmVsb2FkJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBp");
    sb.append("ZiAocGF5bG9hZC5kZWx0YS5yZWxvYWRbJ3ByZXNlcnZlLXZpZXcnXSkgewogICAgICAgICAgICBsb2Nh");
    sb.append("bFN0b3JhZ2Uuc2V0SXRlbSgncnh2aWV3c3RhdGUnLCBKU09OLnN0cmluZ2lmeShjby52aWV3c3RhdGV0");
    sb.append("cmVlLnJhdygpKSk7CiAgICAgICAgICB9CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7");
    sb.append("CiAgICAgICAgfQogICAgICAgIGlmICgndmlld3BvcnQnIGluIHBheWxvYWQuZGVsdGEgJiYgJ21lc3Nh");
    sb.append("Z2UnIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIHZhciB2aWV3cG9ydCA9IHBheWxvYWQuZGVs");
    sb.append("dGEudmlld3BvcnQ7CiAgICAgICAgICBpZiAodmlld3BvcnQgaW4gY28uaGFuZGxlcnMpIHsKICAgICAg");
    sb.append("ICAgICAgY28uaGFuZGxlcnNbdmlld3BvcnRdKHBheWxvYWQuZGVsdGEubWVzc2FnZSwgY28pOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoJ3ZpZXctc3RhdGUtZmlsdGVyJyBpbiBwYXlsb2Fk");
    sb.append("LmRlbHRhKSB7CiAgICAgICAgICB2YXIgZmlsdGVyID0ge307CiAgICAgICAgICB2YXIga2V5cyA9IHBh");
    sb.append("eWxvYWQuZGVsdGFbJ3ZpZXctc3RhdGUtZmlsdGVyJ107CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IGtleXMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgZmlsdGVyW2tleXNba11dID0gdHJ1ZTsK");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgIGNvLmZpbHRlciA9IGZpbHRlcjsKICAgICAgICAgIGNvLmhhc19m");
    sb.append("aWx0ZXIgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoJ2dvdG8nIGluIHBheWxvYWQuZGVsdGEp");
    sb.append("IHsKICAgICAgICAgIHNlbGYuZ290byhwYXlsb2FkLmRlbHRhLmdvdG8sIGZhbHNlKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0sCiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gc2hvdWxkbid0");
    sb.append("IHJlYWxpc3RpY2FsbHkgaGFwcGVuIFRPRE86IHZhbGlkYXRlIDwtIHRydXRoCiAgICAgICAgY28uc2V0");
    sb.append("X2Nvbm5lY3RlZChmYWxzZSk7CiAgICAgICAgY28ucHRyID0gbnVsbDsKICAgICAgfSwKICAgICAgZmFp");
    sb.append("bHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBmYWlsdXJlCiAg");
    sb.append("ICAgICAgY28uc2V0X2Nvbm5lY3RlZChmYWxzZSk7CiAgICAgICAgY28ucHRyID0gbnVsbDsKICAgICAg");
    sb.append("ICBpZiAocmVhc29uID09IDQwMzQwMyB8fCByZWFzb24gPT0gNDAzNTAwIHx8IHJlYXNvbiA9PSAxODQz");
    sb.append("MzMpIHsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAg");
    sb.append("ICAgLy8gaXMgaXQgYW4gZXhwZWN0ZWQgZXJyb3IgdGhhdCB3aWxsIGhhcHBlbiBhIGJ1bmNoPwogICAg");
    sb.append("ICAgIHZhciBleHBlY3RlZF9lcnJvciA9IHJlYXNvbiA9PSA5OTk7CiAgICAgICAgLy8gZG8gd2Ugbm90");
    sb.append("IGtub3cgYWJvdXQgYW4gZXJyb3IgdGhhdCBoYXBwZW5zIGEgYnVuY2g/IGlmIHNvLCB0aGVuIGxldCdz");
    sb.append("IGF0IGxlYXN0IHRyeSBhZ2FpbiBhIG51bWJlciBvZiBmaW5pdGUgdGltZXMuCiAgICAgICAgdmFyIGJs");
    sb.append("aW5kX3JldHJ5ID0gcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPCAxNjsKICAgICAgICBpZiAoYmxp");
    sb.append("bmRfcmV0cnkpIHsKICAgICAgICAgIHJldHJ5X3NtLnVuZXhwZWN0ZWRfZXJyb3JzKys7CiAgICAgICAg");
    sb.append("fQogICAgICAgIC8vIHJldHJ5IG9uIGVpdGhlciBjYXNlCiAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9y");
    sb.append("IHx8IGJsaW5kX3JldHJ5KSB7CiAgICAgICAgICByZXRyeV9zbS5iYWNrb2ZmID0gTWF0aC5jZWlsKE1h");
    sb.append("dGgubWluKHJldHJ5X3NtLmJhY2tvZmYgKyBNYXRoLnJhbmRvbSgpICogcmV0cnlfc20uYmFja29mZiAr");
    sb.append("IChibGluZF9yZXRyeSA/IDEyNSA6IDEpLCAyNTAwKSk7CiAgICAgICAgICBpZiAoZXhwZWN0ZWRfZXJy");
    sb.append("b3IpIHsKICAgICAgICAgICAgLy8gdGhlIGV4cGVjdGVkIGVycm9yIGlzIGEgY29ubmVjdGlvbiBldmVu");
    sb.append("dCwgc28gd2UgcHJvdGVjdCB0aGUgc2VydmljZSBhbmQganVtcCBiYWNrLW9mZiByaWdodCB0byBuZWFy");
    sb.append("IG1heCBvdmVyIGEgbmljZSBzcHJlYWQKICAgICAgICAgICAgcmV0cnlfc20uYmFja29mZiA9IE1hdGgu");
    sb.append("bWluKDEyNTAsIHJldHJ5X3NtLmJhY2tvZmYpICsgTWF0aC5yYW5kb20oKSAqIDEyNTA7CiAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICBpZiAoZXhwZWN0ZWRfZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNvbm5lY3QtbG9zc3xyZXRyeWluZy4uLiAoIiArIHJldHJ5X3NtLmJhY2tvZmYgKyAiKTsgcmVhc29u");
    sb.append("PSIgKyByZWFzb24gKyAoYmxpbmRfcmV0cnkgPyAiIFtibGluZF0iIDogIiIpKTsKICAgICAgICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25uZWN0LWZhaWx1cmV8cmV0cnlpbmcuLi4g");
    sb.append("KCIgKyByZXRyeV9zbS5iYWNrb2ZmICsgIik7IHJlYXNvbj0iICsgcmVhc29uICsgKGJsaW5kX3JldHJ5");
    sb.append("ID8gIiBbYmxpbmRdIiA6ICIiKSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBUT0RPOiBuZWVkIGEg");
    sb.append("ZGlmZmVyZW50IGZlZWRiYWNrIG1lY2hhbmlzbSAobWF5YmUgYSBudW1iZXIgdW5kZXIgdGhlIHdpZmkg");
    sb.append("aWNvbj8pCiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAg");
    sb.append("cmV0cnlfc20uZ28oKTsKICAgICAgICAgIH0sIHJldHJ5X3NtLmJhY2tvZmYpOwogICAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZ2F2ZSB1cCBjb25uZWN0aW9uOyIgKyBjby5sYWJlbCAr");
    sb.append("ICI7IHJlYXNvbj0iICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIg");
    sb.append("c2V0dXBfY28gPSBmdW5jdGlvbihkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKSB7CiAgICBjby52aWV3");
    sb.append("c3RhdGV0cmVlID0gc3RhdGUudmlldy50cmVlOwogICAgdmFyIHN5bmNfdHJlZSA9IGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgLy8gbGV0J3MgY29weSBvdXQgdGhlIHRyZWUgZnJvbSB0aGUgdmlld3N0YXRlCiAgICAg");
    sb.append("IHZhciBuZXdfdHJlZSA9IHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpOwoKICAgICAg");
    sb.append("Ly8gaWYgd2UgaGF2ZSBnb3QgYSBmaWx0ZXIgZnJvbSB0aGUgc2VydmVyLCB0aGVuIGxldCdzIGZpbHRl");
    sb.append("cgogICAgICBpZiAoY28uaGFzX2ZpbHRlcikgewogICAgICAgIC8vIHJlY29uc3RydWN0IHRoZSBuZXcg");
    sb.append("dmlldyBiYXNlZCBvbiB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoZSBmaWx0ZXIgYW5kIHRoZSBuZXcgc3Rh");
    sb.append("dGUKICAgICAgICB2YXIgZmlsdGVyZWQgPSB7fTsKICAgICAgICBmb3IgKHZhciBrIGluIG5ld190cmVl");
    sb.append("KSB7CiAgICAgICAgICBpZiAoY28uZmlsdGVyW2tdKSB7CiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0g");
    sb.append("bmV3X3RyZWVba107CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIGFzc3VtZSB0aGUgbmV3");
    sb.append("IHRyZWUKICAgICAgICBuZXdfdHJlZSA9IGZpbHRlcmVkOwogICAgICB9CiAgICAgIC8vIGlmIHRoZSBj");
    sb.append("bG9uZSAoaS5lLiBzdHJpbmdpZmllZCB2ZXJzaW9uKSBpcyB0aGUgc2FtZSBhcyB3aGF0IHdlIGxhc3Qg");
    sb.append("c2VudCwgdGhlbiBkb24ndCBzZW5kIGFueXRoaW5nCiAgICAgIHZhciBwcmlvcl9jbG9uZSA9IEpTT04u");
    sb.append("c3RyaW5naWZ5KG5ld190cmVlKTsKICAgICAgaWYgKHByaW9yX2Nsb25lID09IGNvLnZpZXdzdGF0ZV9j");
    sb.append("bG9uZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjby52aWV3c3RhdGVfc2VudCA9IGZh");
    sb.append("bHNlOwogICAgICBjby52c3NlcSsrOwogICAgICBjby5zeW5jKCk7CiAgICAgIHZhciBzeW5jZWQgPSBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGNvLnZzc2VxID09IHRoaXMuYm91bmQpIHsKICAgICAgICAg");
    sb.append("IGNvLnZpZXdzdGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAgICAgIGNvLnN5bmMoKTsKICAgICAgICB9CiAg");
    sb.append("ICAgIH0uYmluZCh7IGJvdW5kOiBjby52c3NlcSB9KTsKICAgICAgY28udmlld3N0YXRlX2Nsb25lID0g");
    sb.append("SlNPTi5zdHJpbmdpZnkobmV3X3RyZWUpOwogICAgICBjby5wdHIudXBkYXRlKG5ld190cmVlLCB7IHN1");
    sb.append("Y2Nlc3M6IHN5bmNlZCwgZmFpbHVyZTogc3luY2VkIH0pOwogICAgfTsKICAgIHZhciBiaW5kID0gZnVu");
    sb.append("Y3Rpb24gKHNlbmROb3cpIHsKICAgICAgdW5zdWIudmlldyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3Jp");
    sb.append("YmUoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChjby5wdHIgPT0gbnVsbCkgewogICAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICAgIH0KICAgICAgICBzeW5jX3RyZWUoKTsKICAgICAgfSk7CiAgICAgIGlmIChzZW5k");
    sb.append("Tm93KSB7CiAgICAgICAgc3luY190cmVlKCk7CiAgICAgIH0KICAgIH07CiAgICBpZiAoY28ucHRyICE9");
    sb.append("IG51bGwgJiYgY28uYm91bmQgPT0gZGVzaXJlZCkgewogICAgICBiaW5kKHRydWUpOwogICAgICByZXR1");
    sb.append("cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoY28ucHRyICE9IG51bGwpIHsKICAgICAgY28ucHRyLmVuZCh7");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHsgfSwgZmFpbHVyZTogZnVuY3Rpb24gKCkgeyB9IH0pOwogICAg");
    sb.append("ICBjby5wdHIgPSBudWxsOwogICAgfQogICAgcmV0dXJuIGJpbmQ7CiAgfTsKCiAgLy8gPGNvbm5lY3Rp");
    sb.append("b24gYmlsbGluZyAuLi4+CiAgc2VsZi5CQ09OTkVDVCA9IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsK");
    sb.append("ICAgIHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9Owog");
    sb.append("ICAgcnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCduYW1lJyBp");
    sb.append("biByeG9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGlkTG9va3VwID0gc2Vs");
    sb.append("Zi5JRChyeG9iai5pZGVudGl0eSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0p");
    sb.append("OwogICAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAg");
    sb.append("dmFyIGNvID0gZ2V0X2Nvbm5lY3Rpb25fb2JqKHJ4b2JqLm5hbWUpOwogICAgICB2YXIgZGVzaXJlZCA9");
    sb.append("ICI6YmlsbGluZzoiICsgaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIHZhciBiaW5kID0gc2V0dXBfY28o");
    sb.append("ZGVzaXJlZCwgdW5zdWIsIGNvLCBzdGF0ZSk7CiAgICAgIGlmIChiaW5kID09PSBmYWxzZSkgewogICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgfQogICAgICBjby5ib3VuZCA9IGRlc2lyZWQ7CiAgICAgIHZhciBpZGVu");
    sb.append("dGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFu");
    sb.append("dXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAg");
    sb.append("Y28uaGFuZGxlcnMgPSB7fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5s");
    sb.append("YWJlbCA9ICJCaWxsaW5nIFsgIiArIHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9iaWxsaW5n");
    sb.append("ID0gdHJ1ZTsKICAgICAgY28udmlhX2RvbWFpbiA9IGZhbHNlOwogICAgICB2YXIgcmV0cnlfc20gPSB7");
    sb.append("fTsKICAgICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNsZWFudXAsIHJl");
    sb.append("dHJ5X3NtKTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaWFzIHRv");
    sb.append("IG5vdGhpbmcgbmV3CiAgICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAgICAgICBjby5w");
    sb.append("dHIgPSBjb25uZWN0aW9uLkJpbGxpbmdDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByZXRyeV9zbS5y");
    sb.append("ZXNwb25kZXIpOwogICAgICB9OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0");
    sb.append("ZSh7fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgLy8gQ0hFQ0sgRk9SIE9WRVJS");
    sb.append("SURFIFNJR05BTCBIRVJFCiAgc2VsZi5kb21haW4gPSBsb2NhdGlvbi5ob3N0bmFtZTsKICBzZWxmLmhv");
    sb.append("c3QgPSBsb2NhdGlvbi5ob3N0OwogIHNlbGYucHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbDsKICBz");
    sb.append("ZWxmLmlzX21vYmlsZSA9IGZhbHNlOwoKICB2YXIgaG9zdE92ZXJyaWRlID0gbG9jYWxTdG9yYWdlLmdl");
    sb.append("dEl0ZW0oIm1kb19ob3N0Iik7IC8vIG11bHRpIGRvbWFpbiBlbmRwb2ludCBjaG9pY2UKICBpZiAoaG9z");
    sb.append("dE92ZXJyaWRlICE9IG51bGwpIHsKICAgIHNlbGYuaG9zdCA9IGhvc3RPdmVycmlkZTsKICAgIHNlbGYu");
    sb.append("ZG9tYWluID0gaG9zdE92ZXJyaWRlLnNwbGl0KCI6IilbMF07CiAgfQoKICBzZWxmLnVybF9wcmVmaXgg");
    sb.append("PSBzZWxmLnByb3RvY29sICsgIi8vIiArIHNlbGYuaG9zdDsKCgogIHNlbGYubW9iaWxlSW5pdCA9IGZ1");
    sb.append("bmN0aW9uKGRlZmF1bHRPdmVycmlkZURvbWFpbikgewogICAgc2VsZi5kb21haW4gPSBkZWZhdWx0T3Zl");
    sb.append("cnJpZGVEb21haW47CiAgICBzZWxmLmhvc3QgPSBkZWZhdWx0T3ZlcnJpZGVEb21haW47CiAgICBzZWxm");
    sb.append("LnByb3RvY29sID0gImh0dHBzOiI7CiAgICBjb25uZWN0aW9uLnByb3RvY29sID0gImh0dHBzOiI7CiAg");
    sb.append("ICBzZWxmLmlzX21vYmlsZSA9IHRydWU7CiAgfTsKICBzZWxmLm1vYmlsZUluaXRNdWx0aURvbWFpbiA9");
    sb.append("IGZ1bmN0aW9uKHN0YXJ0LCBiZXRhUHJlZml4LCBwcm9kUHJlZml4KSB7CiAgICBzZWxmLm1kX2JldGFQ");
    sb.append("cmVmaXggPSBiZXRhUHJlZml4OwogICAgc2VsZi5tZF9wcm9kUHJlZml4ID0gcHJvZFByZWZpeDsKICAg");
    sb.append("IHNlbGYucHJvdG9jb2wgPSAiaHR0cHM6IjsKICAgIGNvbm5lY3Rpb24ucHJvdG9jb2wgPSAiaHR0cHM6");
    sb.append("IjsKICAgIHNlbGYuaXNfbW9iaWxlID0gdHJ1ZTsKICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZp");
    sb.append("eFBhdGgoc3RhcnQpLCBmYWxzZSk7CiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChwKSB7");
    sb.append("CiAgICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBhdGgoc3RhcnQpLCBmYWxzZSk7CiAgICB9");
    sb.append("OwogIH07CiAgdmFyIGdldE9yQ3JlYXRlTWFuaWZlc3RzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZGIg");
    sb.append("PSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiX19kb21haW5fbWFuaWZlc3RzIik7CiAgICBpZiAoZGIgPT0g");
    sb.append("bnVsbCkgewogICAgICBkYiA9IHtzZXE6MCwgbWFuaWZlc3RzOltdfTsKICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("IGRiID0gSlNPTi5wYXJzZShkYik7CiAgICB9CiAgICByZXR1cm4gZGI7CiAgfTsKICB2YXIgc2F2ZU1h");
    sb.append("bmlmZXN0cyA9IGZ1bmN0aW9uKGRiKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiX19kb21haW5f");
    sb.append("bWFuaWZlc3RzIiwgSlNPTi5zdHJpbmdpZnkoZGIpKTsKICB9OwogIHNlbGYucmVnaXN0ZXJNYW5pZmVz");
    sb.append("dCA9IGZ1bmN0aW9uKHVybCkgewogICAgdmFyIGFkZCA9IGZ1bmN0aW9uKG1hbmlmZXN0KSB7CiAgICAg");
    sb.append("IHZhciBkYiA9IGdldE9yQ3JlYXRlTWFuaWZlc3RzKCk7CiAgICAgIG1hbmlmZXN0LnNvdXJjZSA9IHVy");
    sb.append("bDsKICAgICAgbWFuaWZlc3QuaWQgPSBkYi5zZXE7CiAgICAgIGRiLnNlcSsrOwogICAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewogICAgICAgIGlmIChkYi5tYW5p");
    sb.append("ZmVzdHNba10uc291cmNlID09IHVybCkgewogICAgICAgICAgZGIubWFuaWZlc3RzW2tdID0gbWFuaWZl");
    sb.append("c3Q7CiAgICAgICAgICBzYXZlTWFuaWZlc3RzKGRiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgICAgZGIubWFuaWZlc3RzLnB1c2gobWFuaWZlc3QpOwogICAgICBzYXZlTWFuaWZl");
    sb.append("c3RzKGRiKTsKICAgIH07CiAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHho");
    sb.append("dHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlT");
    sb.append("dGF0ZSA9PSA0KSB7CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgYWRk");
    sb.append("KEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAg");
    sb.append("ICB4aHR0cC5vcGVuKCJHRVQiLCB1cmwsIHRydWUpOwogICAgeGh0dHAuc2VuZCgpOwogIH07CiAgLy8g");
    sb.append("UlVOVElNRShtb2JpbGUpIHwgcng6YWN0aW9uPSJtYW5pZmVzdC1hZGQ6IgogIHNlbGYuTURfYSA9IGZ1");
    sb.append("bmN0aW9uKGRvbSwgdHlwZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChudWxsLCBkb20sIHR5cGUsIGZ1");
    sb.append("bmN0aW9uKCkgewogICAgICBzZWxmLnJlZ2lzdGVyTWFuaWZlc3QodHlwZW9mKHZhbHVlKSA9PSAnZnVu");
    sb.append("Y3Rpb24nID8gdmFsdWUoKSA6IHZhbHVlKTsKICAgIH0pOwogIH07CiAgLy8gUlVOVElNRShtb2JpbGUp");
    sb.append("IHwgcng6YWN0aW9uPSJtYW5pZmVzdC11c2U6IgogIHNlbGYuTURfdSA9IGZ1bmN0aW9uKGRvbSwgdHlw");
    sb.append("ZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChudWxsLCBkb20sIHR5cGUsIGZ1bmN0aW9uKCkgewogICAg");
    sb.append("ICB2YXIgaWQgPSBwYXJzZUludCh0eXBlb2YodmFsdWUpID09ICdmdW5jdGlvbicgPyB2YWx1ZSgpIDog");
    sb.append("dmFsdWUpOwogICAgICB2YXIgZGIgPSBnZXRPckNyZWF0ZU1hbmlmZXN0cygpOwogICAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBtYW5pZmVz");
    sb.append("dCA9IGRiLm1hbmlmZXN0c1trXTsKICAgICAgICBpZiAobWFuaWZlc3QuaWQgPT0gaWQpIHsKICAgICAg");
    sb.append("ICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtZG9faG9zdCIsIG5ldyBVUkwoZGIubWFuaWZlc3RzW2td");
    sb.append("LnNvdXJjZSkuaG9zdCk7CiAgICAgICAgICBpZiAobWFuaWZlc3QuYmV0YSkgewogICAgICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRlYyIsICJiZXRhIik7CiAgICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRlYyIsICJwcm9kIik7CiAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0p");
    sb.append("OwogIH07CiAgc2VsZi5tb2JpbGVMb2FkID0gZnVuY3Rpb24odXJsKSB7CiAgICB2YXIgcGFyc2VkID0g");
    sb.append("bmV3IFVSTCh1cmwpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kb19ob3N0IiwgcGFyc2VkLmhv");
    sb.append("c3QpOwogICAgaWYgKHBhcnNlZC5ob3N0LmVuZHNXaXRoKHNlbGYubWRfYmV0YVByZWZpeCkpIHsKICAg");
    sb.append("ICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAiYmV0YSIpOwogICAgfSBlbHNlIHsKICAgICAg");
    sb.append("bG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAicHJvZCIpOwogICAgfQogICAgd2luZG93LmxvY2F0");
    sb.append("aW9uLmhyZWYgPSBwYXJzZWQucGF0aDsKICB9OwogIC8vIFJVTlRJTUUobW9iaWxlKSB8IHJ4OmFjdGlv");
    sb.append("bj0ibWFuaWZlc3QtZGVsOiIKICBzZWxmLk1EX2QgPSBmdW5jdGlvbihkb20sIHR5cGUsIHZhbHVlKSB7");
    sb.append("CiAgICByZWdfZXZlbnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGlkID0g");
    sb.append("cGFyc2VJbnQodHlwZW9mKHZhbHVlKSA9PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZhbHVlKTsKICAg");
    sb.append("ICAgdmFyIGRiID0gZ2V0T3JDcmVhdGVNYW5pZmVzdHMoKTsKICAgICAgdmFyIG5ld19tYW5pZmVzdHMg");
    sb.append("PSBbXTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkYi5tYW5pZmVzdHMubGVuZ3RoOyBrKyspIHsK");
    sb.append("ICAgICAgICBpZiAoZGIubWFuaWZlc3RzW2tdLmlkICE9IGlkKSB7CiAgICAgICAgICBuZXdfbWFuaWZl");
    sb.append("c3RzLnB1c2goZGIubWFuaWZlc3RzW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZGIubWFuaWZl");
    sb.append("c3RzID0gbmV3X21hbmlmZXN0czsKICAgICAgc2F2ZU1hbmlmZXN0cyhkYik7CiAgICB9KTsKICB9OwoK");
    sb.append("ICAvLyA8Y29ubmVjdGlvbiB1c2UtZG9tYWluIC4uLj4KICBzZWxmLkRDT05ORUNUID0gZnVuY3Rpb24g");
    sb.append("KHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewogICAgICB2aWV3OiBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgaWYgKCEoJ25hbWUnIGluIHJ4b2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2");
    sb.append("YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlkZW50aXR5LCBmdW5jdGlvbiAoKSB7IHJldHVybiBy");
    sb.append("eG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewogICAgICAgIHJldHVy");
    sb.append("bjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9vYmoocnhvYmoubmFtZSk7CiAg");
    sb.append("ICAgIHZhciBkb21haW4gPSBzZWxmLmRvbWFpbjsKICAgICAgdmFyIGRlc2lyZWQgPSBkb21haW4gKyBp");
    sb.append("ZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1Yiwg");
    sb.append("Y28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3Vw");
    sb.append("LmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3Vi");
    sb.append("LnZpZXcoKTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgY28uaGFuZGxlcnMgPSB7");
    sb.append("fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5sYWJlbCA9ICJEb21haW46");
    sb.append("IiArIGRvbWFpbiArICIgWyAiICsgcnhvYmoubmFtZSArICJdIjsKICAgICAgY28udmlhX2RvbWFpbiA9");
    sb.append("IHRydWU7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gZmFsc2U7CiAgICAgIGNvLmRvbWFpbiA9IGRvbWFp");
    sb.append("bjsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRf");
    sb.append("cmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rp");
    sb.append("b24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0ZV9j");
    sb.append("bG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5Db25uZWN0aW9uQ3JlYXRlVmlh");
    sb.append("RG9tYWluKGlkZW50aXR5LCBkb21haW4sIHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkp");
    sb.append("LCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAgICB9OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBj");
    sb.append("by50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgLy8gPGNv");
    sb.append("bm5lY3Rpb24gLi4uPgogIHNlbGYuQ09OTkVDVCA9IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsKICAg");
    sb.append("IHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9OwogICAg");
    sb.append("cnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWxpZCA9ICdrZXkn");
    sb.append("IGluIHJ4b2JqICYmICdzcGFjZScgaW4gcnhvYmogJiYgJ25hbWUnIGluIHJ4b2JqOwogICAgICBpZiAo");
    sb.append("IXZhbGlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYu");
    sb.append("SUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsK");
    sb.append("ICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZh");
    sb.append("ciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRlc2lyZWQgPSBy");
    sb.append("eG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSArICIvIiArIGlkTG9va3VwLmlkZW50aXR5OyAvLyBU");
    sb.append("T0RPOiBuZWVkIHNvbWUga2luZCBvZiBoYXNoaW5nIGZ1bmN0aW9uIGhlcmUKICAgICAgdmFyIGJpbmQg");
    sb.append("PSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZh");
    sb.append("bHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKCiAg");
    sb.append("ICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlk");
    sb.append("TG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uc3BhY2UgPSByeG9iai5z");
    sb.append("cGFjZTsKICAgICAgY28ua2V5ID0gcnhvYmoua2V5OwogICAgICBjby5pZGVudGl0eSA9IGlkZW50aXR5");
    sb.append("OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3c3RhdGVfc2VudCA9IHRydWU7CiAg");
    sb.append("ICAgIGNvLmxhYmVsID0gY28uc3BhY2UgKyAiLyIgKyBjby5rZXkgKyAiIFsgIiArIHJ4b2JqLm5hbWUg");
    sb.append("KyAiXSI7CiAgICAgIGNvLnZpYV9kb21haW4gPSBmYWxzZTsKICAgICAgY28udmlhX2JpbGxpbmcgPSBm");
    sb.append("YWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJp");
    sb.append("bmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVu");
    sb.append("Y3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0");
    sb.append("ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5Db25uZWN0aW9uQ3JlYXRl");
    sb.append("KGlkZW50aXR5LCByeG9iai5zcGFjZSwgcnhvYmoua2V5LCBzYWZlX2ZpbHRlcihzdGF0ZS52aWV3LnRy");
    sb.append("ZWUuY29weSgpKSwgcmV0cnlfc20ucmVzcG9uZGVyKTsKICAgICAgfTsKICAgICAgcmV0cnlfc20uZ28o");
    sb.append("KTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwogICAgICBiaW5kKGZhbHNlKTsKICAgIH0pOwogIH07");
    sb.append("CgogIHNlbGYuSU5URVJOQUwgPSBmdW5jdGlvbiAocHJpb3JTdGF0ZSkgewogICAgcmV0dXJuIHsKICAg");
    sb.append("ICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IG51");
    sb.append("bGwsIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51");
    sb.append("bGwgfSwKICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgY3Vy");
    sb.append("cmVudDogImRhdGEiCiAgICB9OwogIH07CgogIHZhciByZWNhbGxfZW1haWwgPSBmdW5jdGlvbiAoZWwp");
    sb.append("IHsKICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIklOUFVUIikgewogICAgICBpZiAo");
    sb.append("ImVtYWlsIiA9PSBlbC50eXBlICYmICJlbWFpbCIgPT0gZWwubmFtZSkgewogICAgICAgIGVsLnZhbHVl");
    sb.append("ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVtYWlsX3JlbWVtYmVyIik7CiAgICAgIH0KICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNoaWxk");
    sb.append("cmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IG47IGsrKykgewogICAgICAgICAgcmVjYWxsX2VtYWlsKGVsLmNoaWxkcmVuW2tdKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLmFVUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRl");
    sb.append("bnRpdHlOYW1lLCByeG9iaikgewogICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChpZGVudGl0eU5hbWUs");
    sb.append("IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJ4X2ZvcndhcmQ7IH0pOyAvLyBUT0RPOiBtYWtlIHJ4");
    sb.append("dmFyCiAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9ybS5h");
    sb.append("Y3Rpb24gPSAiaHR0cHM6Ly8iICsgQWRhbWEuUHJvZHVjdGlvbiArICIvfnVwbG9hZCI7CiAgICBmb3Jt");
    sb.append("Lm1ldGhvZCA9ICJwb3N0IjsKICAgIGZvcm0uZW5jdHlwZSA9ICJtdWx0aXBhcnQvZm9ybS1kYXRhIjsK");
    sb.append("ICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAg");
    sb.append("IGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgaWRlbnRpdHlJbnB1dC5uYW1lID0gImlk");
    sb.append("ZW50aXR5IjsKICAgIGlkZW50aXR5SW5wdXQudmFsdWUgPSBpZExvb2t1cC5pZGVudGl0eTsKICAgIGZv");
    sb.append("cm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB2YXIgaWZyYW1lVGFyZ2V0ID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICBpZnJhbWVUYXJnZXQubmFtZSA9ICJVUExPQURf");
    sb.append("IiArIE1hdGgucmFuZG9tKCk7CiAgICBpZnJhbWVUYXJnZXQud2lkdGggPSAiMSI7CiAgICBpZnJhbWVU");
    sb.append("YXJnZXQuaGVpZ2h0ID0gIjEiOwoKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lVGFyZ2V0KTsKICAg");
    sb.append("IGZvcm0udGFyZ2V0ID0gaWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsKCiAgc2VsZi5hRFVQID0gZnVuY3Rp");
    sb.append("b24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICB2YXIgaWRMb29rdXAgPSBz");
    sb.append("ZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucnhfZm9yd2FyZDsg");
    sb.append("fSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewogICAgICByZXR1");
    sb.append("cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9IHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0");
    sb.append("ICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9kID0gInBvc3QiOwogICAgZm9ybS5lbmN0eXBlID0g");
    sb.append("Im11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgewogICAgICB2YXIgaWRlbnRpdHlJbnB1dCA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRk");
    sb.append("ZW4iOwogICAgICBpZGVudGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRpdHkiOwogICAgICBpZGVudGl0eUlu");
    sb.append("cHV0LnZhbHVlID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWRlbnRp");
    sb.append("dHlJbnB1dCk7CiAgICB9CiAgICB7CiAgICAgIHZhciBkb21haW5JbnB1dCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGRvbWFpbklucHV0LnR5cGUgPSAiaGlkZGVuIjsKICAgICAg");
    sb.append("ZG9tYWluSW5wdXQubmFtZSA9ICJkb21haW4iOwogICAgICBkb21haW5JbnB1dC52YWx1ZSA9IHNlbGYu");
    sb.append("ZG9tYWluOwogICAgICBmb3JtLmFwcGVuZENoaWxkKGRvbWFpbklucHV0KTsKICAgIH0KICAgIHZhciBp");
    sb.append("ZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAgIGlmcmFtZVRh");
    sb.append("cmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5yYW5kb20oKTsKICAgIGlmcmFtZVRhcmdldC53aWR0");
    sb.append("aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWlnaHQgPSAiMSI7CiAgICBmb3JtLmFwcGVuZENoaWxk");
    sb.append("KGlmcmFtZVRhcmdldCk7CiAgICBmb3JtLnRhcmdldCA9IGlmcmFtZVRhcmdldC5uYW1lOwogIH07Cgog");
    sb.append("IHZhciBzdGFzaF9pZGVudGl0eSA9IGZ1bmN0aW9uKG5hbWUsIGlkZW50aXR5LCBjb25uZWN0aW9uKSB7");
    sb.append("CiAgICB2YXIgcmVxID0ge307CiAgICByZXFbJ25hbWUnXSA9IG5hbWU7CiAgICByZXFbJ2lkZW50aXR5");
    sb.append("J10gPSBpZGVudGl0eTsKICAgIHJlcVsnbWF4LWFnZSddID0gNTUyOTYwMDsKCiAgICB2YXIgeGh0dHAg");
    sb.append("PSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgaWYgKHRoaXMu");
    sb.append("c3RhdHVzID09IDIwMCkgewogICAgICAgICAgY29ubmVjdGlvbi5JZGVudGl0eVN0YXNoKGlkZW50aXR5");
    sb.append("LCBuYW1lLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIC8v");
    sb.append("IFRISVMgSEFTIERSQUdPTlMgVU5USUwgQSBGVUxMIFBST0RVQ1RJT04gREVQTE9ZTUVOVAogICAgICAg");
    sb.append("ICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgbmFtZSwgImNvb2tpZToi");
    sb.append("ICsgbmFtZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uKHh5eikg");
    sb.append("ewoKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAg");
    sb.append("eGh0dHAub3BlbigiUFVUIiwgc2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiL35zdGFz");
    sb.append("aC8iICsgRGF0ZS5ub3coKSwgdHJ1ZSk7CiAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwog");
    sb.append("ICAgeGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShyZXEpKTsKICB9OwoKICB2YXIgZ2V0X2Zvcm1fYW5k");
    sb.append("X3B3ID0gZnVuY3Rpb24oZm9ybSkgewogICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgdmFyIHJlcSA9");
    sb.append("IGdldF9mb3JtKGZvcm0sIHBhc3N3b3Jkcyk7CiAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMp");
    sb.append("IHsKICAgICAgcmVxWydwYXNzd29yZCddID0gcGFzc3dvcmRzWydwYXNzd29yZCddOwogICAgfQogICAg");
    sb.append("aWYgKCduZXdfcGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICByZXFbJ25ld19wYXNzd29yZCdd");
    sb.append("ID0gcGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXTsKICAgIH0KICAgIHJldHVybiByZXE7CiAgfQoKICB2");
    sb.append("YXIgY29tbW9uQXV0aG9yaXplID0gZnVuY3Rpb24oZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhv");
    sb.append("YmosIG5leHRTdGVwKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRk");
    sb.append("RXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERl");
    sb.append("ZmF1bHQoKTsKICAgICAgdmFyIHNlbmRSZXEgPSBmdW5jdGlvbihyZXEpIHsKICAgICAgICB2YXIgc20g");
    sb.append("PSB7YXR0ZW1wdHM6MH07CiAgICAgICAgc20ucmVzcG9uZGVyID0gewogICAgICAgICAgc3VjY2Vzczog");
    sb.append("ZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0g");
    sb.append("cGF5bG9hZC5pZGVudGl0eTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5");
    sb.append("XyIgKyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAgICAgICBzdGFzaF9pZGVu");
    sb.append("dGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAg");
    sb.append("ICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgICAgc2VsZi5nb3RvKHJ4b2Jq");
    sb.append("LnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgZmly");
    sb.append("ZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgbmV4dFN0ZXAocmVxLCBzbS5yZXNwb25kZXIpOwog");
    sb.append("ICAgICB9CiAgICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtKGZv");
    sb.append("cm0sIHBhc3N3b3Jkcyk7CiAgICAgIGlmICgncGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICAg");
    sb.append("IHJlcVsncGFzc3dvcmQnXSA9IHBhc3N3b3Jkc1sncGFzc3dvcmQnXTsKICAgICAgfQogICAgICBpZiAo");
    sb.append("J25ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudHNI");
    sb.append("YXNoUGFzc3dvcmQocGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXSwgewogICAgICAgICAgc3VjY2Vzczog");
    sb.append("ZnVuY3Rpb24gKGhhc2hlZF9wdykgewogICAgICAgICAgICByZXFbJ25ld19wYXNzd29yZCddID0gaGFz");
    sb.append("aGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgc2VuZFJlcShyZXEpOwogICAgICAgICAgfSwK");
    sb.append("ICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9y");
    sb.append("bSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgc2VuZFJlcShyZXEpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9Cgog");
    sb.append("IC8vIHJ4OmFjdGlvbj1kb2N1bWVudDphdXRob3JpemUKICBzZWxmLmFET0MgPSBmdW5jdGlvbiAoZm9y");
    sb.append("bSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vbkF1dGhvcml6ZShmb3JtLCBz");
    sb.append("dGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rpb24ocmVxLCByZXNwb25kZXIpIHsKICAgICAg");
    sb.append("Y29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6YXRpb24ocmVxLnNwYWNlLCByZXEua2V5LCByZXEsIHJl");
    sb.append("c3BvbmRlcik7CiAgICB9KTsKICB9OwoKICAvLyByeDphY3Rpb249ZG9tYWluOmF1dGhvcml6ZQogIHNl");
    sb.append("bGYuYURPTSA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAg");
    sb.append("Y29tbW9uQXV0aG9yaXplKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbihy");
    sb.append("ZXEsIHJlc3BvbmRlcikgewogICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXphdGlvbkRvbWFp");
    sb.append("bihzZWxmLmRvbWFpbiwgcmVxLCByZXNwb25kZXIpOwogICAgfSk7CiAgfTsKCiAgLy8gcng6ZXZlbnQ9");
    sb.append("dG9nZ2xlLXBhc3N3b3JkCiAgc2VsZi5vblBXVCA9IGZ1bmN0aW9uKGRvbSwgc3RhdGUsIHR5cGUpIHsK");
    sb.append("ICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFy");
    sb.append("IGN1ciA9IGRvbTsKICAgICAgd2hpbGUgKGN1ci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIlBBU1NX");
    sb.append("T1JELUhPTERFUiIpIHsKICAgICAgICBjdXIgPSBjdXIucGFyZW50RWxlbWVudDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgaHVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICBpZiAobm9kZS50YWdOYW1lLnRvVXBw");
    sb.append("ZXJDYXNlKCkgPT0gIklOUFVUIiAmJiAobm9kZS5uYW1lID09ICJwYXNzd29yZCIgfHwgbm9kZS5uYW1l");
    sb.append("ID09ICJjb25maXJtLXBhc3N3b3JkIiB8fCBuYW1lID09ICJuZXdfcGFzc3dvcmQiIHx8IG5hbWUgPT0g");
    sb.append("ImNvbmZpcm0tbmV3X3Bhc3N3b3JkIikpIHsKICAgICAgICAgIGlmIChub2RlLnR5cGUgPT0gInBhc3N3");
    sb.append("b3JkIikgewogICAgICAgICAgICBub2RlLnR5cGUgPSAidGV4dCIKICAgICAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgICAgIG5vZGUudHlwZSA9ICJwYXNzd29yZCIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAg");
    sb.append("ICAgaWYgKCdjaGlsZHJlbicgaW4gbm9kZSkgewogICAgICAgICAgdmFyIGNoID0gbm9kZS5jaGlsZHJl");
    sb.append("bjsKICAgICAgICAgIHZhciBuID0gY2gubGVuZ3RoOwogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsg");
    sb.append("PCBuOyBrKyspIHsKICAgICAgICAgICAgaHVudChjaFtrXSk7CiAgICAgICAgICB9CiAgICAgICAgfQog");
    sb.append("ICAgICB9OwogICAgICBpZiAoY3VyICE9IG51bGwpIHsKICAgICAgICBodW50KGN1cik7CiAgICAgIH0K");
    sb.append("ICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnNpZ24taW4gKHRvIGRl");
    sb.append("cHJlY2F0ZSkKICBzZWxmLmFkRFNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUs");
    sb.append("IHJ4b2JqKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRM");
    sb.append("aXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQo");
    sb.append("KTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgdmFyIHNtID0ge2F0");
    sb.append("dGVtcHRzOjB9OwogICAgICBzbS5yZXNwb25kZXIgPSB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24g");
    sb.append("KHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRl");
    sb.append("bnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5");
    sb.append("TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5h");
    sb.append("bWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgLy8gVE9ETzogYmxvdyBh");
    sb.append("d2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2Up");
    sb.append("OwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTog");
    sb.append("ZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2ln");
    sb.append("bmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfTsKICAgICAgY29u");
    sb.append("bmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbihzZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCBy");
    sb.append("ZXEucGFzc3dvcmQsIHNtLnJlc3BvbmRlcik7CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUg");
    sb.append("fCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbiAodG8gZGVwcmVjYXRlKQogIHNlbGYuYURTTyA9IGZ1");
    sb.append("bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAg");
    sb.append("ICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3Vi");
    sb.append("bWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFy");
    sb.append("IHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhv");
    sb.append("cml6ZShyZXEuc3BhY2UsIHJlcS5rZXksIHJlcS51c2VybmFtZSwgcmVxLnBhc3N3b3JkLCB7CiAgICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRp");
    sb.append("dHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgi");
    sb.append("aWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICAvLyBU");
    sb.append("T0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3");
    sb.append("YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAg");
    sb.append("ICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwg");
    sb.append("IkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9");
    sb.append("KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnNpZ24t");
    sb.append("aW4tcmVzZXQgKHRvIGRlcHJlY2F0ZSkKICBzZWxmLmFkRFNPciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0");
    sb.append("ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0");
    sb.append("aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2");
    sb.append("dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2Fu");
    sb.append("ZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNl");
    sb.append("dChzZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHJlcS5uZXdfcGFzc3dvcmQs");
    sb.append("ewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBpZGVudGl0aWVz");
    sb.append("W2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50aXR5OwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNl");
    sb.append("dEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAg");
    sb.append("ICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmou");
    sb.append("cnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0s");
    sb.append("CiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJl");
    sb.append("KGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0K");
    sb.append("ICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1l");
    sb.append("bnQ6c2lnbi1pbi1yZXNldCAodG8gZGVwcmVjYXRlKQogIHNlbGYuYURTT3IgPSBmdW5jdGlvbiAoZm9y");
    sb.append("bSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsgLy8gREVQUkVDQVRFRAogICAgcnhvYmouX18g");
    sb.append("PSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0");
    sb.append("aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRf");
    sb.append("Zm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemVXaXRoUmVz");
    sb.append("ZXQocmVxLnNwYWNlLCByZXEua2V5LCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29yZCwgcmVxLm5ld19w");
    sb.append("YXNzd29yZCx7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlk");
    sb.append("ZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0");
    sb.append("b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7");
    sb.append("CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290");
    sb.append("byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAg");
    sb.append("ICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJl");
    sb.append("X2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAg");
    sb.append("ICAgICAgfQogICAgICB9LCB0cnVlKTsKICAgIH0pOwogIH07CgogIHNlbGYuYXV0b2dlbmlkID0gMTsK");
    sb.append("ICBzZWxmLlggPSBmdW5jdGlvbigpIHsKICAgIHNlbGYuYXV0b2dlbmlkKys7CiAgICByZXR1cm4gJ3gn");
    sb.append("ICsgc2VsZi5hdXRvZ2VuaWQ7CiAgfTsKCiAgdmFyIHRyYW5zZm9ybXMgPSB7fTsKICB0cmFuc2Zvcm1z");
    sb.append("WydwcmluY2lwYWwuYWdlbnQnXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguYWdlbnQ7IH07CiAgdHJh");
    sb.append("bnNmb3Jtc1sncHJpbmNpcGFsLmF1dGhvcml0eSddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geC5hdXRo");
    sb.append("b3JpdHk7IH07CiAgdHJhbnNmb3Jtc1sndHJpbSddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gKCcnICsg");
    sb.append("eCkudHJpbSgpOyB9OwogIHRyYW5zZm9ybXNbJ3VwcGVyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAo");
    sb.append("JycgKyB4KS50b1VwcGVyQ2FzZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2xvd2VyJ10gPSBmdW5jdGlvbih4");
    sb.append("KSB7IHJldHVybiAoJycgKyB4KS50b0xvd2VyQ2FzZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2lzX2VtcHR5");
    sb.append("X3N0ciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geCA9PSAiIjsgfTsKICB0cmFuc2Zvcm1zWydpc19u");
    sb.append("b3RfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiB4ICE9ICIiOyB9OwogIHRyYW5zZm9y");
    sb.append("bXNbJ2pzb25pZnknXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHgpOyB9Owog");
    sb.append("IHRyYW5zZm9ybXNbJ3RpbWVfbm93J10gPSBmdW5jdGlvbih4KSB7IHJldHVybiBEYXRlLm5vdygpICsg");
    sb.append("IiI7IH07CiAgdHJhbnNmb3Jtc1snc2l6ZV9ieXRlcyddID0gZnVuY3Rpb24oeHJhdykgewogICAgdmFy");
    sb.append("IHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdudW1iZXInKSB7CiAgICAgIHggPSB4cmF3");
    sb.append("OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4ID0gcGFyc2VGbG9hdCh4cmF3KTsKICAg");
    sb.append("ICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAgIHZhciBpdmFsID0gTWF0aC5mbG9vcih4");
    sb.append("KTsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gaXZhbCArICIgQiI7CiAgICB9CiAg");
    sb.append("ICBpdmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8IDEwMjQpIHsKICAgICAgcmV0dXJuIE1hdGgucm91");
    sb.append("bmQoaXZhbCAqIDEwKSAvIDEwLjAgKyAiIEtCIjsKICAgIH0KICAgIGl2YWwgLz0gMTAyNDsKICAgIGlm");
    sb.append("IChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChpdmFsICogMTApIC8gMTAuMCAr");
    sb.append("ICIgTUIiOwogICAgfQogICAgaXZhbCAvPSAxMDI0OwogICAgaWYgKGl2YWwgPCAxMDI0KSB7CiAgICAg");
    sb.append("IHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkgLyAxMC4wICsgIiBHQiI7CiAgICB9CiAgfQogIHRy");
    sb.append("YW5zZm9ybXNbJ3Z1bGdhcl9mcmFjdGlvbiddID0gZnVuY3Rpb24oeHJhdykgewogICAgdmFyIHggPSAw");
    sb.append("LjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdudW1iZXInKSB7CiAgICAgIHggPSB4cmF3OwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4ID0gcGFyc2VGbG9hdCh4cmF3KTsKICAgICAgfSBj");
    sb.append("YXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAgIHZhciBpdmFsID0gTWF0aC5mbG9vcih4KTsKICAg");
    sb.append("IHZhciBjaGFuZ2UgPSB4IC0gaXZhbDsKICAgIHZhciBzdWZmaXggPSAiIjsKICAgIGlmIChjaGFuZ2Ug");
    sb.append("PD0gMC4wNjI1KSB7CiAgICAgIC8vIDAKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuMTg3NSkgewog");
    sb.append("ICAgICBzdWZmaXggPSAi4oWbIjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuMzEyNSkgewogICAg");
    sb.append("ICBzdWZmaXggPSAiwrwiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC40Mzc1KSB7CiAgICAgIHN1");
    sb.append("ZmZpeCA9ICLihZwiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC41NjI1KSB7CiAgICAgIHN1ZmZp");
    sb.append("eCA9ICLCvSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjY4NzUpIHsKICAgICAgc3VmZml4ID0g");
    sb.append("IuKFnSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjgxMjUpIHsKICAgICAgc3VmZml4ID0gIsK+");
    sb.append("IjsgLy8gMy80CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjkzNzUpIHsKICAgICAgc3VmZml4ID0g");
    sb.append("IuKFniI7CiAgICB9IC8vIGVsc2UgMQogICAgcmV0dXJuIGl2YWwgKyBzdWZmaXg7CiAgfQogIHRyYW5z");
    sb.append("Zm9ybXNbJ3RpbWVfYWdvJ10gPSBmdW5jdGlvbihkdCwgZm9ybWF0KSB7CiAgICAvLyBvbmx5IHRyYW5z");
    sb.append("Zm9ybSBzdHJpbmdzCiAgICBpZiAodHlwZW9mIChkdCkgPT0gInN0cmluZyIpIHsKICAgICAgLy8gbGV0");
    sb.append("J3Mgc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGJyYWNrZXRzCiAgICAgIHZhciBzID0gZHQ7");
    sb.append("CiAgICAgIHZhciBrID0gcy5pbmRleE9mKCdbJyk7CiAgICAgIGlmIChrID49IDApIHsKICAgICAgICBz");
    sb.append("ID0gcy5zdWJzdHJpbmcoMCwgayk7CiAgICAgIH0KICAgICAgdmFyIGQgPSBEYXRlLnBhcnNlKHMpOwog");
    sb.append("ICAgICBpZiAoTnVtYmVyLmlzTmFOKGQpKSB7CiAgICAgICAgLy8gaXQgaXNuJ3QgYSBudW1iZXIsIHNv");
    sb.append("IHdlIGRpZG4ndCBnZXQgYSBkYXRlIHN0YW1wOyBkZWZhdWx0IHRvIHRoZSBpbnB1dAogICAgICAgIHJl");
    sb.append("dHVybiBkdDsKICAgICAgfQogICAgICAvLyB3ZSBhcmUgaW50ZXJlc3RlZCBpbiBwcm9kdWNpbmcgYSBz");
    sb.append("dHJpbmcgbGlrZSAiWCBtaW51dGVzIGFnbyIsIHNvIHN0YXJ0IHdpdGggc2Vjb25kcwogICAgICB2YXIg");
    sb.append("ZGVsdGEgPSAoRGF0ZS5ub3coKSAtIGQpLzEwMDA7IC8vIHNlY29uZHM7CiAgICAgIGlmIChkZWx0YSA8");
    sb.append("IDYwKSB7CiAgICAgICAgcmV0dXJuICJMZXNzIHRoYW4gYSBtaW51dGUgYWdvIjsKICAgICAgfQogICAg");
    sb.append("ICAvLyBpdCB3YXNuJ3QgOTAgc2Vjb25kcyBhZ28gb3IgbGVzcywgc28gbGV0J3MgcmVmaW5lIHRvd2Fy");
    sb.append("ZHMgbWludXRlcwogICAgICBkZWx0YSAvPSA2MDsgLy8gbm93IGl0IGlzIG1pbnV0ZXMKICAgICAgaWYg");
    sb.append("KGRlbHRhIDwgNjApIHsKICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihkZWx0YSkgKyAiIG1pbnV0ZXMg");
    sb.append("YWdvIjsKICAgICAgfQogICAgICBpZiAoZGVsdGEgPiAyLjYyOGUrNykgewogICAgICAgIHJldHVybiAi");
    sb.append("TmV2ZXIiOwogICAgICB9CiAgICAgIC8vIGl0IHdhc24ndCA5MCBtaW51dGVzIGFnbywgc28gbGV0J3Mg");
    sb.append("anVzdCBwdXQgdGhlIHRpbWUgc3RhbXAgdXAKICAgICAgdmFyIGR0aGVuID0gbmV3IERhdGUoZCk7CiAg");
    sb.append("ICAgIHZhciBkbm93ID0gbmV3IERhdGUoKTsKICAgICAgdmFyIG9wdHMgPSB7fTsKICAgICAgaWYgKGZv");
    sb.append("cm1hdCl7CiAgICAgICAgZm9ybWF0LnRyaW0oKS5zcGxpdCgiIikuZm9yRWFjaChjaGFyID0+IHsKICAg");
    sb.append("ICAgICAgIGNvbnN0IGtleXMgPSB7ImgiOiAiaG91ciIsICJtIjogIm1pbnV0ZSIsICJzIjogInNlY29u");
    sb.append("ZCJ9CiAgICAgICAgICBpZiAoY2hhciBpbiBrZXlzKXsKICAgICAgICAgICAgb3B0c1trZXlzW2NoYXJd");
    sb.append("XSA9ICJudW1lcmljIjsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICAgIGlmIChkdGhl");
    sb.append("bi50b0xvY2FsZURhdGVTdHJpbmcoKSAhPSBkbm93LnRvTG9jYWxlRGF0ZVN0cmluZygpKSB7CiAgICAg");
    sb.append("ICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlRGF0ZVN0cmluZygpICsgIiAiICsgZHRoZW4udG9Mb2NhbGVU");
    sb.append("aW1lU3RyaW5nKFtdLCBvcHRzKTsKICAgICAgfQogICAgICByZXR1cm4gZHRoZW4udG9Mb2NhbGVUaW1l");
    sb.append("U3RyaW5nKFtdLCBvcHRzKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgcmV0");
    sb.append("dXJuIGR0OwogICAgfQogIH07CgogIHRyYW5zZm9ybXNbJ3RpbWUnXSA9IGZ1bmN0aW9uKGR0KSB7CiAg");
    sb.append("ICAgICAgLy8gb25seSB0cmFuc2Zvcm0gc3RyaW5ncwogICAgaWYgKHR5cGVvZiAoZHQpID09ICJzdHJp");
    sb.append("bmciKSB7CiAgICAgIC8vIGxldCdzIHN0cmlwIG91dCBldmVyeXRoaW5nIGFmdGVyIHRoZSBicmFja2V0");
    sb.append("cwogICAgICB2YXIgcyA9IGR0OwogICAgICB2YXIgayA9IHMuaW5kZXhPZignWycpOwogICAgICBpZiAo");
    sb.append("ayA+PSAwKSB7CiAgICAgICAgcyA9IHMuc3Vic3RyaW5nKDAsIGspOwogICAgICB9CgogICAgICAvLyBD");
    sb.append("b252ZXJ0IHN0cmluZyB0byB0aW1lIGZvcm1hdAogICAgICB2YXIgdCA9IGR0LmluZGV4T2YoIjoiKTsK");
    sb.append("ICAgICAgaWYgKHQgPCAwKSB7CiAgICAgICAgcmV0dXJuIGR0OwogICAgICB9CiAgICAgIHZhciBoID0g");
    sb.append("ZHQuc3BsaXQoIjoiKVswXTsKICAgICAgdmFyIGhvdXJzID0gaDsKICAgICAgaWYgKGgubGVuZ3RoID4g");
    sb.append("MikgewogICAgICAgIGhvdXJzID0gaC5zdWJzdHJpbmcoaC5sZW5ndGggLSAyLCBoLmxlbmd0aCk7IC8v");
    sb.append("IHRyaW0gbGVmdCBpbiBjYXNlIG9mIGRhdGV0aW1lCiAgICAgIH0KICAgICAgdmFyIEFtT3JQbSA9IGhv");
    sb.append("dXJzID49IDEyID8gJ3BtJyA6ICdhbSc7CiAgICAgIGhvdXJzID0gKGhvdXJzICUgMTIpIHx8IDEyOwog");
    sb.append("ICAgICB2YXIgbSA9IGR0LnNwbGl0KCI6IilbMV0KICAgICAgdmFyIG1pbnV0ZXMgPSBtOwogICAgICBp");
    sb.append("ZiAobS5sZW5ndGggPiAyKSB7CiAgICAgICAgbWludXRlcyA9IG0uc3Vic3RyaW5nKDAsMik7IC8vIHRy");
    sb.append("aW0gcmlnaHQgaW4gY2FzZSBvZiBkYXRldGltZQogICAgICB9CgogICAgICByZXR1cm4gaG91cnMgKyAi");
    sb.append("OiIgKyBtaW51dGVzICsgIiAiICsgQW1PclBtOyAKICAgIH0gZWxzZSB7CiAgICAgIC8vIGRvIG5vdGhp");
    sb.append("bmcKICAgICAgcmV0dXJuIGR0OwogICAgfQogIH07CgogIHRyYW5zZm9ybXNbJ2RhdGUtZm9ybWF0J10g");
    sb.append("PSBmdW5jdGlvbihkLCBmb3JtYXQpIHsKICAgIGlmICh0eXBlb2YgKGQpID09ICJzdHJpbmciKSB7CiAg");
    sb.append("ICAgIC8vIGlmIGRhdGUgaXMgbm90IHNldCwgcmV0dXJuIGVtcHR5IHN0cmluZwogICAgICBpZiAoZCA9");
    sb.append("PSAiMS0wMS0wMSIpIHJldHVybiAiIgoKICAgICAgY29uc3QgcCA9IGZvcm1hdC50b0xvd2VyQ2FzZSgp");
    sb.append("LnNwbGl0KCIvIik7CiAgICAgIGNvbnN0IG9wdHMgPSB7fTsKICAgICAgcC5mb3JFYWNoKGYgPT4gewog");
    sb.append("ICAgICAgIGNvbnN0IHZhbCA9IGYubGVuZ3RoID4gMiA/ICJudW1lcmljIiA6ICIyLWRpZ2l0IjsKICAg");
    sb.append("ICAgICBjb25zdCBrZXlzID0geyJ5IjogInllYXIiLCAibSI6ICJtb250aCIsICJkIjogImRheSJ9CiAg");
    sb.append("ICAgICAgb3B0c1trZXlzW2YuY2hhckF0KDApXV0gPSB2YWw7CiAgICAgIH0pCgogICAgICAvLyBpZiBu");
    sb.append("b3QgZGF0ZXRpbWUsIGNvbnZlcnRpbmcgdG8gb25lIGhlcmUgdG8gcHJldmVudCB0aW1lem9uZSBpc3N1");
    sb.append("ZXMKICAgICAgY29uc3QgZGF0ZXRpbWUgPSBkLmluY2x1ZGVzKCJUIikgPyBkIDogZCArICJUMDA6MDA6");
    sb.append("MDAiOwogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZXRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4t");
    sb.append("VVMnLCBvcHRzKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgcmV0dXJuIGQ7");
    sb.append("CiAgICB9CiAgfQogIAoKICBzZWxmLlJUUiA9IGZ1bmN0aW9uKG5hbWUsIHRyYW5zZm9ybSkgewogICAg");
    sb.append("dHJhbnNmb3Jtc1tuYW1lXSA9IHRyYW5zZm9ybTsKICB9OwogIHNlbGYucmVnaXN0ZXJUcmFuc2Zvcm0g");
    sb.append("PSBzZWxmLlJUUjsKCiAgLy8ge2JsYWh8bmFtZX0KICBzZWxmLlRSID0gZnVuY3Rpb24obmFtZSkgewog");
    sb.append("ICAgaWYgKG5hbWUgaW4gdHJhbnNmb3JtcykgewogICAgICByZXR1cm4gdHJhbnNmb3Jtc1tuYW1lXTsK");
    sb.append("ICAgIH0gCiAgICAvLyBleDogZGF0ZS1mb3JtYXQ6bW0vZGQveXkKICAgIGlmIChuYW1lLmluY2x1ZGVz");
    sb.append("KCI6IikpewogICAgICBjb25zdCBba2V5LCBmb3JtYXRdICA9IG5hbWUuc3BsaXQoIjoiKTsKICAgICAg");
    sb.append("aWYgKGtleSBpbiB0cmFuc2Zvcm1zKSB7CiAgICAgICAgcmV0dXJuIHggPT4gdHJhbnNmb3Jtc1trZXld");
    sb.append("KHgsIGZvcm1hdCk7CiAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHsgcmV0");
    sb.append("dXJuIHg7IH07CiAgfTsKCiAgLy8gVE9ETwogIHZhciB2YWxpZGF0b3JzID0ge307CiAgc2VsZi5SViA9");
    sb.append("IGZ1bmN0aW9uKG5hbWUsIHZhbGlkYXRvcikgewogICAgdmFsaWRhdG9yc1tuYW1lXSA9IHZhbGlkYXRv");
    sb.append("cjsKICB9OwogIHNlbGYucmVnaXN0ZXJWYWxpZGF0b3IgPSBzZWxmLlJWOwoKICB2YXIgY29tbW9uUHV0");
    sb.append("ID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCB1cmxmYWN0b3J5KSB7");
    sb.append("CiAgICAvLyBXSVAKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRFdmVu");
    sb.append("dExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVs");
    sb.append("dCgpOwogICAgICB2YXIgcGFzc3dvcmRzID0ge307CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3Jt");
    sb.append("LCBwYXNzd29yZHMpOwoKICAgICAgdmFyIG5leHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHVy");
    sb.append("bCA9IHVybGZhY3RvcnkocnhvYmopOwogICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVz");
    sb.append("dCgpOwogICAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("ICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCkgewogICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMg");
    sb.append("PT0gMjAwKSB7CiAgICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLmdldFJlc3BvbnNlSGVhZGVyKCJD");
    sb.append("b250ZW50LVR5cGUiKTsKICAgICAgICAgICAgICBpZiAodHlwZSA9PSAidGV4dC9lcnJvciIpIHsKICAg");
    sb.append("ICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCB0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAg");
    sb.append("ICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJhcHBsaWNhdGlv");
    sb.append("bi9qc29uIikgewogICAgICAgICAgICAgICAgdmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKHRoaXMucmVz");
    sb.append("cG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIGlmICgnaWRlbnRpdHknIGluIHBheWxvYWQpIHsKICAg");
    sb.append("ICAgICAgICAgICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0eTsK");
    sb.append("ICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0");
    sb.append("eU5hbWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0K");
    sb.append("ICAgICAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAg");
    sb.append("ICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAgICAgICBmb3JtLmRpc3BhdGNoRXZlbnQobmV3");
    sb.append("IEV2ZW50KCJzdWJtaXR0ZWQiKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZmly");
    sb.append("ZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gY29tbXVuaWNhdGUgdG8gc2VydmVyIik7CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHVybCwg");
    sb.append("dHJ1ZSk7CiAgICAgICAgeGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgICB4aHR0cC5z");
    sb.append("ZW5kKEpTT04uc3RyaW5naWZ5KHJlcSkpOwogICAgICB9OwoKICAgICAgaWYgKCdwYXNzd29yZCcgaW4g");
    sb.append("cGFzc3dvcmRzKSB7CiAgICAgICAgaWYgKCEoJ2NvbmZpcm0tcGFzc3dvcmQnIGluIHBhc3N3b3Jkcykg");
    sb.append("fHwgcGFzc3dvcmRzWydwYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29uZmlybS1wYXNzd29yZCddKSB7");
    sb.append("CiAgICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZHNbJ3Bhc3N3");
    sb.append("b3JkJ10sIHsKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhc2hlZF9wdykgewogICAgICAg");
    sb.append("ICAgICAgIHJlcVsncGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29yZEhhc2g7CiAgICAgICAgICAg");
    sb.append("ICAgbmV4dCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7");
    sb.append("CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaXJl");
    sb.append("X2ZhaWx1cmUoZm9ybSwgIlBhc3N3b3JkcyBkb24ndCBtYXRjaCIpOwogICAgICAgIH0KICAgICAgfSBl");
    sb.append("bHNlIHsKICAgICAgICBuZXh0KCk7CiAgICAgIH0KICAgIH0sIHRydWUpOwogIH0KCiAgLy8gUlVOVElN");
    sb.append("RSB8IHJ4OmFjdGlvbj1kb21haW46cHV0CiAgc2VsZi5hZERQVVQgPSBmdW5jdGlvbiAoZm9ybSwgc3Rh");
    sb.append("dGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vblB1dChmb3JtLCBzdGF0ZSwgaWRlbnRp");
    sb.append("dHlOYW1lLCByeG9iaiwgZnVuY3Rpb24gKHJ4b2JqKSB7IHJldHVybiBzZWxmLnByb3RvY29sICsgIi8v");
    sb.append("IiArIHNlbGYuaG9zdCArICIvIiArIHJ4b2JqLnBhdGg7IH0pCiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4");
    sb.append("OmFjdGlvbj1kb2N1bWVudDpwdXQKICBzZWxmLmFEUFVUID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBp");
    sb.append("ZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICBjb21tb25QdXQoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFt");
    sb.append("ZSwgcnhvYmosIGZ1bmN0aW9uIChyeG9iaikgeyByZXR1cm4gc2VsZi5wcm90b2NvbCArICIvLyIgKyBj");
    sb.append("b25uZWN0aW9uLmhvc3QgKyAiLyIgKyByeG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSArICIvIiAr");
    sb.append("IHJ4b2JqLnBhdGg7IH0pCiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFtYTpzaWduLWlu");
    sb.append("CiAgc2VsZi5hU08gPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsK");
    sb.append("ICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICByZWNhbGxfZW1haWwoZm9ybSk7CiAgICB9LCAxKTsKICAgIC8vIFRPRE86IHB1");
    sb.append("bGwgZW1haWwgb3V0IG9mIHRoaW4gYWlyCiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcs");
    sb.append("IGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEg");
    sb.append("PSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGlmIChyZXEucmVtZW1iZXIpIHsKICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZW1haWxfcmVtZW1iZXIiLCByZXEuZW1haWwpOwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFpbF9yZW1lbWJlciIsICIiKTsKICAg");
    sb.append("ICAgfQogICAgICBjb25uZWN0aW9uLkFjY291bnRMb2dpbihyZXEuZW1haWwsIHJlcS5wYXNzd29yZCwg");
    sb.append("ewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBpZGVudGl0aWVz");
    sb.append("W2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50aXR5OwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNl");
    sb.append("dEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAg");
    sb.append("ICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vz");
    sb.append("cyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAg");
    sb.append("ICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiQWNjb3VudExvZ2luIEZhaWxlZDoiICsgcmVhc29uKTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFj");
    sb.append("dGlvbj1hZGFtYTpzaWduLXVwCiAgc2VsZi5hU1UgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGZvcndh");
    sb.append("cmRUbykgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7");
    sb.append("CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwg");
    sb.append("e30pOwogICAgICBjb25uZWN0aW9uLkluaXRTZXR1cEFjY291bnQocmVxLmVtYWlsLCB7CiAgICAgICAg");
    sb.append("c3VjY2VzczogZnVuY3Rpb24gKC8qIHBheWxvYWQgKi8pIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5z");
    sb.append("ZXRJdGVtKCJlbWFpbCIsIHJlcS5lbWFpbCk7CiAgICAgICAgICBzZWxmLmdvdG8oZm9yd2FyZFRvLCBm");
    sb.append("YWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWls");
    sb.append("dXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkluaXRT");
    sb.append("ZXR1cEFjY291bnQgRmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0");
    sb.append("cnVlKTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNldC1wYXNzd29yZAogIHNl");
    sb.append("bGYuYVNQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBmb3J3YXJkVG8pIHsKICAgIGZvcm0uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1");
    sb.append("bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgaWYgKCEoImVt");
    sb.append("YWlsIiBpbiByZXEpKSB7CiAgICAgICAgcmVxLmVtYWlsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVt");
    sb.append("YWlsIik7CiAgICAgIH0KICAgICAgY29ubmVjdGlvbi5Jbml0Q29tcGxldGVBY2NvdW50KHJlcS5lbWFp");
    sb.append("bCwgZmFsc2UsIHJlcS5jb2RlLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGluaXQpIHsKICAg");
    sb.append("ICAgICAgIHZhciBpZGVudGl0eSA9IGluaXQuaWRlbnRpdHk7CiAgICAgICAgICBjb25uZWN0aW9uLkFj");
    sb.append("Y291bnRTZXRQYXNzd29yZChpbml0LmlkZW50aXR5LCByZXEucGFzc3dvcmQsIHsKICAgICAgICAgICAg");
    sb.append("c3VjY2VzczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJp");
    sb.append("ZGVudGl0eV9kZWZhdWx0IiwgaWRlbnRpdHkpOwogICAgICAgICAgICAgIHNlbGYuZ290byhmb3J3YXJk");
    sb.append("VG8sIGZhbHNlKTsKICAgICAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICAgIH0s");
    sb.append("CiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICBmaXJl");
    sb.append("X2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBBY2NvdW50U2V0UGFzc3dvcmQ6IiArIHJlYXNvbik7CiAgICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24g");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgSW5pdENvbXBsZXRl");
    sb.append("QWNjb3VudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsK");
    sb.append("CgogIHZhciBoeWRyYXRlX2Zvcm0gPSBmdW5jdGlvbihlbCwgaW5wdXQpIHsKICAgIHZhciB0YWcgPSBl");
    sb.append("bC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7CiAgICB2YXIgaXNTZXR0YWJsZSA9IHRhZyA9PSAiU0VMRUNU");
    sb.append("IiB8fCB0YWcgPT0gIklOUFVUIiB8fCB0YWcgPT0gIkhJRERFTiI7CiAgICBpZiAoJ25hbWUnIGluIGVs");
    sb.append("ICYmIGlzU2V0dGFibGUpIHsKICAgICAgdmFyIG5hbWUgPSBlbC5uYW1lOwogICAgICB2YXIgcGF5bG9h");
    sb.append("ZCA9IGlucHV0OwogICAgICB2YXIga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhPZign");
    sb.append("LicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIHdoaWxlIChrRG90T3JTbGFzaCA+IDApIHsKICAg");
    sb.append("ICAgICB2YXIgaXRlbSA9IG5hbWUuc3Vic3RyaW5nKDAsIGtEb3RPclNsYXNoKTsKICAgICAgICBuYW1l");
    sb.append("ID0gbmFtZS5zdWJzdHJpbmcoa0RvdE9yU2xhc2ggKyAxKTsKICAgICAgICBpZiAoaXRlbSBpbiBwYXls");
    sb.append("b2FkKSB7CiAgICAgICAgICBwYXlsb2FkID0gcGF5bG9hZFtpdGVtXTsKICAgICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIo");
    sb.append("bmFtZS5pbmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgfQogICAgICBpZiAobmFt");
    sb.append("ZSBpbiBwYXlsb2FkKSB7CiAgICAgICAgdmFyIHR5cGUgPSBlbC50eXBlLnRvVXBwZXJDYXNlKCk7CiAg");
    sb.append("ICAgICAgaWYgKHR5cGUgPT0gIkNIRUNLQk9YIikgewogICAgICAgICAgZWwuY2hlY2tlZCA9IHBheWxv");
    sb.append("YWRbbmFtZV0gPT0gInRydWUiIHx8IHBheWxvYWRbbmFtZV0gPT09IHRydWUgPyB0cnVlIDogZmFsc2U7");
    sb.append("CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsKICAgICAgICAgIGlmIChwYXlsb2Fk");
    sb.append("W25hbWVdID09IGVsLnZhbHVlKSB7CiAgICAgICAgICAgIGVsLmNoZWNrZWQgPSB0cnVlOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbC52YWx1ZSA9IHBheWxvYWRbbmFtZV07CiAg");
    sb.append("ICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoImNoaWxkcmVuIiBpbiBlbCkgewogICAgICB2YXIg");
    sb.append("YXJyID0gZWwuY2hpbGRyZW47CiAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgZm9yICh2YXIg");
    sb.append("ayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAg");
    sb.append("ICBoeWRyYXRlX2Zvcm0oY2gsIGlucHV0KTsKICAgICAgfQogICAgfQogIH0KCgogIC8vIFJVTlRJTUUg");
    sb.append("fCByeDphY3Rpb246Y29weS1mb3JtOiR0YXJnZXQtaWQKICBzZWxmLmFDRiA9IGZ1bmN0aW9uKGZvcm0s");
    sb.append("IHRhcmdldEZvcm1JZCkgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlv");
    sb.append("bihldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBpbnB1dCA9IGdldF9m");
    sb.append("b3JtKGZvcm0sIHt9KTsKICAgICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRh");
    sb.append("cmdldEZvcm1JZCk7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICBoeWRyYXRlX2Zvcm0odGFyZ2V0");
    sb.append("LCBpbnB1dCk7CiAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAg");
    sb.append("ZmlyZV9mYWlsdXJlKGZvcm0sICJmYWlsZWQgdG8gZmluZCBmb3JtIGJ5IGlkICciICsgdGFyZ2V0Rm9y");
    sb.append("bUlkICsgIiciKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFj");
    sb.append("dGlvbj1zZW5kOiRjaGFubmVsCiAgc2VsZi5hU0QgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGNoYW5u");
    sb.append("ZWwpIHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewog");
    sb.append("ICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgICB2");
    sb.append("YXIgbXNnID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKCiAgICAgIGlmIChldnQuc3VibWl0dGVy");
    sb.append("KSB7CiAgICAgICAgdmFyIHMgPSBldnQuc3VibWl0dGVyOwogICAgICAgIGlmIChzLm5hbWUgJiYgcy52");
    sb.append("YWx1ZSkgewogICAgICAgICAgaWYgKHMudmFsdWUgPT0gInRydWUiKSB7IHMudmFsdWUgPSB0cnVlOyB9");
    sb.append("CiAgICAgICAgICBlbHNlIGlmIChzLnZhbHVlID09ICJmYWxzZSIpIHsgcy52YWx1ZSA9IGZhbHNlOyB9");
    sb.append("CiAgICAgICAgICBtc2dbcy5uYW1lXSA9IHMudmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY2hhbm5lbFRvVXNlID0gY2hhbm5lbDsK");
    sb.append("ICAgICAgICBpZiAoY2hhbm5lbCA9PSAiX19kcyIpIHsKICAgICAgICAgIGNoYW5uZWxUb1VzZSA9IG1z");
    sb.append("Z1snX19jaGFubmVsJ107CiAgICAgICAgICBkZWxldGUgbXNnWydfX2NoYW5uZWwnXTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWxUb1VzZSwgbXNnLCB7");
    sb.append("CiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoLyogcGF5bG9hZCAqLykgewogICAgICAgICAgICBm");
    sb.append("aXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICB9LAogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24g");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlNlbmQgZmFpbGVkOiIgKyBy");
    sb.append("ZWFzb24pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyIHBvc3RQYXNz");
    sb.append("d29yZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICgnbmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMp");
    sb.append("IHsKICAgICAgICAgIGlmICghKCdjb25maXJtLW5ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8fCBw");
    sb.append("YXNzd29yZHNbJ25ld19wYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29uZmlybS1uZXdfcGFzc3dvcmQn");
    sb.append("XSkgewogICAgICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZHNb");
    sb.append("J25ld19wYXNzd29yZCddLCB7CiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhc2hlZF9w");
    sb.append("dykgewogICAgICAgICAgICAgICAgbXNnWyduZXdfcGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29y");
    sb.append("ZEhhc2g7CiAgICAgICAgICAgICAgICBhZnRlcigpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAg");
    sb.append("ICAgZmFpbGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwg");
    sb.append("IkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsK");
    sb.append("CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlBhc3N3b3Jk");
    sb.append("cyBtaXNtYXRjaCBmb3IgbmV3IHBhc3N3b3JkLiIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICBhZnRlcigpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCdwYXNzd29yZCcg");
    sb.append("aW4gcGFzc3dvcmRzKSB7CiAgICAgICAgaWYgKCEoJ2NvbmZpcm0tcGFzc3dvcmQnIGluIHBhc3N3b3Jk");
    sb.append("cykgfHwgcGFzc3dvcmRzWydwYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29uZmlybS1wYXNzd29yZCdd");
    sb.append("KSB7CiAgICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZHNbJ3Bh");
    sb.append("c3N3b3JkJ10sIHsKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhc2hlZF9wdykgewogICAg");
    sb.append("ICAgICAgICAgIG1zZ1sncGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29yZEhhc2g7CiAgICAgICAg");
    sb.append("ICAgICAgcG9zdFBhc3N3b3JkKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWxlZDogZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGhhc2gg");
    sb.append("cGFzc3dvcmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRzIG1pc21hdGNoIik7CiAgICAgICAgfQog");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgIHBvc3RQYXNzd29yZCgpOwogICAgICB9CiAgICB9LCB0cnVlKTsK");
    sb.append("ICB9OwogIC8vIDx0b2RvdGFzaz5kZXNjcmlwdGlvbjwvdG9kb3Rhc2s+CiAgc2VsZi5UQVNLID0gZnVu");
    sb.append("Y3Rpb24ocGRvbSwgaWQsIHNlY3Rpb24sIGRlc2NyaXB0aW9uKSB7CiAgICB2YXIgZWxlbWVudCA9IGRv");
    sb.append("Y3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZWxlbWVudC5pbm5lckhUTUwgPSAiJiM5NzQ0");
    sb.append("OyAiICsgZGVzY3JpcHRpb24gKyAiICggIiArIHNlY3Rpb24gKyAiKSA8YnIgLz4iOwogICAgcGRvbS5h");
    sb.append("cHBlbmRDaGlsZChlbGVtZW50KTsKICB9OwogIC8vIFJVTlRJTUU6IHByZS1jb21wcmVzc2lvbiBmb3Ig");
    sb.append("c2V0dGluZyBhbiBhdHRyaWJ1dGUKICAvLyAiZC5zZXRBdHRyaWJ1dGUoYSx2KTsiIC0tPgogIC8vICQu");
    sb.append("U0EoZCxhLHYpOyIKICBzZWxmLlNBID0gZnVuY3Rpb24oZG9tLCBhdHRyLCB2YWx1ZSkgewogICAgZG9t");
    sb.append("LnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7CiAgfTsKICAvLyBSVU5USU1FOiBzZXQgdGhlIGxhYmVs");
    sb.append("IG9mIGFuIG9wdGlvbgogIHNlbGYuU0wgPSBmdW5jdGlvbihkb20sIHZhbHVlKSB7CiAgICBkb20ubGFi");
    sb.append("ZWwgPSB2YWx1ZTsKICAgIGRvbS5pbm5lclRleHQgPSB2YWx1ZTsKICB9OwoKICAvLyBmb3Igc2VsZWN0");
    sb.append("cwogIC8vIGQudmFsdWU9JHZhbHVlOwogIC8vICQuU1YoZCwkdmFsdWUpOwogIHNlbGYuU1YgPSBmdW5j");
    sb.append("dGlvbihkb20sIHZhbHVlKSB7CiAgICB2YXIgcHJpb3IgPSBkb20udmFsdWU7CiAgICBkb20udmFsdWUg");
    sb.append("PSB2YWx1ZTsKICAgIGRvbS5yeHZhbHVlID0gdmFsdWU7CiAgICBpZiAocHJpb3IgIT0gdmFsdWUpIHsK");
    sb.append("ICAgICAgZG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJmb3JjZWQiKSk7CiAgICB9CiAgfTsKICBz");
    sb.append("ZWxmLkZWID0gZnVuY3Rpb24oZG9tLCBmaWVsZCwgdmFsdWUpIHsKICAgIHZhciBwcmlvciA9IGRvbVtm");
    sb.append("aWVsZF07CiAgICBkb21bZmllbGRdID0gdmFsdWU7CiAgICBpZiAocHJpb3IgIT0gdmFsdWUpIHsKICAg");
    sb.append("ICAgZG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJmb3JjZWQiKSk7CiAgICB9CiAgfTsKICBzZWxm");
    sb.append("Lm1lcmdlR290byA9IGZ1bmN0aW9uKGhyZWYsIHN0YXRlKSB7CiAgICB2YXIgcGFydHMgPSAoaHJlZi5z");
    sb.append("dGFydHNXaXRoKCIvIikgPyBocmVmLnN1YnN0cmluZygxKSA6IGhyZWYpLnNwbGl0KCIvIik7CiAgICB2");
    sb.append("YXIgbWVyZ2VJbml0ID0ge307CiAgICBpZiAocm91dGUocGFydHMsIDAsIHJvdXRlciwgbWVyZ2VJbml0");
    sb.append("KSkgewogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKG1lcmdlSW5pdCk7CiAgICB9CiAgfTsKICAv");
    sb.append("LyBSVU5USU1FIHwgPC4uLiBocmVmPSIiIC4uLj4KICBzZWxmLkhSRUYgPSBmdW5jdGlvbiAoZG9tLCBz");
    sb.append("dGF0ZSwgaHJlZiwgbWVyZ2UpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoImhyZWYiLCBmaXhIcmVmKGhy");
    sb.append("ZWYpKTsKICAgIGRvbS5vbmNsaWNrID0gZnVuY3Rpb24gKGV2dCkgewogICAgICB2YXIgdHJpbUhyZWYg");
    sb.append("PSBocmVmOwogICAgICBpZiAodHJpbUhyZWYuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgICAgdHJpbUhy");
    sb.append("ZWYgPSB0cmltSHJlZi5zdWJzdHJpbmcoMSk7CiAgICAgIH0KICAgICAgdmFyIGtRID0gdHJpbUhyZWYu");
    sb.append("aW5kZXhPZignPycpOwogICAgICBpZiAoa1EgPiAwKSB7CiAgICAgICAgdHJpbUhyZWYgPSB0cmltSHJl");
    sb.append("Zi5zdWJzdHJpbmcoMCwga1EpOwogICAgICB9CiAgICAgIHZhciBwYXJ0cyA9IHRyaW1IcmVmLnNwbGl0");
    sb.append("KCIvIik7CiAgICAgIHZhciBtZXJnZUluaXQgPSB7fTsKICAgICAgaWYgKHJvdXRlKHBhcnRzLCAwLCBy");
    sb.append("b3V0ZXIsIG1lcmdlSW5pdCkpIHsKICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBp");
    sb.append("ZiAobWVyZ2UpIHsKICAgICAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUobWVyZ2VJbml0KTsKICAg");
    sb.append("ICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7bWVyZ2U6dHJ1ZX0sICIiLCBmaXhIcmVmKGhy");
    sb.append("ZWYpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi5nb3RvKGhyZWYsIHRydWUpOwogICAg");
    sb.append("ICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9");
    sb.append("OwogIH07CiAgLy8gUlVOVElNRSB8IDwuLi4gY2xhc3M9IiIgLi4uPgogIHNlbGYuQUMgPSBmdW5jdGlv");
    sb.append("biAoZG9tLCB2YWx1ZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCB2YWx1ZSk7CiAgfTsK");
    sb.append("ICBzZWxmLkFDTEFTUyA9IGZ1bmN0aW9uIChkb20sIHZhbHVlKSB7IC8vIHRvIGRlcHJlY2F0ZSBpbiB0");
    sb.append("aGUgZnV0dXJlCiAgICBkb20uc2V0QXR0cmlidXRlKCJjbGFzcyIsIHZhbHVlKTsKICB9OwogIC8vIFJV");
    sb.append("TlRJTUUgfCA8Li4uIHNyYz0iIiAuLi4+CiAgc2VsZi5BU1JDID0gZnVuY3Rpb24gKGRvbSwgdmFsdWUp");
    sb.append("IHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoInNyYyIsIHZhbHVlKTsKICB9OwoKICBzZWxmLmZpbmRFbGVt");
    sb.append("ZW50QnlJZEluVW5ib3VuZERvbSA9IGZ1bmN0aW9uKGRvbSwgaWQpIHsKICAgIHZhciBmZWJpZCA9IGZ1");
    sb.append("bmN0aW9uIChkLCBpZCkgewogICAgICBpZiAoJ2lkJyBpbiBkKSB7CiAgICAgICAgaWYgKGQuaWQgPT0g");
    sb.append("aWQpIHsKICAgICAgICAgIHJldHVybiBkOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoJ2NoaWxk");
    sb.append("cmVuJyBpbiBkKSB7CiAgICAgICAgdmFyIGFyciA9IGQuY2hpbGRyZW47CiAgICAgICAgdmFyIG4gPSBh");
    sb.append("cnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICB2");
    sb.append("YXIgcmVzdWx0ID0gZmViaWQoYXJyW2tdLCBpZCk7CiAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxs");
    sb.append("KSB7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9");
    sb.append("CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIHJldHVybiBmZWJpZChkb20sIGlkKTsKICB9Owog");
    sb.append("IHNlbGYucG9sbEVsZW1lbnQgPSBmdW5jdGlvbihkb20sIHRpbWVvdXQsIHN1Y2Nlc3MsIGZhaWx1cmUp");
    sb.append("IHsKICAgIHZhciBhZG0gPSBmdW5jdGlvbiAoZG9tLCByZW1haW4pIHsKICAgICAgaWYgKHJlbWFpbiA8");
    sb.append("IDApIHsKICAgICAgICBmYWlsdXJlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChk");
    sb.append("b2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICBzdWNjZXNzKCk7CiAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgYWRtKGRv");
    sb.append("bSwgcmVtYWluIC0gMjUpOwogICAgICAgIH0sIDI1KTsKICAgICAgfQogICAgfTsKICAgIGFkbShkb20s");
    sb.append("IHRpbWVvdXQpOwogIH07CiAgdmFyIGxpYnNMb2FkZWQgPSB7fTsKICBzZWxmLmxvYWRMaWJyYXJ5ID0g");
    sb.append("ZnVuY3Rpb24obGliLCBjYWxsYmFjaykgewogICAgaWYgKGxpYiBpbiBsaWJzTG9hZGVkKSB7CiAgICAg");
    sb.append("IGNhbGxiYWNrKGxpYnNMb2FkZWRbbGliXSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGxpYnNMb2Fk");
    sb.append("ZWRbbGliXSA9IGZhbHNlOwogICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Nj");
    sb.append("cmlwdCcpOwogICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJyxsaWIpOwogICAgc2NyaXB0Lm9ubG9h");
    sb.append("ZCA9IGZ1bmN0aW9uKCkgewogICAgICBsaWJzTG9hZGVkW2xpYl0gPSB0cnVlOwogICAgICBjYWxsYmFj");
    sb.append("ayh0cnVlKTsKICAgIH07CiAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICBjYWxs");
    sb.append("YmFjayhmYWxzZSk7CiAgICB9OwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwog");
    sb.append("IH07CiAgd2luZG93LnJ4aHRtbCA9IHNlbGY7CiAgcmV0dXJuIHNlbGY7Cn0pKCk7Cg==");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBpcyB0aGUgY29ubmVjdGlvbiBkZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRo");
    sb.append("ZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhp");
    sb.append("cy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAwOwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBv");
    sb.append("dXQgZnJvbSB0aGUgc2VydmVyLCBob3cgbG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAg");
    sb.append("dGhpcy5yZXNldF9iYWNrb2ZmID0gMTAwMDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0");
    sb.append("aGlzLnNvY2tldCA9IG51bGw7CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5n");
    sb.append("ZXMKICAgIHRoaXMub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3");
    sb.append("aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFybiB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5j");
    sb.append("dGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkgeyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAg");
    sb.append("IHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNh");
    sb.append("bGxiYWNrcyA9IG5ldyBNYXAoKTsKICAgIC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0g");
    sb.append("MDsKICAgIC8vIGV2ZW50cyB0byBleGVjdXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVj");
    sb.append("dCA9IG5ldyBNYXAoKTsKICAgIC8vIHByb3RvY29sIGZvciBtZXRyaWNzCiAgICB0aGlzLnByb3RvY29s");
    sb.append("ID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgfQoKICAvKiogc3RvcCB0aGUgY29ubmVjdGlvbiAqLwogIHN0");
    sb.append("b3AoKSB7CiAgICB0aGlzLmRlYWQgPSB0cnVlOwogICAgaWYgKHRoaXMuc29ja2V0ICE9PSBudWxsKSB7");
    sb.append("CiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgICB9CiAgfQoKICBidW1wKGJtKSB7CiAgICB0cnkg");
    sb.append("ewogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub3Blbigi");
    sb.append("UFVUIiwgdGhpcy5wcm90b2NvbCArICIvLyIgKyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUp");
    sb.append("OwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9keSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHRoaXMucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgdGhpcy5ob3N0ICsgIi9+bGcvIiArIG5hbWUsIHRydWUpOwogICAgICB4aHR0cC5zZW5k");
    sb.append("KGJvZHkpOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgLy8gZG9uJ3QgY2FyZQogICAgfQogIH0KCiAg");
    sb.append("LyoqIHByaXZhdGU6IHJldHJ5IHRoZSBjb25uZWN0aW9uICovCiAgX3JldHJ5KCkgewogICAgLy8gbnVs");
    sb.append("bCBvdXQgdGhlIHNvY2tldAogICAgdGhpcy5zb2NrZXQgPSBudWxsOwogICAgLy8gaWYgd2UgYXJlIGNv");
    sb.append("bm5lY3RlZCwgdHJhbnNpdGlvbiB0aGUgc3RhdHVzCiAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHsKICAg");
    sb.append("ICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5vbnN0YXR1c2NoYW5nZShmYWxzZSk7");
    sb.append("CiAgICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiLCBpZCkgewogICAgICAgIGNi");
    sb.append("KHtmYWlsdXJlOjk5OX0pOwogICAgICB9KTsKICAgIH0KICAgIHRoaXMuY2FsbGJhY2tzLmNsZWFyKCk7");
    sb.append("CiAgICAvLyBpZiB3ZSBhcmUgZGVhZCwgdGhlbiBkb24ndCBhY3R1YWxseSByZXRyeQogICAgaWYgKHRo");
    sb.append("aXMuZGVhZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBtYWtlIHN1cmUKICAgIGlmICghdGhp");
    sb.append("cy5zY2hlZHVsZWQpIHsKICAgICAgLy8gc2NoZWR1bGUgYSByZXRyeTsgZmlyc3QgY29tcHV0ZSBob3cg");
    sb.append("bG9uZyB0byB0YWtlCiAgICAgIC8vIGNvbXB1dGUgaG93IGxvbmcgd2UgbmVlZCB0byB3YWl0CiAgICAg");
    sb.append("IHZhciBoYWx2ZUFmdGVyU2NoZWR1bGUgPSBmYWxzZTsKICAgICAgdGhpcy5iYWNrb2ZmICs9IE1hdGgu");
    sb.append("cmFuZG9tKCkgKiB0aGlzLmJhY2tvZmY7CiAgICAgIGlmICh0aGlzLmJhY2tvZmYgPiB0aGlzLm1heGlt");
    sb.append("dW1fYmFja29mZikgewogICAgICAgIHRoaXMuYmFja29mZiA9IHRoaXMubWF4aW11bV9iYWNrb2ZmOwog");
    sb.append("ICAgICAgIGhhbHZlQWZ0ZXJTY2hlZHVsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIC8vIHNjaGVkdWxl");
    sb.append("IGl0CiAgICAgIHRoaXMuc2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLnN0YXJ0KCk7CiAgICAgIH0sIHRo");
    sb.append("aXMuYmFja29mZik7CgogICAgICAvLyB3ZSBqdXN0IHNjaGVkdWxlZCBpdCBmb3IgdGhlIG1heGltdW0g");
    sb.append("YmFja29mZiB0aW1lLCBsZXQncyByZWR1Y2UgdGhlIGJhY2tvZmYgc28gdGhlIG5leHQgb25lIHdpbGwg");
    sb.append("aGF2ZSBzb21lIGppdHRlcgogICAgICBpZiAoaGFsdmVBZnRlclNjaGVkdWxlKSB7CiAgICAgICAgdGhp");
    sb.append("cy5iYWNrb2ZmIC89IDIuMDsKICAgICAgfQogICAgfQogIH0KCiAgLyoqIHN0YXJ0IHRoZSBjb25uZWN0");
    sb.append("aW9uICovCiAgc3RhcnQoKSB7CiAgICAvLyByZXNldCB0aGUgc3RhdGUKICAgIHZhciBzZWxmID0gdGhp");
    sb.append("czsKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIHRo");
    sb.append("aXMuaGFzX2hhZF9waW5nID0gZmFsc2U7CiAgICB0aGlzLmxhc3RfcGluZyA9IDA7CiAgICB0aGlzLnBp");
    sb.append("bmdfZmFpbHVyZXMgPSAwOwogICAgLy8gY3JlYXRlIHRoZSBzb2NrZXQgYW5kIGJpbmQgZXZlbnQgaGFu");
    sb.append("ZGxlcnMKICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnVybCk7CiAgICB0aGlzLnNv");
    sb.append("Y2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IEpTT04u");
    sb.append("cGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIC8vIGEgbWVzc2FnZSBhcnJpdmVkLCBpcyBpdCBhIGNvbm5l");
    sb.append("Y3Rpb24gc2lnbmFsCiAgICAgIGlmICgicGluZyIgaW4gcmVzdWx0KSB7CiAgICAgICAgc2VsZi5vbnBp");
    sb.append("bmcocmVzdWx0LnBpbmcsIHJlc3VsdC5sYXRlbmN5KTsKICAgICAgICByZXN1bHQucG9uZyA9IG5ldyBE");
    sb.append("YXRlKCkuZ2V0VGltZSgpIC8gMTAwMC4wOwogICAgICAgIHNlbGYuc29ja2V0LnNlbmQoSlNPTi5zdHJp");
    sb.append("bmdpZnkocmVzdWx0KSk7CiAgICAgICAgc2VsZi5sYXN0X3BpbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUo");
    sb.append("KTsKICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGlmICgic3RhdHVzIiBpbiByZXN1bHQpIHsKICAgICAgICAvLyBoZXksIGFyZSB3ZSBjb25u");
    sb.append("ZWN0ZWQ/CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAg");
    sb.append("IC8vIG5vcGUsIE9LLCBsZXQncyBtYWtlIHRoaXMgYSBkZWFkIHNvY2tldAogICAgICAgICAgc2VsZi5z");
    sb.append("b2NrZXQuY2xvc2UoKTsKICAgICAgICAgIHNlbGYuc29ja2V0ID0gbnVsbDsKICAgICAgICAgIHNlbGYu");
    sb.append("YmFja29mZiA9IHNlbGYucmVzZXRfYmFja29mZjsKICAgICAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIHRlbGwgdGhlIGNsaWVudCB0aGF0IHdlIGFy");
    sb.append("ZSBnb29kIQogICAgICAgIHNlbGYuYmFja29mZiA9IDE7CiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVjb25u");
    sb.append("ZWN0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9u");
    sb.append("cmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNl");
    sb.append("dChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJu");
    sb.append("IG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYg");
    sb.append("KCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNw");
    sb.append("b25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAg");
    sb.append("aWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29t");
    sb.append("cGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5f");
    sb.append("X3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAg");
    sb.append("fTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0");
    sb.append("dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2Nv");
    sb.append("dW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0");
    sb.append("L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJ");
    sb.append("bml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJh");
    sb.append("Y2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAi");
    sb.append("cmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50");
    sb.append("aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBs");
    sb.append("YW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFj");
    sb.append("Y291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQog");
    sb.append("ICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1h");
    sb.append("aWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRp");
    sb.append("dHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0K");
    sb.append("ICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAg");
    sb.append("QXV0aG9yaXR5Q3JlYXRlKGlkZW50aXR5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJhdXRob3JpdHkvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHl9CiAgICB9KTsKICB9CiAgQXV0aG9yaXR5U2V0KGlkZW50aXR5LCBhdXRob3JpdHksIGtleVN0b3Jl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvc2V0");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJhdXRob3JpdHkiOiBhdXRob3JpdHks");
    sb.append("ICJrZXktc3RvcmUiOiBrZXlTdG9yZX0KICAgIH0pOwogIH0KICBBdXRob3JpdHlHZXQoaWRlbnRpdHks");
    sb.append("IGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJ");
    sb.append("ZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXV0");
    sb.append("aG9yaXR5L2dldCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiYXV0aG9yaXR5Ijog");
    sb.append("YXV0aG9yaXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eUxpc3QoaWRlbnRpdHksIHJlc3BvbmRlcikg");
    sb.append("ewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvbGlzdCIsICJpZCI6");
    sb.append("cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eURlc3Ryb3ko");
    sb.append("aWRlbnRpdHksIGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2");
    sb.append("YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAg");
    sb.append("IGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0");
    sb.append("aG9kIjoiYXV0aG9yaXR5L2Rlc3Ryb3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwg");
    sb.append("ImF1dGhvcml0eSI6IGF1dGhvcml0eX0KICAgIH0pOwogIH0KICBTcGFjZUNyZWF0ZShpZGVudGl0eSwg");
    sb.append("c3BhY2UsIHRlbXBsYXRlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjog");
    sb.append("c3BhY2UsICJ0ZW1wbGF0ZSI6IHRlbXBsYXRlfQogICAgfSk7CiAgfQogIFNwYWNlR2VuZXJhdGVLZXko");
    sb.append("aWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9nZW5lcmF0ZS1rZXkiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VHZXQoaWRlbnRpdHksIHNwYWNlLCByZXNwb25k");
    sb.append("ZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAg");
    sb.append("cmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQiLCAiaWQiOnBhcklk");
    sb.append("LCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VT");
    sb.append("ZXQoaWRlbnRpdHksIHNwYWNlLCBwbGFuLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJzcGFjZS9zZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2UsICJwbGFuIjogcGxhbn0KICAgIH0pOwogIH0KICBTcGFjZVJlZGVwbG95S2ljayhp");
    sb.append("ZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("InNwYWNlL3JlZGVwbG95LWtpY2siLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VTZXRSeGh0bWwoaWRlbnRpdHksIHNwYWNlLCBy");
    sb.append("eGh0bWwsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3Nl");
    sb.append("dC1yeGh0bWwiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2Us");
    sb.append("ICJyeGh0bWwiOiByeGh0bWx9CiAgICB9KTsKICB9CiAgU3BhY2VHZXRSeGh0bWwoaWRlbnRpdHksIHNw");
    sb.append("YWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQt");
    sb.append("cnhodG1sIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlfQog");
    sb.append("ICAgfSk7CiAgfQogIFNwYWNlU2V0UG9saWN5KGlkZW50aXR5LCBzcGFjZSwgYWNjZXNzUG9saWN5LCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9zZXQtcG9saWN5");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAiYWNjZXNz");
    sb.append("LXBvbGljeSI6IGFjY2Vzc1BvbGljeX0KICAgIH0pOwogIH0KICBTcGFjZUdldFBvbGljeShpZGVudGl0");
    sb.append("eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQs");
    sb.append("CiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNl");
    sb.append("L2dldC1wb2xpY3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2V9CiAgICB9KTsKICB9CiAgU3BhY2VNZXRyaWNzKGlkZW50aXR5LCBzcGFjZSwgcHJlZml4LCBtZXRy");
    sb.append("aWNRdWVyeSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2Uv");
    sb.append("bWV0cmljcyIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwg");
    sb.append("InByZWZpeCI6IHByZWZpeCwgIm1ldHJpYy1xdWVyeSI6IG1ldHJpY1F1ZXJ5fQogICAgfSk7CiAgfQog");
    sb.append("IFNwYWNlRGVsZXRlKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRo");
    sb.append("aXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVl");
    sb.append("c3Q6IHsibWV0aG9kIjoic3BhY2UvZGVsZXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHksICJzcGFjZSI6IHNwYWNlfQogICAgfSk7CiAgfQogIFNwYWNlU2V0Um9sZShpZGVudGl0eSwgc3Bh");
    sb.append("Y2UsIGVtYWlsLCByb2xlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9zZXQtcm9sZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2Ui");
    sb.append("OiBzcGFjZSwgImVtYWlsIjogZW1haWwsICJyb2xlIjogcm9sZX0KICAgIH0pOwogIH0KICBTcGFjZUxp");
    sb.append("c3REZXZlbG9wZXJzKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRo");
    sb.append("aXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9z");
    sb.append("dHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2xpc3QtZGV2ZWxvcGVycyIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3Qo");
    sb.append("aWRlbnRpdHksIHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6InNwYWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBt");
    sb.append("YXJrZXIsIGxpbWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJ");
    sb.append("ZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlk");
    sb.append("OiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9k");
    sb.append("Ijoic3BhY2UvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjog");
    sb.append("bWFya2VyLCAibGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHks");
    sb.append("IGRvbWFpbiwgc3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJk");
    sb.append("ZXZpY2UtaW5mbyI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluTWFwKGlkZW50aXR5LCBk");
    sb.append("b21haW4sIHNwYWNlLCBjZXJ0aWZpY2F0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6");
    sb.append("IHsibWV0aG9kIjoiZG9tYWluL21hcCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAi");
    sb.append("ZG9tYWluIjogZG9tYWluLCAic3BhY2UiOiBzcGFjZSwgImNlcnRpZmljYXRlIjogY2VydGlmaWNhdGV9");
    sb.append("CiAgICB9KTsKICB9CiAgRG9tYWluQ2xhaW1BcGV4KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikg");
    sb.append("ewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVz");
    sb.append("cG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9jbGFpbS1hcGV4IiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAg");
    sb.append("RG9tYWluUmVkaXJlY3QoaWRlbnRpdHksIGRvbWFpbiwgZGVzdGluYXRpb25Eb21haW4sIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9yZWRpcmVjdCIsICJpZCI6");
    sb.append("cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAiZGVzdGluYXRpb24t");
    sb.append("ZG9tYWluIjogZGVzdGluYXRpb25Eb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluQ29uZmlndXJlKGlk");
    sb.append("ZW50aXR5LCBkb21haW4sIHByb2R1Y3RDb25maWcsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0");
    sb.append("aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9jb25maWd1cmUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBp");
    sb.append("ZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbiwgInByb2R1Y3QtY29uZmlnIjogcHJvZHVjdENvbmZpZ30K");
    sb.append("ICAgIH0pOwogIH0KICBEb21haW5SZWZsZWN0KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9yZWZsZWN0IiwgImlkIjpwYXJJZCwg");
    sb.append("ImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWlu");
    sb.append("TWFwRG9jdW1lbnQoaWRlbnRpdHksIGRvbWFpbiwgc3BhY2UsIGtleSwgcm91dGUsIGNlcnRpZmljYXRl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vbWFwLWRv");
    sb.append("Y3VtZW50IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4s");
    sb.append("ICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAicm91dGUiOiByb3V0ZSwgImNlcnRpZmljYXRlIjog");
    sb.append("Y2VydGlmaWNhdGV9CiAgICB9KTsKICB9CiAgRG9tYWluTGlzdChpZGVudGl0eSwgcmVzcG9uZGVyKSB7");
    sb.append("CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVy");
    sb.append("biBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9saXN0IiwgImlkIjpwYXJJ");
    sb.append("ZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgRG9tYWluTGlzdEJ5U3BhY2UoaWRl");
    sb.append("bnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJ");
    sb.append("ZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlk");
    sb.append("OiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9k");
    sb.append("IjoiZG9tYWluL2xpc3QtYnktc3BhY2UiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwg");
    sb.append("InNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgRG9tYWluR2V0VmFwaWRQdWJsaWNLZXkoaWRlbnRp");
    sb.append("dHksIGRvbWFpbiwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJ");
    sb.append("ZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9t");
    sb.append("YWluL2dldC12YXBpZC1wdWJsaWMta2V5IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluVW5tYXAoaWRlbnRpdHksIGRvbWFp");
    sb.append("biwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAg");
    sb.append("cmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL3VubWFw");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9");
    sb.append("KTsKICB9CiAgRG9tYWluR2V0KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9nZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBp");
    sb.append("ZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbn0KICAgIH0pOwogIH0KICBEb2N1bWVudERvd25sb2FkQXJj");
    sb.append("aGl2ZShpZGVudGl0eSwgc3BhY2UsIGtleSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJl");
    sb.append("YW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2Rvd25sb2FkLWFyY2hpdmUiLCAiaWQiOnBhcklkLCAiaWRl");
    sb.append("bnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9jdW1lbnRMaXN0UHVzaFRva2VucyhpZGVudGl0eSwgc3BhY2UsIGtleSwgZG9tYWluLCBhZ2VudCwg");
    sb.append("cmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQo");
    sb.append("KTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2xp");
    sb.append("c3QtcHVzaC10b2tlbnMiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjog");
    sb.append("c3BhY2UsICJrZXkiOiBrZXksICJkb21haW4iOiBkb21haW4sICJhZ2VudCI6IGFnZW50fQogICAgfSk7");
    sb.append("CiAgfQogIERvY3VtZW50QXV0aG9yaXphdGlvbihzcGFjZSwga2V5LCBtZXNzYWdlLCByZXNwb25kZXIp");
    sb.append("IHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0");
    sb.append("dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJl");
    sb.append("c3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemF0aW9uIiwg");
    sb.append("ImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJtZXNzYWdlIjogbWVzc2FnZX0K");
    sb.append("ICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oZG9tYWluLCBtZXNzYWdlLCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3Jp");
    sb.append("emF0aW9uLWRvbWFpbiIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJtZXNzYWdlIjogbWVz");
    sb.append("c2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZShzcGFjZSwga2V5LCB1c2VybmFtZSwg");
    sb.append("cGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQs");
    sb.append("CiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3Vt");
    sb.append("ZW50L2F1dGhvcml6ZSIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidXNl");
    sb.append("cm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1l");
    sb.append("bnRBdXRob3JpemVEb21haW4oZG9tYWluLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS1kb21haW4iLCAi");
    sb.append("aWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3Jk");
    sb.append("IjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQoc3BhY2Us");
    sb.append("IGtleSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFy");
    sb.append("IHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAog");
    sb.append("ICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS13aXRoLXJlc2V0IiwgImlk");
    sb.append("IjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAi");
    sb.append("cGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgIH0pOwog");
    sb.append("IH0KICBEb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChkb21haW4sIHVzZXJuYW1lLCBwYXNz");
    sb.append("d29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZh");
    sb.append("ciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9tYWluLXdpdGgtcmVzZXQiLCAiaWQiOnBhcklkLCAiZG9t");
    sb.append("YWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmQsICJu");
    sb.append("ZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRDcmVhdGUoaWRl");
    sb.append("bnRpdHksIHNwYWNlLCBrZXksIGVudHJvcHksIGFyZywgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9");
    sb.append("IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0");
    sb.append("ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJl");
    sb.append("cXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZW50cm9weSI6IGVudHJvcHksICJh");
    sb.append("cmciOiBhcmd9CiAgICB9KTsKICB9CiAgRG9jdW1lbnREZWxldGUoaWRlbnRpdHksIHNwYWNlLCBrZXks");
    sb.append("IHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lk");
    sb.append("KCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJl");
    sb.append("c3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2RlbGV0");
    sb.append("ZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6");
    sb.append("IGtleX0KICAgIH0pOwogIH0KICBEb2N1bWVudExpc3QoaWRlbnRpdHksIHNwYWNlLCBtYXJrZXIsIGxp");
    sb.append("bWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1l");
    sb.append("bnQvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwg");
    sb.append("Im1hcmtlciI6IG1hcmtlciwgImxpbWl0IjogbGltaXR9CiAgICB9KTsKICB9CiAgTWVzc2FnZURpcmVj");
    sb.append("dFNlbmQoaWRlbnRpdHksIHNwYWNlLCBrZXksIGNoYW5uZWwsIG1lc3NhZ2UsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6Im1lc3NhZ2UvZGlyZWN0LXNlbmQiLCAiaWQiOnBh");
    sb.append("cklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJjaGFu");
    sb.append("bmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgfSk7CiAgfQogIE1lc3NhZ2VEaXJl");
    sb.append("Y3RTZW5kT25jZShpZGVudGl0eSwgc3BhY2UsIGtleSwgZGVkdXBlLCBjaGFubmVsLCBtZXNzYWdlLCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1z");
    sb.append("ZW5kLW9uY2UiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2Us");
    sb.append("ICJrZXkiOiBrZXksICJkZWR1cGUiOiBkZWR1cGUsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2Ui");
    sb.append("OiBtZXNzYWdlfQogICAgfSk7CiAgfQogIENvbm5lY3Rpb25DcmVhdGUoaWRlbnRpdHksIHNwYWNlLCBr");
    sb.append("ZXksIHZpZXdlclN0YXRlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAg");
    sb.append("IGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0");
    sb.append("aG9kIjoiY29ubmVjdGlvbi9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwg");
    sb.append("InNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0ZX0sCiAg");
    sb.append("ICAgIHNlbmQ6IGZ1bmN0aW9uKGNoYW5uZWwsIG1lc3NhZ2UsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9u");
    sb.append("IjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7");
    sb.append("CiAgICAgIH0sCiAgICAgIHBhc3N3b3JkOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQsIG5ld19w");
    sb.append("YXNzd29yZCwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAg");
    sb.append("ICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVz");
    sb.append("cG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rp");
    sb.append("b24vcGFzc3dvcmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgInVzZXJuYW1lIjogdXNl");
    sb.append("cm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3b3JkIjogbmV3X3Bhc3N3b3JkfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBzZW5kT25jZTogZnVuY3Rpb24oY2hhbm5lbCwgZGVkdXBl");
    sb.append("LCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsK");
    sb.append("ICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICBy");
    sb.append("ZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVj");
    sb.append("dGlvbi9zZW5kLW9uY2UiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5uZWwiOiBj");
    sb.append("aGFubmVsLCAiZGVkdXBlIjogZGVkdXBlLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAg");
    sb.append("ICAgIH0sCiAgICAgIGNhbkF0dGFjaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFy");
    sb.append("IHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAg");
    sb.append("aWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1");
    sb.append("ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vY2FuLWF0dGFjaCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rp");
    sb.append("b24iOnBhcklkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBhdHRhY2g6IGZ1bmN0aW9uKGFzc2V0");
    sb.append("SWQsIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgc2l6ZSwgZGlnZXN0TWQ1LCBkaWdlc3RTaGEzODQsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2F0dGFjaCIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiYXNzZXQtaWQiOiBhc3NldElkLCAiZmlsZW5h");
    sb.append("bWUiOiBmaWxlbmFtZSwgImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRUeXBlLCAic2l6ZSI6IHNpemUsICJk");
    sb.append("aWdlc3QtbWQ1IjogZGlnZXN0TWQ1LCAiZGlnZXN0LXNoYTM4NCI6IGRpZ2VzdFNoYTM4NH0KICAgICAg");
    sb.append("ICB9KTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbih2aWV3ZXJTdGF0ZSwgc3ViUmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25k");
    sb.append("ZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vdXBkYXRlIiwgaWQ6IHN1");
    sb.append("YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0ZX0KICAgICAg");
    sb.append("ICB9KTsKICAgICAgfSwKICAgICAgZW5kOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2");
    sb.append("YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAg");
    sb.append("ICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJl");
    sb.append("cXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9lbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpw");
    sb.append("YXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIENvbm5lY3Rpb25DcmVhdGVWaWFE");
    sb.append("b21haW4oaWRlbnRpdHksIGRvbWFpbiwgdmlld2VyU3RhdGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwK");
    sb.append("ICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJjb25uZWN0aW9uL2NyZWF0ZS12aWEtZG9tYWluIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJ2aWV3ZXItc3Rh");
    sb.append("dGUiOiB2aWV3ZXJTdGF0ZX0sCiAgICAgIHNlbmQ6IGZ1bmN0aW9uKGNoYW5uZWwsIG1lc3NhZ2UsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQiLCBp");
    sb.append("ZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6");
    sb.append("IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHBhc3N3b3JkOiBmdW5jdGlvbih1c2Vy");
    sb.append("bmFtZSwgcGFzc3dvcmQsIG5ld19wYXNzd29yZCwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1");
    sb.append("YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6");
    sb.append("IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0");
    sb.append("OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vcGFzc3dvcmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpw");
    sb.append("YXJJZCwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3");
    sb.append("b3JkIjogbmV3X3Bhc3N3b3JkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBzZW5kT25jZTogZnVu");
    sb.append("Y3Rpb24oY2hhbm5lbCwgZGVkdXBlLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIg");
    sb.append("c3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBp");
    sb.append("ZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVl");
    sb.append("c3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kLW9uY2UiLCBpZDogc3ViSWQsICJjb25uZWN0aW9u");
    sb.append("IjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAiZGVkdXBlIjogZGVkdXBlLCAibWVzc2FnZSI6IG1l");
    sb.append("c3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGNhbkF0dGFjaDogZnVuY3Rpb24oc3ViUmVz");
    sb.append("cG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNw");
    sb.append("b25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vY2FuLWF0dGFjaCIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBh");
    sb.append("dHRhY2g6IGZ1bmN0aW9uKGFzc2V0SWQsIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgc2l6ZSwgZGlnZXN0");
    sb.append("TWQ1LCBkaWdlc3RTaGEzODQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL2F0dGFjaCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiYXNzZXQt");
    sb.append("aWQiOiBhc3NldElkLCAiZmlsZW5hbWUiOiBmaWxlbmFtZSwgImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRU");
    sb.append("eXBlLCAic2l6ZSI6IHNpemUsICJkaWdlc3QtbWQ1IjogZGlnZXN0TWQ1LCAiZGlnZXN0LXNoYTM4NCI6");
    sb.append("IGRpZ2VzdFNoYTM4NH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbih2");
    sb.append("aWV3ZXJTdGF0ZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7");
    sb.append("CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAg");
    sb.append("cmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5l");
    sb.append("Y3Rpb24vdXBkYXRlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ2aWV3ZXItc3RhdGUi");
    sb.append("OiB2aWV3ZXJTdGF0ZX0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZW5kOiBmdW5jdGlvbihzdWJS");
    sb.append("ZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJl");
    sb.append("c3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9lbmQiLCBpZDog");
    sb.append("c3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQog");
    sb.append("IERvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9");
    sb.append("IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0");
    sb.append("ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJl");
    sb.append("cXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnRzL2hhc2gtcGFzc3dvcmQiLCAiaWQiOnBhcklkLCAicGFz");
    sb.append("c3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBCaWxsaW5nQ29ubmVjdGlvbkNyZWF0ZShpZGVu");
    sb.append("dGl0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQs");
    sb.append("CiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImJpbGxp");
    sb.append("bmctY29ubmVjdGlvbi9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0sCiAg");
    sb.append("ICAgIHNlbmQ6IGZ1bmN0aW9uKGNoYW5uZWwsIG1lc3NhZ2UsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9u");
    sb.append("IjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7");
    sb.append("CiAgICAgIH0sCiAgICAgIHBhc3N3b3JkOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQsIG5ld19w");
    sb.append("YXNzd29yZCwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAg");
    sb.append("ICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVz");
    sb.append("cG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rp");
    sb.append("b24vcGFzc3dvcmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgInVzZXJuYW1lIjogdXNl");
    sb.append("cm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3b3JkIjogbmV3X3Bhc3N3b3JkfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBzZW5kT25jZTogZnVuY3Rpb24oY2hhbm5lbCwgZGVkdXBl");
    sb.append("LCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsK");
    sb.append("ICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICBy");
    sb.append("ZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVj");
    sb.append("dGlvbi9zZW5kLW9uY2UiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5uZWwiOiBj");
    sb.append("aGFubmVsLCAiZGVkdXBlIjogZGVkdXBlLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAg");
    sb.append("ICAgIH0sCiAgICAgIGNhbkF0dGFjaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFy");
    sb.append("IHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAg");
    sb.append("aWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1");
    sb.append("ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vY2FuLWF0dGFjaCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rp");
    sb.append("b24iOnBhcklkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBhdHRhY2g6IGZ1bmN0aW9uKGFzc2V0");
    sb.append("SWQsIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgc2l6ZSwgZGlnZXN0TWQ1LCBkaWdlc3RTaGEzODQsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2F0dGFjaCIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiYXNzZXQtaWQiOiBhc3NldElkLCAiZmlsZW5h");
    sb.append("bWUiOiBmaWxlbmFtZSwgImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRUeXBlLCAic2l6ZSI6IHNpemUsICJk");
    sb.append("aWdlc3QtbWQ1IjogZGlnZXN0TWQ1LCAiZGlnZXN0LXNoYTM4NCI6IGRpZ2VzdFNoYTM4NH0KICAgICAg");
    sb.append("ICB9KTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbih2aWV3ZXJTdGF0ZSwgc3ViUmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25k");
    sb.append("ZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vdXBkYXRlIiwgaWQ6IHN1");
    sb.append("YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0ZX0KICAgICAg");
    sb.append("ICB9KTsKICAgICAgfSwKICAgICAgZW5kOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2");
    sb.append("YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAg");
    sb.append("ICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJl");
    sb.append("cXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9lbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpw");
    sb.append("YXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIEF0dGFjaG1lbnRTdGFydChpZGVu");
    sb.append("dGl0eSwgc3BhY2UsIGtleSwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCByZXNwb25kZXIpIHsKICAgIHZh");
    sb.append("ciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYu");
    sb.append("X19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25k");
    sb.append("ZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXR0YWNobWVudC9zdGFydCIsICJpZCI6cGFySWQs");
    sb.append("ICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgImZpbGVuYW1l");
    sb.append("IjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZX0sCiAgICAgIGFwcGVuZDogZnVu");
    sb.append("Y3Rpb24oY2h1bmtNZDUsIGJhc2U2NEJ5dGVzLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3Vi");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDog");
    sb.append("c3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6");
    sb.append("IHsgbWV0aG9kOiAiYXR0YWNobWVudC9hcHBlbmQiLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklkLCAi");
    sb.append("Y2h1bmstbWQ1IjogY2h1bmtNZDUsICJiYXNlNjQtYnl0ZXMiOiBiYXNlNjRCeXRlc30KICAgICAgICB9");
    sb.append("KTsKICAgICAgfSwKICAgICAgZmluaXNoOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2");
    sb.append("YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAg");
    sb.append("ICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJl");
    sb.append("cXVlc3Q6IHsgbWV0aG9kOiAiYXR0YWNobWVudC9maW5pc2giLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBh");
    sb.append("cklkfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgQXR0YWNobWVudFN0YXJ0QnlEb21h");
    sb.append("aW4oaWRlbnRpdHksIGRvbWFpbiwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCByZXNwb25kZXIpIHsKICAg");
    sb.append("IHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNl");
    sb.append("bGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNw");
    sb.append("b25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXR0YWNobWVudC9zdGFydC1ieS1kb21haW4i");
    sb.append("LCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbiwgImZpbGVu");
    sb.append("YW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZX0sCiAgICAgIGFwcGVuZDog");
    sb.append("ZnVuY3Rpb24oY2h1bmtNZDUsIGJhc2U2NEJ5dGVzLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIg");
    sb.append("c3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBp");
    sb.append("ZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVl");
    sb.append("c3Q6IHsgbWV0aG9kOiAiYXR0YWNobWVudC9hcHBlbmQiLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklk");
    sb.append("LCAiY2h1bmstbWQ1IjogY2h1bmtNZDUsICJiYXNlNjQtYnl0ZXMiOiBiYXNlNjRCeXRlc30KICAgICAg");
    sb.append("ICB9KTsKICAgICAgfSwKICAgICAgZmluaXNoOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAg");
    sb.append("ICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAg");
    sb.append("ICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAg");
    sb.append("IHJlcXVlc3Q6IHsgbWV0aG9kOiAiYXR0YWNobWVudC9maW5pc2giLCBpZDogc3ViSWQsICJ1cGxvYWQi");
    sb.append("OnBhcklkfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CgogIC8qKltFTkQtSU5WT0tFXSoq");
    sb.append("Lwp9Cgp2YXIgQWRhbWEgPSB7CiAgUHJvZHVjdGlvbjogImF3cy11cy1lYXN0LTIuYWRhbWEtcGxhdGZv");
    sb.append("cm0uY29tIiwKICBCZXRhOiAiYmV0YS5hZGFtYS1wbGF0Zm9ybS5jb20iLAogIENvbm5lY3Rpb246IFdl");
    sb.append("YlNvY2tldEFkYW1hQ29ubmVjdGlvbgp9Owo=");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
